<!DOCTYPE html>
<html class=""><head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="application/shiny-singletons"></script>
  <script type="application/html-dependencies">jquery[3.6.0];shiny-css[1.7.0];shiny-javascript[1.7.0]</script>
<script src="index_files/jquery.js"></script>
<link href="index_files/shiny.css" rel="stylesheet">
<script src="index_files/shiny.js"></script>  <script src="index_files/rmd_loader.js"></script>
  <link href="index_files/rmd_loader.css" rel="stylesheet">
<script src="index_files/header-attrs.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" type="text/css" href="index_files/readable.css"><script src="index_files/bootstrap.js"></script><script src="index_files/html5shiv.js"></script><script src="index_files/respond.js"></script><style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style><link rel="stylesheet" type="text/css" href="index_files/pagedtable.css"><script src="index_files/pagedtable.js"></script><script src="index_files/tabsets.js"></script><script src="index_files/codefolding.js"></script><script src="index_files/sourceembed.js"></script><script src="index_files/htmlwidgets.js"></script><script src="index_files/d3.js"></script><script src="index_files/dagre-d3.js"></script><link rel="stylesheet" type="text/css" href="index_files/mermaid.css"><script src="index_files/mermaid.js"></script><link rel="stylesheet" type="text/css" href="index_files/styles.css"><script src="index_files/chromatography.js"></script><script src="index_files/DiagrammeR.js"></script><link rel="stylesheet" type="text/css" href="index_files/selectize.css"><script src="index_files/selectize.js"></script><script src="index_files/selectize-plugin-a11y.js"></script><link rel="stylesheet" type="text/css" href="index_files/rmd_perf.css"><script src="index_files/rmd_perf.js"></script><meta name="rstudio_origin" content="127.0.0.1:38143"><script src="index_files/rsiframe.js"></script>

<meta charset="utf-8">
<meta name="generator" content="pandoc">
<meta http-equiv="X-UA-Compatible" content="IE=EDGE">


<meta name="author" content="Jimmy Briggs">

<meta name="date" content="2016-05-09">

<title>Micro-Claims Analysis and Modelling: Claim Status and Payment Model</title>


<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */

.sourceCode .row {
  width: 100%;
}
.sourceCode {
  overflow-x: auto;
}
.code-folding-btn {
  margin-right: -30px;
}
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>


<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>





<style type="text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>

<style type="text/css">
.kable-table {
  border: 1px solid #ccc;
  border-radius: 4px;
  overflow: auto;
  padding-left: 8px;
  padding-right: 8px;
  margin-bottom: 20px;
  max-height: 350px;
}

.kable-table table {
  margin-bottom: 0px;
}

.kable-table table>thead>tr>th {
  border: none;
  border-bottom: 2px solid #dddddd;
}

.kable-table table>thead {
  background-color: #fff;
}
</style>


<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>




<script type="text/javascript" src="index_files/MathJax.js"></script><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuRadioCheck.RTL {right: 1em; left: auto}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1px; bottom: 2px; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover, .MJXp-munder {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > *, .MJXp-munder > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style></head>
<body><div id="MathJax_Message" style="display: none;"></div>
  <div>
    <div data-display-if="!output.__reactivedoc__" data-ns-prefix="" style="display: none;">
      <div id="rmd_loader_wrapper">
        <div id="rmd_loader" style="">
          <p>Please wait...</p>
          <img src="index_files/rmd_loader.gif">
        </div>
      </div>
    </div>
    <div id="__reactivedoc__" class="shiny-html-output shiny-bound-output" aria-live="polite">








<div class="container-fluid main-container">




<div id="section-header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Micro-Claims Analysis and Modelling: Claim Status and Payment Model</h1>
<h4 class="author">Jimmy Briggs</h4>
<h4 class="date">May 9, 2016</h4>

</div>

<div id="section-TOC">
<ul>
<li><a href="#section-introduction">Introduction</a>
<ul>
<li><a href="#section-purpose-and-scope">Purpose and Scope</a></li>
<li><a href="#section-background">Background</a></li>
<li><a href="#section-overview">Overview</a></li>
<li><a href="#section-vocabulary">Vocabulary</a></li>
<li><a href="#section-data">Data</a></li>
</ul></li>
<li><a href="#section-the-model">The Model</a>
<ul>
<li><a href="#section-model-overview-diagram">Model Overview Diagram</a></li>
<li><a href="#section-claim-closure-model">Claim Closure Model</a></li>
<li><a href="#section-zero-payment-model">Zero Payment Model</a></li>
<li><a href="#section-incremental-payment-model">Incremental Payment Model</a></li>
</ul></li>
<li><a href="#section-simulation">Simulation</a>
<ul>
<li><a href="#section-closure-status">Closure Status</a></li>
<li><a href="#section-zero-payment-model-1">Zero Payment Model</a></li>
<li><a href="#section-incremental-payment-simulation">Incremental Payment Simulation</a></li>
<li><a href="#section-results">Results</a></li>
</ul></li>
<li><a href="#section-conclusion">Conclusion</a></li>
<li><a href="#section-appendices">Appendices</a>
<ul>
<li><a href="#section-a.-software">A. Software</a></li>
<li><a href="#section-closure-model-summary-statistics">Closure Model Summary Statistics</a></li>
<li><a href="#section-zero-payment-model-summary-statistics">Zero Payment Model Summary Statistics}</a></li>
<li><a href="#section-incremental-payment-model-summary-statistics">Incremental Payment Model Summary Statistics</a></li>
</ul></li>
</ul>
</div>

<!-- rnb-text-begin -->
<!-- rnb-text-end -->
<!-- rnb-chunk-begin -->
<!-- rnb-chunk-end -->
<!-- rnb-text-begin -->
<p><a href="https://github.com/jimbrig/claims-pm">Source Code</a></p>
<div id="section-introduction" class="section level1">
<h1>Introduction</h1>
<div id="section-purpose-and-scope" class="section level2">
<h2>Purpose and Scope</h2>
<p>This report describes a model for predicting incremental paid losses 
on an individual claim basis (“The Model”). The model uses a mixture of 
predictive modeling and simulation techniques to mimic real world claim 
development.</p>
<p>Note that this report is a much more simplified version of the full 
ensemble of model’s used in the full analysis performed and is merely 
meant as a starting point for teaching/learning purposes.</p>
</div>
<div id="section-background" class="section level2">
<h2>Background</h2>
<p>Models, by definition, use simplified assumptions of reality to 
reveal information or predict events based on the underlying data. 
Models which closely mimic the fundamental forces driving the data have 
the best chance of providing valuable insights.</p>
<p>Due to data and computing limitations, actuaries have traditionally 
aggregated loss information by policy, accident, or calendar period to 
project future losses. By aggregating losses, the actuary loses valuable
 claim level information.</p>
<p>The model assumes that individual claims and their claim level 
characteristics are the fundamental drivers of future payments. 
Therefore, In accordance with the philosophy that the best models are 
those which mimic reality most closely, the model uses information on an
 individual claim level, and runs statistically rigorous techniques to 
fit and simulate individual claim development.</p>
</div>
<div id="section-overview" class="section level2">
<h2>Overview</h2>
<p>The model is meant to be a starting point for anyone looking to 
discover new and advanced methods for performing micro-claims analysis 
and machine-learning modelling techniques that provide insights beyond 
the typical aggregated actuarial practices in P&amp;C. Additionally, the
 model is a showcase for the statistical power that the R Programming 
language can provide, specifically for those with apriori statistical 
and mathematical knowledge in applied predictive analytics and 
probability theory.</p>
<p>I decided to use only a few very common predictor variables so the 
model could easily be applied to other data sets. For transparency and 
to aid interested individuals, I provide this report with access to the <code>R</code> code used to fit and run predictions. The code can be viewed by clicking the <code>code</code> boxes on the right side of the report. The <code>R</code> savvy reader can run the <code>R</code> code to reproduce the output, apply the model to other data sets, and expand and improve upon the model.</p>
<p>The model is only applicable to reported claims and their 
corresponding incremental payments. IBNR claim predictions are beyond 
the scope of this model.</p>
</div>
<div id="section-vocabulary" class="section level2">
<h2>Vocabulary</h2>
<p>For consistency and clarity I use the following terms:</p>
<ul>
<li><strong>Response Variable</strong> The value being predicted by the model (claim status and claim incremental payment in this report)</li>
<li><strong>Predictor Variable</strong> The values used to fit the model
 or to predict the response variable (i.e.&nbsp;I use certain claim 
characteristics as predictor variable to model and predict the response 
variable)</li>
</ul>
</div>
<div id="section-data" class="section level2">
<h2>Data</h2>
<p>In the spirit of mimicking the real world, this report communicates 
the model through a working example using real auto-liability data 
supplied mostly from the <a href="https://cran.r-project.org/web/packages/insuranceData/insuranceData.pdf">insuranceData R Package</a> (<a href="https://github.com/cran/insuranceData">GitHub Repo</a>) as well as publicly available data supplied by the <strong>CAS</strong>.</p>
<p>Note that this specific model has been tuned to form predictions related specifically to <em>Bodily Injury</em> claims only, as these claims drive the foundation of the risk behind Auto Liability reserving and rate-making.</p>
<p>That being said, although the results of the model are specific to 
Auto Liability in this instance, the modeling techniques and 
machine-learned tuning procedures can easily be generalized to other 
lines of coverage, areas of business, and risk portfolios.</p>
<ul>
<li>R Code for Data Load and Ingestion:</li>
</ul>
<!-- rnb-text-end -->
<!-- rnb-chunk-begin -->
<!-- rnb-source-begin eyJkYXRhIjpbImxpYnJhcnkoZHBseXIsIHdhcm4uY29uZmxpY3RzID0gRkFMU0UpIiwibGlicmFyeSh0aWR5cikiLCJsaWJyYXJ5KGNhcmV0LCB3YXJuLmNvbmZsaWN0cyA9IEZBTFNFKSIsImxpYnJhcnkobHVicmlkYXRlKSIsImxpYnJhcnkoZ2dwbG90Miwgd2Fybi5jb25mbGljdHMgPSBGQUxTRSkiLCJsaWJyYXJ5KGtuaXRyKSIsImxpYnJhcnkoRGlhZ3JhbW1lUikiLCJsaWJyYXJ5KHNjYWxlcykiLCJsaWJyYXJ5KHNoaW55KSIsInJlcXVpcmUoZTEwNzEpICIsInJlcXVpcmUoYmluZHJjcHApIiwibGlicmFyeShxcykiLCJsaWJyYXJ5KHdlYnNob3QpIiwiIiwiIyB0dXJuIG9mZiBzY2llbnRpZmljIG5vdGF0aW9uIGluIHByaW50aW5nIiwib3B0aW9ucyhzY2lwZW4gPSA5OTkpIiwiIiwiIyBsb2FkIGRhdGEiLCJjbGFpbXMgPC0gcXM6OnFyZWFkKFwiZGF0YS9tb2RlbC1jbGFpbXMucXNcIikiLCIiLCIjIGRldmVsb3BtZW50IGFnZSB0byBwcm9qZWN0IGZyb20iLCIjIGUuZy4gaWYgSSBzZXQgdGhpcyB0byAxOCBJIHdpbGwgdXNlIGluZm9ybWF0aW9uIGF2YWlsYWJsZSIsIiMgYXMgb2YgdGhlIDE4IG1vbnRoIGV2YWx1YXRpb24gdG8gcHJlZGljdCBzdHVmZiBhdCBhZ2UgMzApIiwiZGV2dF9wZXJpb2QgPC0gMzAiLCIiLCIjIHllYXIgdG8gcHJlZGljdCB3aXRoIG1vZGVsIiwiIyBldmFsdWF0aW9ucyBhdCBvciBncmVhdGVyIHRoYW4gdGhpcyB0aW1lIHdpbGwgbm90IGJlIGluY2x1ZGVkIGluIiwiIyB0aGUgbW9kZWwgZml0IiwicHJlZGljdF9ldmFsIDwtIGFzLkRhdGUoXCIyMDEwLTExLTMwXCIpIiwiIiwiIyByZW1vdmUgdW5uZWVkZWQgZGF0YSIsImNsYWltcyA8LSBkcGx5cjo6ZmlsdGVyKGNsYWltcywgXG4gICAgICAgICAgICAgICAgICAgICAgICBldmFsIDw9IHByZWRpY3RfZXZhbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2YWwgPj0gcHJlZGljdF9ldmFsIC0geWVhcnMoNSkpICU+JVxuICAgICAgICAgICAgZHBseXI6OnNlbGVjdChldmFsLCBkZXZ0LCBjbGFpbV9udW1iZXIsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMsIHRvdF9yeCwgdG90X3BkX2luY3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c19hY3QsIHRvdF9wZF9pbmNyX2FjdCkiLCIiLCJkZXZ0X3BlcmlvZHNfbmVlZGVkIDwtIHNlcSg2LCBkZXZ0X3BlcmlvZCArIDEyLCBieSA9IDEyKSIsIiIsIiMgZm9yIHNob3dpbmcgaW4gdHJpYW5nbGUiLCJjbGFpbXNfZGlzcGxheSA8LSBkcGx5cjo6ZmlsdGVyKGNsYWltcywgZGV2dCAlaW4lIGRldnRfcGVyaW9kc19uZWVkZWQpIiwiIiwiIyBvbmx5IG5lZWQgdGhlIGNsYWltcyBhdCB0aGUgc2VsZWN0ZWQgYGRldl9wZXJpb2RgIiwiY2xhaW1zIDwtIGRwbHlyOjpmaWx0ZXIoY2xhaW1zLCBkZXZ0ICVpbiUgZGV2dF9wZXJpb2QpIl19 -->
<div class="sourceCode" id="section-cb1"><div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs btn-secondary btn-sm code-folding-btn pull-right float-right" data-toggle="collapse" data-target="#rcode-643E0F361" aria-expanded="false" aria-controls="rcode-643E0F361"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F361"><pre class="sourceCode r"><code class="sourceCode r"><span id="section-cb1-1"><a href="#section-cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr, <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>)</span>
<span id="section-cb1-2"><a href="#section-cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="section-cb1-3"><a href="#section-cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(caret, <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>)</span>
<span id="section-cb1-4"><a href="#section-cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="section-cb1-5"><a href="#section-cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2, <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>)</span>
<span id="section-cb1-6"><a href="#section-cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="section-cb1-7"><a href="#section-cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DiagrammeR)</span>
<span id="section-cb1-8"><a href="#section-cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="section-cb1-9"><a href="#section-cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(shiny)</span>
<span id="section-cb1-10"><a href="#section-cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(e1071) </span>
<span id="section-cb1-11"><a href="#section-cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(bindrcpp)</span>
<span id="section-cb1-12"><a href="#section-cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(qs)</span>
<span id="section-cb1-13"><a href="#section-cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(webshot)</span>
<span id="section-cb1-14"><a href="#section-cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="section-cb1-15"><a href="#section-cb1-15" aria-hidden="true" tabindex="-1"></a><span class="co"># turn off scientific notation in printing</span></span>
<span id="section-cb1-16"><a href="#section-cb1-16" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">scipen =</span> <span class="dv">999</span>)</span>
<span id="section-cb1-17"><a href="#section-cb1-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="section-cb1-18"><a href="#section-cb1-18" aria-hidden="true" tabindex="-1"></a><span class="co"># load data</span></span>
<span id="section-cb1-19"><a href="#section-cb1-19" aria-hidden="true" tabindex="-1"></a>claims <span class="ot">&lt;-</span> qs<span class="sc">::</span><span class="fu">qread</span>(<span class="st">"data/model-claims.qs"</span>)</span>
<span id="section-cb1-20"><a href="#section-cb1-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="section-cb1-21"><a href="#section-cb1-21" aria-hidden="true" tabindex="-1"></a><span class="co"># development age to project from</span></span>
<span id="section-cb1-22"><a href="#section-cb1-22" aria-hidden="true" tabindex="-1"></a><span class="co"># e.g. if I set this to 18 I will use information available</span></span>
<span id="section-cb1-23"><a href="#section-cb1-23" aria-hidden="true" tabindex="-1"></a><span class="co"># as of the 18 month evaluation to predict stuff at age 30)</span></span>
<span id="section-cb1-24"><a href="#section-cb1-24" aria-hidden="true" tabindex="-1"></a>devt_period <span class="ot">&lt;-</span> <span class="dv">30</span></span>
<span id="section-cb1-25"><a href="#section-cb1-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="section-cb1-26"><a href="#section-cb1-26" aria-hidden="true" tabindex="-1"></a><span class="co"># year to predict with model</span></span>
<span id="section-cb1-27"><a href="#section-cb1-27" aria-hidden="true" tabindex="-1"></a><span class="co"># evaluations at or greater than this time will not be included in</span></span>
<span id="section-cb1-28"><a href="#section-cb1-28" aria-hidden="true" tabindex="-1"></a><span class="co"># the model fit</span></span>
<span id="section-cb1-29"><a href="#section-cb1-29" aria-hidden="true" tabindex="-1"></a>predict_eval <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2010-11-30"</span>)</span>
<span id="section-cb1-30"><a href="#section-cb1-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="section-cb1-31"><a href="#section-cb1-31" aria-hidden="true" tabindex="-1"></a><span class="co"># remove unneeded data</span></span>
<span id="section-cb1-32"><a href="#section-cb1-32" aria-hidden="true" tabindex="-1"></a>claims <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(claims, </span>
<span id="section-cb1-33"><a href="#section-cb1-33" aria-hidden="true" tabindex="-1"></a>                        eval <span class="sc">&lt;=</span> predict_eval,</span>
<span id="section-cb1-34"><a href="#section-cb1-34" aria-hidden="true" tabindex="-1"></a>                        eval <span class="sc">&gt;=</span> predict_eval <span class="sc">-</span> <span class="fu">years</span>(<span class="dv">5</span>)) <span class="sc">%&gt;%</span></span>
<span id="section-cb1-35"><a href="#section-cb1-35" aria-hidden="true" tabindex="-1"></a>            dplyr<span class="sc">::</span><span class="fu">select</span>(eval, devt, claim_number, </span>
<span id="section-cb1-36"><a href="#section-cb1-36" aria-hidden="true" tabindex="-1"></a>                          status, tot_rx, tot_pd_incr,</span>
<span id="section-cb1-37"><a href="#section-cb1-37" aria-hidden="true" tabindex="-1"></a>                          status_act, tot_pd_incr_act)</span>
<span id="section-cb1-38"><a href="#section-cb1-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="section-cb1-39"><a href="#section-cb1-39" aria-hidden="true" tabindex="-1"></a>devt_periods_needed <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">6</span>, devt_period <span class="sc">+</span> <span class="dv">12</span>, <span class="at">by =</span> <span class="dv">12</span>)</span>
<span id="section-cb1-40"><a href="#section-cb1-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="section-cb1-41"><a href="#section-cb1-41" aria-hidden="true" tabindex="-1"></a><span class="co"># for showing in triangle</span></span>
<span id="section-cb1-42"><a href="#section-cb1-42" aria-hidden="true" tabindex="-1"></a>claims_display <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(claims, devt <span class="sc">%in%</span> devt_periods_needed)</span>
<span id="section-cb1-43"><a href="#section-cb1-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="section-cb1-44"><a href="#section-cb1-44" aria-hidden="true" tabindex="-1"></a><span class="co"># only need the claims at the selected `dev_period`</span></span>
<span id="section-cb1-45"><a href="#section-cb1-45" aria-hidden="true" tabindex="-1"></a>claims <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(claims, devt <span class="sc">%in%</span> devt_period)</span></code></pre></div></div>
<!-- rnb-source-end -->
<!-- rnb-chunk-end -->
<!-- rnb-text-begin -->
<p>I am using data from fiscal years 2003 to 2011.</p>
<p>Fiscal years begin at 6/1 of the year prior to the fiscal year and 
end at 5/31 of the fiscal year (i.e.&nbsp;fiscal year 2003 includes 
claims which occurred between 6/1/2002 and 5/31/2003).</p>
<p>The claims are evaluated at 11/30 of each year from 2002 to 2010.</p>
<p>I created a large data set containing all the data used in fitting the model and making predictions from the model.</p>
<p>The original data and the script used to prepare the large data set used in this report is located in the <code>data/</code> directory and details can be viewed in this report’s Appendix.</p>
</div>
</div>
<div id="section-the-model" class="section level1">
<h1>The Model</h1>
<p>The model uses several advanced statistical techniques. For 
compactness and because I lack the expertise to explain everything in 
detail, a comprehensive explanation of these techniques is beyond the 
scope of this analysis.</p>
<p>Where-ever possible I have included links to additional resources for
 diving into the statistics behind the model. The statistics will be 
only very briefly touched upon as each technique is used in the model 
fit.</p>
<div id="section-train-and-test-data" class="section level3">
<h3>Train and Test Data</h3>
<p>The first step in fitting the model is to feed training data into the model.</p>
<p>I am using all data from fiscal years prior to 2011 from development time 30 months to 42 months to fit the model.</p>
<p>Later I will pass the test data (i.e.&nbsp;claims from fiscal year 
2011 at 30 months) to predict the status of each of these claims at 42 
months and the incremental payment per claim from 30 to 42 months.</p>
</div>
<div id="section-model-overview-diagram" class="section level2">
<h2>Model Overview Diagram</h2>
<p>The following diagram illustrates how the model is fit:</p>
<!-- rnb-text-end -->
<!-- rnb-chunk-begin -->
<!-- rnb-source-begin eyJkYXRhIjoibWVybWFpZChcIlxuICBncmFwaCBURFxuICBBKENsYWltIFRyYWluIERhdGEpLS0+QntGaXQgQ2xvc3VyZSBNb2RlbH1cbiAgQShDbGFpbSBUcmFpbiBEYXRhKS0tPkNbUmVtb3ZlIENsb3NlZC1DbG9zZWRdXG4gIEEoQ2xhaW0gVHJhaW4gRGF0YSktLT5EW1JlbW92ZSBaZXJvIFBhaWRdXG4gIEMtLT5Fe0ZpdCBaZXJvIE1vZGVsfVxuICBELS0+RntGaXQgUGF5bWVudCBNb2RlbH1cblwiKSJ9 -->
<div class="sourceCode" id="section-cb2"><div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs btn-secondary btn-sm code-folding-btn pull-right float-right" data-toggle="collapse" data-target="#rcode-643E0F362" aria-expanded="false" aria-controls="rcode-643E0F362"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F362"><pre class="sourceCode r"><code class="sourceCode r"><span id="section-cb2-1"><a href="#section-cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mermaid</span>(<span class="st">"</span></span>
<span id="section-cb2-2"><a href="#section-cb2-2" aria-hidden="true" tabindex="-1"></a><span class="st">  graph TD</span></span>
<span id="section-cb2-3"><a href="#section-cb2-3" aria-hidden="true" tabindex="-1"></a><span class="st">  A(Claim Train Data)--&gt;B{Fit Closure Model}</span></span>
<span id="section-cb2-4"><a href="#section-cb2-4" aria-hidden="true" tabindex="-1"></a><span class="st">  A(Claim Train Data)--&gt;C[Remove Closed-Closed]</span></span>
<span id="section-cb2-5"><a href="#section-cb2-5" aria-hidden="true" tabindex="-1"></a><span class="st">  A(Claim Train Data)--&gt;D[Remove Zero Paid]</span></span>
<span id="section-cb2-6"><a href="#section-cb2-6" aria-hidden="true" tabindex="-1"></a><span class="st">  C--&gt;E{Fit Zero Model}</span></span>
<span id="section-cb2-7"><a href="#section-cb2-7" aria-hidden="true" tabindex="-1"></a><span class="st">  D--&gt;F{Fit Payment Model}</span></span>
<span id="section-cb2-8"><a href="#section-cb2-8" aria-hidden="true" tabindex="-1"></a><span class="st">"</span>)</span></code></pre></div></div>
<!-- rnb-source-end -->
<!-- rnb-htmlwidget-begin W3sibmFtZSI6Imh0bWx3aWRnZXRzIiwidmVyc2lvbiI6IjEuNS40Iiwic3JjIjp7ImZpbGUiOiJ3d3cifSwibWV0YSI6W10sInNjcmlwdCI6Imh0bWx3aWRnZXRzLmpzIiwic3R5bGVzaGVldCI6W10sImhlYWQiOltdLCJhdHRhY2htZW50IjpbXSwicGFja2FnZSI6Imh0bWx3aWRnZXRzIiwiYWxsX2ZpbGVzIjp0cnVlfSx7Im5hbWUiOiJkMyIsInZlcnNpb24iOiIzLjMuOCIsInNyYyI6eyJmaWxlIjoiaHRtbHdpZGdldHMvbGliL2QzIn0sIm1ldGEiOltdLCJzY3JpcHQiOiJkMy5taW4uanMiLCJzdHlsZXNoZWV0IjpbXSwiaGVhZCI6W10sImF0dGFjaG1lbnQiOltdLCJwYWNrYWdlIjoiRGlhZ3JhbW1lUiIsImFsbF9maWxlcyI6dHJ1ZX0seyJuYW1lIjoiZGFncmUiLCJ2ZXJzaW9uIjoiMC40LjAiLCJzcmMiOnsiZmlsZSI6Imh0bWx3aWRnZXRzL2xpYi9kYWdyZS1kMyJ9LCJtZXRhIjpbXSwic2NyaXB0IjoiZGFncmUtZDMubWluLmpzIiwic3R5bGVzaGVldCI6W10sImhlYWQiOltdLCJhdHRhY2htZW50IjpbXSwicGFja2FnZSI6IkRpYWdyYW1tZVIiLCJhbGxfZmlsZXMiOnRydWV9LHsibmFtZSI6Im1lcm1haWQiLCJ2ZXJzaW9uIjoiMC4zLjAiLCJzcmMiOnsiZmlsZSI6Imh0bWx3aWRnZXRzL2xpYi9tZXJtYWlkIn0sIm1ldGEiOltdLCJzY3JpcHQiOiJkaXN0L21lcm1haWQuc2xpbS5taW4uanMiLCJzdHlsZXNoZWV0IjoiZGlzdC9tZXJtYWlkLmNzcyIsImhlYWQiOltdLCJhdHRhY2htZW50IjpbXSwicGFja2FnZSI6IkRpYWdyYW1tZVIiLCJhbGxfZmlsZXMiOnRydWV9LHsibmFtZSI6IkRpYWdyYW1tZVItc3R5bGVzIiwidmVyc2lvbiI6IjAuMiIsInNyYyI6eyJmaWxlIjoiaHRtbHdpZGdldHMvbGliL3N0eWxlcyJ9LCJtZXRhIjpbXSwic2NyaXB0IjpbXSwic3R5bGVzaGVldCI6InN0eWxlcy5jc3MiLCJoZWFkIjpbXSwiYXR0YWNobWVudCI6W10sInBhY2thZ2UiOiJEaWFncmFtbWVSIiwiYWxsX2ZpbGVzIjp0cnVlfSx7Im5hbWUiOiJjaHJvbWF0b2dyYXBoeSIsInZlcnNpb24iOiIwLjEiLCJzcmMiOnsiZmlsZSI6Imh0bWx3aWRnZXRzL2xpYi9jaHJvbWF0b2dyYXBoeSJ9LCJtZXRhIjpbXSwic2NyaXB0IjoiY2hyb21hdG9ncmFwaHkuanMiLCJzdHlsZXNoZWV0IjpbXSwiaGVhZCI6W10sImF0dGFjaG1lbnQiOltdLCJwYWNrYWdlIjoiRGlhZ3JhbW1lUiIsImFsbF9maWxlcyI6dHJ1ZX0seyJuYW1lIjoiRGlhZ3JhbW1lUi1iaW5kaW5nIiwidmVyc2lvbiI6IjEuMC42LjEiLCJzcmMiOnsiZmlsZSI6Imh0bWx3aWRnZXRzIn0sIm1ldGEiOltdLCJzY3JpcHQiOiJEaWFncmFtbWVSLmpzIiwic3R5bGVzaGVldCI6W10sImhlYWQiOltdLCJhdHRhY2htZW50IjpbXSwicGFja2FnZSI6IkRpYWdyYW1tZVIiLCJhbGxfZmlsZXMiOmZhbHNlfV0=-->
<div id="htmlwidget-5d945c85be82b17f4888" style="width:672px;height:480px;" class="DiagrammeR html-widget html-widget-static-bound mermaid" data-processed="true"><svg id="mermaidChart0" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 598 462.8000030517578" style="max-width: 598px; width: 100%; height: 100%;"><style type="text/css" title="mermaid-svg-internal-css">/*  */
#mermaidChart0 .node&gt;rect { ; }
#mermaidChart0 .node text  { fill:#000; stroke:none; font-weight:300; font-family:"Helvetica Neue",Helvetica,Arial,sans-serf; font-size:14px; }
#mermaidChart0 .edgeLabel text  { fill:#000; stroke:none; font-weight:300; font-family:"Helvetica Neue",Helvetica,Arial,sans-serf; font-size:14px; }
#mermaidChart0 .cluster rect  { rx:4px; fill: rgb(255, 255, 222); rx: 4px; stroke: rgb(170, 170, 51); stroke-width: 1px; }
* { box-sizing: border-box;}
.label { display: inline; padding: 0.2em 0.6em 0.3em; font-size: 75%; font-weight: bold; line-height: 1; color: rgb(255, 255, 255); text-align: center; white-space: nowrap; vertical-align: baseline; border-radius: 0.25em;}
.label { font-family: "Raleway", "Helvetica Neue", Helvetica, Arial, sans-serif; font-weight: normal;}
.mermaid .label { color: rgb(51, 51, 51); font-weight: 400;}
.mermaid .node rect, .mermaid .node circle, .mermaid .node ellipse, .mermaid .node polygon { fill: rgb(236, 236, 255); stroke: rgb(204, 204, 255); stroke-width: 1px;}
.mermaid .edgePath .path { stroke: rgb(51, 51, 51);}
.mermaid .edgeLabel { background-color: rgb(232, 232, 232);}
.DiagrammeR g .label { font-family: Helvetica; font-size: 14px; color: rgb(51, 51, 51);}
/*  */
</style><g><g class="output"><g class="clusters"></g><g class="edgePaths"><g class="edgePath" style="opacity: 1;"><path class="path" d="M224,50.092269326683294L86,79L86.5,104.5" marker-end="url(#arrowhead15)" style="fill:none"></path><defs><marker id="arrowhead15" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M286.5,54L286.5,79L286.5,153" marker-end="url(#arrowhead16)" style="fill:none"></path><defs><marker id="arrowhead16" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M349,49.93103448275862L489.5,79L489.5,153" marker-end="url(#arrowhead17)" style="fill:none"></path><defs><marker id="arrowhead17" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M286.5,187L286.5,261L287,296.9000015258789" marker-end="url(#arrowhead18)" style="fill:none"></path><defs><marker id="arrowhead18" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M489.5,187L489.5,261L490,286.500001525879" marker-end="url(#arrowhead19)" style="fill:none"></path><defs><marker id="arrowhead19" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g></g><g class="edgeLabels"><g class="edgeLabel" style="opacity: 1;" transform=""><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform=""><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform=""><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform=""><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform=""><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g class="node" style="opacity: 1;" id="A" transform="translate(286.5,37)"><rect rx="5" ry="5" x="-62.5" y="-17" width="125" height="34"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-52.5,-7)"><foreignObject width="105" height="14"><div style="display: inline-block; white-space: nowrap;">Claim Train Data</div></foreignObject></g></g></g><g class="node" style="opacity: 1;" id="B" transform="translate(86,170)"><polygon points="66,0 132,-66 66,-132 0,-66" rx="5" ry="5" transform="translate(-66,66)"></polygon><g class="label" transform="translate(0,0)"><g transform="translate(-55.5,-7)"><foreignObject width="111" height="14"><div style="display: inline-block; white-space: nowrap;">Fit Closure Model</div></foreignObject></g></g></g><g class="node" style="opacity: 1;" id="C" transform="translate(286.5,170)"><rect rx="0" ry="0" x="-84.5" y="-17" width="169" height="34"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-74.5,-7)"><foreignObject width="149" height="14"><div style="display: inline-block; white-space: nowrap;">Remove Closed-Closed</div></foreignObject></g></g></g><g class="node" style="opacity: 1;" id="D" transform="translate(489.5,170)"><rect rx="0" ry="0" x="-68.5" y="-17" width="137" height="34"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-58.5,-7)"><foreignObject width="117" height="14"><div style="display: inline-block; white-space: nowrap;">Remove Zero Paid</div></foreignObject></g></g></g><g class="node" style="opacity: 1;" id="E" transform="translate(286.5,354.4000015258789)"><polygon points="58,0 116,-58 58,-116 0,-58" rx="5" ry="5" transform="translate(-58,58)"></polygon><g class="label" transform="translate(0,0)"><g transform="translate(-45.5,-7)"><foreignObject width="91" height="14"><div style="display: inline-block; white-space: nowrap;">Fit Zero Model</div></foreignObject></g></g></g><g class="node" style="opacity: 1;" id="F" transform="translate(489.5,354.4000015258789)"><polygon points="68.4,0 136.8,-68.4 68.4,-136.8 0,-68.4" rx="5" ry="5" transform="translate(-68.4,68.4)"></polygon><g class="label" transform="translate(0,0)"><g transform="translate(-58.5,-7)"><foreignObject width="117" height="14"><div style="display: inline-block; white-space: nowrap;">Fit Payment Model</div></foreignObject></g></g></g></g></g></g></svg></div>
<script type="application/json" data-for="htmlwidget-5d945c85be82b17f4888">{"x":{"diagram":"\n  graph TD\n  A(Claim Train Data)-->B{Fit Closure Model}\n  A(Claim Train Data)-->C[Remove Closed-Closed]\n  A(Claim Train Data)-->D[Remove Zero Paid]\n  C-->E{Fit Zero Model}\n  D-->F{Fit Payment Model}\n"},"evals":[],"jsHooks":[]}</script>
<!-- rnb-htmlwidget-end -->
<!-- rnb-chunk-end -->
<!-- rnb-text-begin -->
<p>After fitting the models (pictured as a rhombus in the above diagram)
 with the claims training data I can use the three models to predict a 
probability for status and zero payment or a dollar value for 
incremental payments on the test data.</p>
<p>The claims test data flows through the following diagram to arrive at the final output:</p>
<!-- rnb-text-end -->
<!-- rnb-chunk-begin -->
<!-- rnb-htmlwidget-begin W3sibmFtZSI6Imh0bWx3aWRnZXRzIiwidmVyc2lvbiI6IjEuNS40Iiwic3JjIjp7ImZpbGUiOiJ3d3cifSwibWV0YSI6W10sInNjcmlwdCI6Imh0bWx3aWRnZXRzLmpzIiwic3R5bGVzaGVldCI6W10sImhlYWQiOltdLCJhdHRhY2htZW50IjpbXSwicGFja2FnZSI6Imh0bWx3aWRnZXRzIiwiYWxsX2ZpbGVzIjp0cnVlfSx7Im5hbWUiOiJkMyIsInZlcnNpb24iOiIzLjMuOCIsInNyYyI6eyJmaWxlIjoiaHRtbHdpZGdldHMvbGliL2QzIn0sIm1ldGEiOltdLCJzY3JpcHQiOiJkMy5taW4uanMiLCJzdHlsZXNoZWV0IjpbXSwiaGVhZCI6W10sImF0dGFjaG1lbnQiOltdLCJwYWNrYWdlIjoiRGlhZ3JhbW1lUiIsImFsbF9maWxlcyI6dHJ1ZX0seyJuYW1lIjoiZGFncmUiLCJ2ZXJzaW9uIjoiMC40LjAiLCJzcmMiOnsiZmlsZSI6Imh0bWx3aWRnZXRzL2xpYi9kYWdyZS1kMyJ9LCJtZXRhIjpbXSwic2NyaXB0IjoiZGFncmUtZDMubWluLmpzIiwic3R5bGVzaGVldCI6W10sImhlYWQiOltdLCJhdHRhY2htZW50IjpbXSwicGFja2FnZSI6IkRpYWdyYW1tZVIiLCJhbGxfZmlsZXMiOnRydWV9LHsibmFtZSI6Im1lcm1haWQiLCJ2ZXJzaW9uIjoiMC4zLjAiLCJzcmMiOnsiZmlsZSI6Imh0bWx3aWRnZXRzL2xpYi9tZXJtYWlkIn0sIm1ldGEiOltdLCJzY3JpcHQiOiJkaXN0L21lcm1haWQuc2xpbS5taW4uanMiLCJzdHlsZXNoZWV0IjoiZGlzdC9tZXJtYWlkLmNzcyIsImhlYWQiOltdLCJhdHRhY2htZW50IjpbXSwicGFja2FnZSI6IkRpYWdyYW1tZVIiLCJhbGxfZmlsZXMiOnRydWV9LHsibmFtZSI6IkRpYWdyYW1tZVItc3R5bGVzIiwidmVyc2lvbiI6IjAuMiIsInNyYyI6eyJmaWxlIjoiaHRtbHdpZGdldHMvbGliL3N0eWxlcyJ9LCJtZXRhIjpbXSwic2NyaXB0IjpbXSwic3R5bGVzaGVldCI6InN0eWxlcy5jc3MiLCJoZWFkIjpbXSwiYXR0YWNobWVudCI6W10sInBhY2thZ2UiOiJEaWFncmFtbWVSIiwiYWxsX2ZpbGVzIjp0cnVlfSx7Im5hbWUiOiJjaHJvbWF0b2dyYXBoeSIsInZlcnNpb24iOiIwLjEiLCJzcmMiOnsiZmlsZSI6Imh0bWx3aWRnZXRzL2xpYi9jaHJvbWF0b2dyYXBoeSJ9LCJtZXRhIjpbXSwic2NyaXB0IjoiY2hyb21hdG9ncmFwaHkuanMiLCJzdHlsZXNoZWV0IjpbXSwiaGVhZCI6W10sImF0dGFjaG1lbnQiOltdLCJwYWNrYWdlIjoiRGlhZ3JhbW1lUiIsImFsbF9maWxlcyI6dHJ1ZX0seyJuYW1lIjoiRGlhZ3JhbW1lUi1iaW5kaW5nIiwidmVyc2lvbiI6IjEuMC42LjEiLCJzcmMiOnsiZmlsZSI6Imh0bWx3aWRnZXRzIn0sIm1ldGEiOltdLCJzY3JpcHQiOiJEaWFncmFtbWVSLmpzIiwic3R5bGVzaGVldCI6W10sImhlYWQiOltdLCJhdHRhY2htZW50IjpbXSwicGFja2FnZSI6IkRpYWdyYW1tZVIiLCJhbGxfZmlsZXMiOmZhbHNlfV0=-->
<div id="htmlwidget-e0148b38a6ba7aa58095" style="width:672px;height:700px;" class="DiagrammeR html-widget html-widget-static-bound mermaid" data-processed="true"><svg id="mermaidChart1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 883 1027.2000122070312" style="max-width: 883px; width: 100%; height: 100%;"><style type="text/css" title="mermaid-svg-internal-css">/*  */
#mermaidChart1 .node&gt;rect { ; }
#mermaidChart1 .node text  { fill:#000; stroke:none; font-weight:300; font-family:"Helvetica Neue",Helvetica,Arial,sans-serf; font-size:14px; }
#mermaidChart1 .edgeLabel text  { fill:#000; stroke:none; font-weight:300; font-family:"Helvetica Neue",Helvetica,Arial,sans-serf; font-size:14px; }
#mermaidChart1 .cluster rect  { rx:4px; fill: rgb(255, 255, 222); rx: 4px; stroke: rgb(170, 170, 51); stroke-width: 1px; }
* { box-sizing: border-box;}
.label { display: inline; padding: 0.2em 0.6em 0.3em; font-size: 75%; font-weight: bold; line-height: 1; color: rgb(255, 255, 255); text-align: center; white-space: nowrap; vertical-align: baseline; border-radius: 0.25em;}
.label { font-family: "Raleway", "Helvetica Neue", Helvetica, Arial, sans-serif; font-weight: normal;}
.mermaid .label { color: rgb(51, 51, 51); font-weight: 400;}
.mermaid .node rect, .mermaid .node circle, .mermaid .node ellipse, .mermaid .node polygon { fill: rgb(236, 236, 255); stroke: rgb(204, 204, 255); stroke-width: 1px;}
.mermaid .edgePath .path { stroke: rgb(51, 51, 51);}
.mermaid .edgeLabel { background-color: rgb(232, 232, 232);}
.DiagrammeR g .label { font-family: Helvetica; font-size: 14px; color: rgb(51, 51, 51);}
/*  */
</style><g><g class="output"><g class="clusters"></g><g class="edgePaths"><g class="edgePath" style="opacity: 1;"><path class="path" d="M442.75,54L442.75,79L443.25000000000006,104.50000152587893" marker-end="url(#arrowhead60)" style="fill:none"></path><defs><marker id="arrowhead60" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M378.4096229301447,220.45962445602362L150,309.8000030517578L150,351.8000030517578L150,393.8000030517578L150,501.2000045776367L150,608.6000061035156L150,633.6000061035156" marker-end="url(#arrowhead61)" style="fill:none"></path><defs><marker id="arrowhead61" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M494.6366845838555,233.91331389026564L594.75,309.8000030517578L594.75,334.8000030517578" marker-end="url(#arrowhead62)" style="fill:none"></path><defs><marker id="arrowhead62" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M594.75,368.8000030517578L594.75,393.8000030517578L595.25,419.3000045776363" marker-end="url(#arrowhead63)" style="fill:none"></path><defs><marker id="arrowhead63" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M548.5129460862988,537.3629506639356L454,608.6000061035156L454,633.6000061035156" marker-end="url(#arrowhead64)" style="fill:none"></path><defs><marker id="arrowhead64" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M641.9870521827522,537.3629493431263L735.5,608.6000061035156L735.5,633.6000061035156" marker-end="url(#arrowhead65)" style="fill:none"></path><defs><marker id="arrowhead65" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M735.5,667.6000061035156L735.5,692.6000061035156L736,718.1000091552738" marker-end="url(#arrowhead66)" style="fill:none"></path><defs><marker id="arrowhead66" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M736,903.7000030517585L735.5,928.2000122070312L561.2440476190476,953.2000122070312" marker-end="url(#arrowhead67)" style="fill:none"></path><defs><marker id="arrowhead67" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M150,667.6000061035156L150,692.6000061035156L280.06451669729864,793.4000091552734" marker-end="url(#arrowhead68)" style="fill:none"></path><defs><marker id="arrowhead68" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M454,667.6000061035156L454,692.6000061035156L323.93548330270136,793.4000091552734" marker-end="url(#arrowhead69)" style="fill:none"></path><defs><marker id="arrowhead69" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g><g class="edgePath" style="opacity: 1;"><path class="path" d="M302,827.4000091552734L302,928.2000122070312L385.7797619047619,953.2000122070312" marker-end="url(#arrowhead70)" style="fill:none"></path><defs><marker id="arrowhead70" viewBox="0 0 10 10" refX="9" refY="5" markerUnits="strokeWidth" markerWidth="8" markerHeight="6" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z" class="arrowheadPath" style="stroke-width: 1px; stroke-dasharray: 1px, 0px;"></path></marker></defs></g></g><g class="edgeLabels"><g class="edgeLabel" style="opacity: 1;" transform=""><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform=""><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform=""><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform=""><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform=""><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform=""><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform=""><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform=""><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform=""><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform=""><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel" style="opacity: 1;" transform=""><g transform="translate(0,0)" class="label"><foreignObject width="0" height="0"><div style="display: inline-block; white-space: nowrap;"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g class="node" style="opacity: 1;" id="A" transform="translate(442.75,37)"><rect rx="5" ry="5" x="-59.5" y="-17" width="119" height="34"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-49.5,-7)"><foreignObject width="99" height="14"><div style="display: inline-block; white-space: nowrap;">Claim Test Data</div></foreignObject></g></g></g><g class="node" style="opacity: 1;" id="B" transform="translate(442.75,194.4000015258789)"><polygon points="90.4,0 180.8,-90.4 90.4,-180.8 0,-90.4" rx="5" ry="5" transform="translate(-90.4,90.4)"></polygon><g class="label" transform="translate(0,0)"><g transform="translate(-86,-7)"><foreignObject width="172" height="14"><div style="display: inline-block; white-space: nowrap;">Closure Model + Simulation</div></foreignObject></g></g></g><g class="node" style="opacity: 1;" id="C" transform="translate(150,650.6000061035156)"><rect rx="5" ry="5" x="-130" y="-17" width="260" height="34"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-120,-7)"><foreignObject width="240" height="14"><div style="display: inline-block; white-space: nowrap;">Claims Simulated to be Closed Closed</div></foreignObject></g></g></g><g class="node" style="opacity: 1;" id="D" transform="translate(594.75,351.8000030517578)"><rect rx="5" ry="5" x="-60.5" y="-17" width="121" height="34"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-50.5,-7)"><foreignObject width="101" height="14"><div style="display: inline-block; white-space: nowrap;">All Other Claims</div></foreignObject></g></g></g><g class="node" style="opacity: 1;" id="E" transform="translate(594.75,501.2000045776367)"><polygon points="82.4,0 164.8,-82.4 82.4,-164.8 0,-82.4" rx="5" ry="5" transform="translate(-82.4,82.4)"></polygon><g class="label" transform="translate(0,0)"><g transform="translate(-76,-7)"><foreignObject width="152" height="14"><div style="display: inline-block; white-space: nowrap;">Zero Model + Simulation</div></foreignObject></g></g></g><g class="node" style="opacity: 1;" id="F" transform="translate(454,650.6000061035156)"><rect rx="5" ry="5" x="-124" y="-17" width="248" height="34"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-114,-7)"><foreignObject width="228" height="14"><div style="display: inline-block; white-space: nowrap;">Claims Simulated with Zero Payment</div></foreignObject></g></g></g><g class="node" style="opacity: 1;" id="G" transform="translate(735.5,650.6000061035156)"><rect rx="5" ry="5" x="-107.5" y="-17" width="215" height="34"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-97.5,-7)"><foreignObject width="195" height="14"><div style="display: inline-block; white-space: nowrap;">Claims Simulated with Payment</div></foreignObject></g></g></g><g class="node" style="opacity: 1;" id="H" transform="translate(735.5,810.4000091552734)"><polygon points="92.80000000000001,0 185.60000000000002,-92.80000000000001 92.80000000000001,-185.60000000000002 0,-92.80000000000001" rx="5" ry="5" transform="translate(-92.80000000000001,92.80000000000001)"></polygon><g class="label" transform="translate(0,0)"><g transform="translate(-89,-7)"><foreignObject width="178" height="14"><div style="display: inline-block; white-space: nowrap;">Payment Model + Simulation</div></foreignObject></g></g></g><g class="node" style="opacity: 1;" id="J" transform="translate(442.75,970.2000122070312)"><rect rx="5" ry="5" x="-169" y="-17" width="338" height="34"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-159,-7)"><foreignObject width="318" height="14"><div style="display: inline-block; white-space: nowrap;">Output: Claims with Simulated Status and Payment</div></foreignObject></g></g></g><g class="node" style="opacity: 1;" id="I" transform="translate(302,810.4000091552734)"><rect rx="0" ry="0" x="-106.5" y="-17" width="213" height="34"></rect><g class="label" transform="translate(0,0)"><g transform="translate(-96.5,-7)"><foreignObject width="193" height="14"><div style="display: inline-block; white-space: nowrap;">Simulated Payment set to Zero</div></foreignObject></g></g></g></g></g></g></svg></div>
<script type="application/json" data-for="htmlwidget-e0148b38a6ba7aa58095">{"x":{"diagram":"\n  graph TD\n  A(Claim Test Data)-->B{Closure Model + Simulation}\n  B-->C(Claims Simulated to be Closed Closed)\n  B-->D(All Other Claims)\n  D-->E{Zero Model + Simulation}\n  E-->F(Claims Simulated with Zero Payment)\n  E-->G(Claims Simulated with Payment)\n  G-->H{Payment Model + Simulation}\n  H-->J(Output: Claims with Simulated Status and Payment)\n  C-->I[Simulated Payment set to Zero]\n  F-->I[Simulated Payment set to Zero]\n  I-->J\n"},"evals":[],"jsHooks":[]}</script>
<!-- rnb-htmlwidget-end -->
<!-- rnb-chunk-end -->
<!-- rnb-text-begin -->
<p>At each model (pictured as a rhombus in the above diagram) the claim 
in the test data is given a predicted value based on the model. I then 
run a simulation based on this predicted value to model real world 
variability.</p>
<p>At each step the simulated claims are passed to the next model based 
on the results of the simulation in the previous model’s simulated 
results/probabilities.</p>
</div>
<div id="section-claim-closure-model" class="section level2">
<h2>Claim Closure Model</h2>
<div id="section-assumptions" class="section level3">
<h3>Assumptions</h3>
<p>To predict whether a claim will close within a given period of time, I use a logistic regression with <em>center, scale, and <a href="https://www.stat.umn.edu/arc/yjpower.pdf">Yeo-Johnson</a> transformations</em> applied to all continuous predictor variables.</p>
<p>I am modeling the following variables:</p>
<p><strong>Response Variable</strong></p>
<ul>
<li><em>status_act</em> Actual claim status at 42 months.</li>
</ul>
<p><strong>Predictor Variables</strong></p>
<ul>
<li><em>status</em> Claim status at 30 months (“C” for Closed and “O” for open).</li>
<li><em>tot_rx</em> Total case reserve dollar value at 30.</li>
<li><em>tot_pd_incr</em> Total incremental paid loss dollar value between 18 months and 30 months.</li>
</ul>
</div>
<div id="section-data-preparation" class="section level3">
<h3>Data Preparation</h3>
<!-- rnb-text-end -->
<!-- rnb-chunk-begin -->
<!-- rnb-source-begin eyJkYXRhIjpbIiMgcmVtb3ZlIGRhdGEgdGhlIHNhbWUgdmFsdWF0aW9uIG9yIG5ld2VyIHRoYW4gdGhlIHByZWRpY3Rpb24gZXZhbCIsIiMgT25seSBjbGFpbXMgZnJvbSB2YWx1YXRpb25zIGJlZm9yZSB0aGUgdmFsdWF0aW9uIEkgYW0gcHJlZGljdGluZyB3aWxsIGJlIHVzZWQiLCIjIHRvIGZpdCB0aGUgbW9kZWwiLCJtb2RlbF9kYXRhIDwtIGRwbHlyOjpmaWx0ZXIoY2xhaW1zLCBldmFsIDwgcHJlZGljdF9ldmFsKSJdfQ== -->
<div class="sourceCode" id="section-cb3"><div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs btn-secondary btn-sm code-folding-btn pull-right float-right" data-toggle="collapse" data-target="#rcode-643E0F363" aria-expanded="false" aria-controls="rcode-643E0F363"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F363"><pre class="sourceCode r"><code class="sourceCode r"><span id="section-cb3-1"><a href="#section-cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remove data the same valuation or newer than the prediction eval</span></span>
<span id="section-cb3-2"><a href="#section-cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Only claims from valuations before the valuation I am predicting will be used</span></span>
<span id="section-cb3-3"><a href="#section-cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"># to fit the model</span></span>
<span id="section-cb3-4"><a href="#section-cb3-4" aria-hidden="true" tabindex="-1"></a>model_data <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(claims, eval <span class="sc">&lt;</span> predict_eval)</span></code></pre></div></div>
<!-- rnb-source-end -->
<!-- rnb-chunk-end -->
<!-- rnb-text-begin -->
</div>
<div id="section-model-fit" class="section level3">
<h3>Model Fit</h3>
<p>The model fit uses <strong>10-fold cross validation</strong> to optimize coefficient estimation and a <em>stepwise Akaiki Information Critereon (AIC)</em> algorithm for feature selection:</p>
<!-- rnb-text-end -->
<!-- rnb-chunk-begin -->
<!-- rnb-source-begin eyJkYXRhIjoiY21fbW9kZWwgPC0gY2FyZXQ6OnRyYWluKHN0YXR1c19hY3QgfiBzdGF0dXMgKyB0b3RfcnggKyB0b3RfcGRfaW5jciwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IG1vZGVsX2RhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kID0gXCJnbG1TdGVwQUlDXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2UgPSBGQUxTRSxcbiAgICAgICAgICAgICAgICAgICAgICAgICBwcmVQcm9jZXNzID0gYyhcImNlbnRlclwiLCBcInNjYWxlXCIsIFwiWWVvSm9obnNvblwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICB0ckNvbnRyb2wgPSB0cmFpbkNvbnRyb2wobWV0aG9kID0gXCJyZXBlYXRlZGN2XCIsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBlYXRzID0gMikpIn0= -->
<div class="sourceCode" id="section-cb4"><div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs btn-secondary btn-sm code-folding-btn pull-right float-right" data-toggle="collapse" data-target="#rcode-643E0F364" aria-expanded="false" aria-controls="rcode-643E0F364"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F364"><pre class="sourceCode r"><code class="sourceCode r"><span id="section-cb4-1"><a href="#section-cb4-1" aria-hidden="true" tabindex="-1"></a>cm_model <span class="ot">&lt;-</span> caret<span class="sc">::</span><span class="fu">train</span>(status_act <span class="sc">~</span> status <span class="sc">+</span> tot_rx <span class="sc">+</span> tot_pd_incr, </span>
<span id="section-cb4-2"><a href="#section-cb4-2" aria-hidden="true" tabindex="-1"></a>                         <span class="at">data =</span> model_data,</span>
<span id="section-cb4-3"><a href="#section-cb4-3" aria-hidden="true" tabindex="-1"></a>                         <span class="at">method =</span> <span class="st">"glmStepAIC"</span>,</span>
<span id="section-cb4-4"><a href="#section-cb4-4" aria-hidden="true" tabindex="-1"></a>                         <span class="at">trace =</span> <span class="cn">FALSE</span>,</span>
<span id="section-cb4-5"><a href="#section-cb4-5" aria-hidden="true" tabindex="-1"></a>                         <span class="at">preProcess =</span> <span class="fu">c</span>(<span class="st">"center"</span>, <span class="st">"scale"</span>, <span class="st">"YeoJohnson"</span>),</span>
<span id="section-cb4-6"><a href="#section-cb4-6" aria-hidden="true" tabindex="-1"></a>                         <span class="at">trControl =</span> <span class="fu">trainControl</span>(<span class="at">method =</span> <span class="st">"repeatedcv"</span>, </span>
<span id="section-cb4-7"><a href="#section-cb4-7" aria-hidden="true" tabindex="-1"></a>                                                  <span class="at">repeats =</span> <span class="dv">2</span>))</span></code></pre></div></div>
<!-- rnb-source-end -->
<!-- rnb-chunk-end -->
<!-- rnb-text-begin -->
<!-- rnb-text-end -->
<!-- rnb-chunk-begin -->
<!-- rnb-source-begin eyJkYXRhIjpbImNtX3N1bW1hcnkgPC0gY21fbW9kZWwkcmVzdWx0c1ssIC0xXSIsIiIsImthYmxlKGNtX3N1bW1hcnksXG4gICAgICBkaWdpdHMgPSA1LFxuICAgICAgcm93Lm5hbWVzID0gRkFMU0UpIl19 -->
<div class="sourceCode" id="section-cb5"><div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs btn-secondary btn-sm code-folding-btn pull-right float-right" data-toggle="collapse" data-target="#rcode-643E0F365" aria-expanded="false" aria-controls="rcode-643E0F365"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F365"><pre class="sourceCode r"><code class="sourceCode r"><span id="section-cb5-1"><a href="#section-cb5-1" aria-hidden="true" tabindex="-1"></a>cm_summary <span class="ot">&lt;-</span> cm_model<span class="sc">$</span>results[, <span class="sc">-</span><span class="dv">1</span>]</span>
<span id="section-cb5-2"><a href="#section-cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="section-cb5-3"><a href="#section-cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(cm_summary,</span>
<span id="section-cb5-4"><a href="#section-cb5-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">digits =</span> <span class="dv">5</span>,</span>
<span id="section-cb5-5"><a href="#section-cb5-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code></pre></div></div>
<!-- rnb-source-end -->
<table class="table table-condensed">
<thead>
<tr class="header">
<th align="right">Accuracy</th>
<th align="right">Kappa</th>
<th align="right">AccuracySD</th>
<th align="right">KappaSD</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">0.88435</td>
<td align="right">0.47854</td>
<td align="right">0.01403</td>
<td align="right">0.07875</td>
</tr>
</tbody>
</table>
<!-- rnb-chunk-end -->
<!-- rnb-text-begin -->
<p>For a more detailed statistical summary of the claim closure model fits see Appendix <code>cm_summary</code></p>
<!-- rnb-text-end -->
<!-- rnb-chunk-begin -->
<!-- rnb-source-begin eyJkYXRhIjpbImNtX3Byb2JzIDwtIGNiaW5kKG1vZGVsX2RhdGEsIHByZWRpY3QoY21fbW9kZWwsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdkYXRhID0gbW9kZWxfZGF0YSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgPSBcInByb2JcIikpIiwiIyBmaW5kIHRoZSBsb2dpdCB2YWx1ZSIsImNtX3Byb2JzJGxvZ2l0cyA8LSBsb2coY21fcHJvYnMkTyAvIGNtX3Byb2JzJEMpIl19 -->
<div class="sourceCode" id="section-cb6"><div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs btn-secondary btn-sm code-folding-btn pull-right float-right" data-toggle="collapse" data-target="#rcode-643E0F366" aria-expanded="false" aria-controls="rcode-643E0F366"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F366"><pre class="sourceCode r"><code class="sourceCode r"><span id="section-cb6-1"><a href="#section-cb6-1" aria-hidden="true" tabindex="-1"></a>cm_probs <span class="ot">&lt;-</span> <span class="fu">cbind</span>(model_data, <span class="fu">predict</span>(cm_model, </span>
<span id="section-cb6-2"><a href="#section-cb6-2" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">newdata =</span> model_data, </span>
<span id="section-cb6-3"><a href="#section-cb6-3" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">type =</span> <span class="st">"prob"</span>))</span>
<span id="section-cb6-4"><a href="#section-cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"># find the logit value</span></span>
<span id="section-cb6-5"><a href="#section-cb6-5" aria-hidden="true" tabindex="-1"></a>cm_probs<span class="sc">$</span>logits <span class="ot">&lt;-</span> <span class="fu">log</span>(cm_probs<span class="sc">$</span>O <span class="sc">/</span> cm_probs<span class="sc">$</span>C)</span></code></pre></div></div>
<!-- rnb-source-end -->
<!-- rnb-chunk-end -->
<!-- rnb-text-begin -->
<p>In the plots below the blue line indicates the fitted probability of the claim at age 30 months being open at age 42 months.</p>
<p>The red dots at the top and bottom are the actual status for the 
training data at 42 months (i.e.&nbsp;model fits the blue line to the 
red dots).</p>
<!-- rnb-text-end -->
<!-- rnb-chunk-begin -->
<!-- rnb-source-begin eyJkYXRhIjpbImNtX3Byb2JzJHN0YXR1c19hY3QgPC0gaWZlbHNlKGNtX3Byb2JzJHN0YXR1c19hY3QgPT0gXCJDXCIsIDAsIDEpIiwiICAiLCJnZ3Bsb3QoY21fcHJvYnMsIGFlcyh4ID0gbG9naXRzLCB5ID0gc3RhdHVzX2FjdCkpICtcbiAgICAgICBnZW9tX3BvaW50KGNvbG91ciA9IFwicmVkXCIsIFxuICAgICAgICAgICAgICAgICAgcG9zaXRpb24gPSBwb3NpdGlvbl9qaXR0ZXIoaGVpZ2h0ID0gMC4xLCB3aWR0aCA9IDAuMSksXG4gICAgICAgICAgICAgICAgICBzaXplID0gMC41LFxuICAgICAgICAgICAgICAgICAgYWxwaGEgPSAwLjIpICsgXG4gICAgICAgZ2VvbV9zbW9vdGgobWV0aG9kID0gXCJnbG1cIiwgbWV0aG9kLmFyZ3MgPSBsaXN0KGZhbWlseSA9IFwiYmlub21pYWxcIiksIFxuICAgICAgICAgICAgICAgICAgIHNpemUgPSAxKSArIFxuICAgICAgIHlsYWIoXCJQcm9iYWJpbGl0eSBPcGVuXCIpICtcbiAgICAgICB4bGFiKFwiTG9naXQgT2Rkc1wiKSArXG4gICAgICAgZ2d0aXRsZShwYXN0ZTAoXCJBZ2UgXCIsIGRldnRfcGVyaW9kLCBcIiB0byBcIiwgZGV2dF9wZXJpb2QgKyAxMiwgXCIgTW9udGhzIENsYWltIE9wZW4gUHJvYmFiaWxpdGllc1wiKSkiXX0= -->
<div class="sourceCode" id="section-cb7"><div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs btn-secondary btn-sm code-folding-btn pull-right float-right" data-toggle="collapse" data-target="#rcode-643E0F367" aria-expanded="false" aria-controls="rcode-643E0F367"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F367"><pre class="sourceCode r"><code class="sourceCode r"><span id="section-cb7-1"><a href="#section-cb7-1" aria-hidden="true" tabindex="-1"></a>cm_probs<span class="sc">$</span>status_act <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(cm_probs<span class="sc">$</span>status_act <span class="sc">==</span> <span class="st">"C"</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="section-cb7-2"><a href="#section-cb7-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="section-cb7-3"><a href="#section-cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cm_probs, <span class="fu">aes</span>(<span class="at">x =</span> logits, <span class="at">y =</span> status_act)) <span class="sc">+</span></span>
<span id="section-cb7-4"><a href="#section-cb7-4" aria-hidden="true" tabindex="-1"></a>       <span class="fu">geom_point</span>(<span class="at">colour =</span> <span class="st">"red"</span>, </span>
<span id="section-cb7-5"><a href="#section-cb7-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">height =</span> <span class="fl">0.1</span>, <span class="at">width =</span> <span class="fl">0.1</span>),</span>
<span id="section-cb7-6"><a href="#section-cb7-6" aria-hidden="true" tabindex="-1"></a>                  <span class="at">size =</span> <span class="fl">0.5</span>,</span>
<span id="section-cb7-7"><a href="#section-cb7-7" aria-hidden="true" tabindex="-1"></a>                  <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span> </span>
<span id="section-cb7-8"><a href="#section-cb7-8" aria-hidden="true" tabindex="-1"></a>       <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"glm"</span>, <span class="at">method.args =</span> <span class="fu">list</span>(<span class="at">family =</span> <span class="st">"binomial"</span>), </span>
<span id="section-cb7-9"><a href="#section-cb7-9" aria-hidden="true" tabindex="-1"></a>                   <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="section-cb7-10"><a href="#section-cb7-10" aria-hidden="true" tabindex="-1"></a>       <span class="fu">ylab</span>(<span class="st">"Probability Open"</span>) <span class="sc">+</span></span>
<span id="section-cb7-11"><a href="#section-cb7-11" aria-hidden="true" tabindex="-1"></a>       <span class="fu">xlab</span>(<span class="st">"Logit Odds"</span>) <span class="sc">+</span></span>
<span id="section-cb7-12"><a href="#section-cb7-12" aria-hidden="true" tabindex="-1"></a>       <span class="fu">ggtitle</span>(<span class="fu">paste0</span>(<span class="st">"Age "</span>, devt_period, <span class="st">" to "</span>, devt_period <span class="sc">+</span> <span class="dv">12</span>, <span class="st">" Months Claim Open Probabilities"</span>))</span></code></pre></div></div>
<!-- rnb-source-end -->
<!-- rnb-plot-begin -->
<p><img src="index_files/cm_logit_plot-1.png" width="672"></p>
<!-- rnb-plot-end -->
<!-- rnb-chunk-end -->
<!-- rnb-text-begin -->
</div>
</div>
<div id="section-zero-payment-model" class="section level2">
<h2>Zero Payment Model</h2>
<div id="section-assumptions-1" class="section level3">
<h3>Assumptions</h3>
<p>The zero payment model is similar to the claim closure model in that I am looking at a <em>binomial response variable</em>. I am modeling whether the claim has zero or nonzero incremental payments.</p>
<p>I remove all claims that have a status at 30 months of closed and a status of closed at 42 (I refer to these claims as <code>closed-closed</code> claims).</p>
<p>Additionally, I assume that all of these claims will ultimately have zero incremental payments in the final payment model.</p>
<p><strong>Reponse Variable</strong></p>
<ul>
<li><em>zero</em> Factor indicating whether the claim had zero or nonzero incremental payments between age 30 months and 42 months.</li>
</ul>
<p><strong>Predictor Variables</strong></p>
<ul>
<li><em>status_act</em> Actual claim status at 42 months (“C”” for Closed and “O”” for open).</li>
<li><em>status</em> Claim status at 30 months</li>
<li><em>tot_rx</em> Total case reserve dollar value at 30 months.</li>
<li><em>tot_pd_incr</em> Total incremental paid loss dollar value between 18 months and 30 months.</li>
</ul>
<p>Note: I could use <code>status_act</code> as a predictor variable 
here because for the test data I will simulate the status at 42 first 
and then use that simulated status as a predictor variable in the zero 
payment model.</p>
</div>
<div id="section-data-prep" class="section level3">
<h3>Data Prep</h3>
<!-- rnb-text-end -->
<!-- rnb-chunk-begin -->
<!-- rnb-source-begin eyJkYXRhIjpbIiMgcmVtb3ZlIGFsbCBjbGFpbXMgdGhhdCBoYXZlIGEgY2xvc2VkIGNsb3NlZCBzdGF0dXMgZnJvbSB0aGUgZGF0YSIsIiMgdGhlc2Ugd2lsbCBiZSBzZXQgdG8gaW5jcmVtZW50YWwgcGF5bWVudHMgb2YgMCIsInptX21vZGVsX2RhdGEgPC0gZmlsdGVyKG1vZGVsX2RhdGEsIHN0YXR1cyA9PSBcIk9cIiB8ICBzdGF0dXNfYWN0ID09IFwiT1wiKSIsIiIsIiMgQWRkIGluIHJlc3BvbnNlIHZhcmlhYmxlIGZvciB6ZXJvIHBheW1lbnQ6Iiwiem1fbW9kZWxfZGF0YSR6ZXJvIDwtIGZhY3RvcihpZmVsc2Uoem1fbW9kZWxfZGF0YSR0b3RfcGRfaW5jcl9hY3QgPT0gMCwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlplcm9cIiwgXCJOb25aZXJvXCIpKSJdfQ== -->
<div class="sourceCode" id="section-cb8"><div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs btn-secondary btn-sm code-folding-btn pull-right float-right" data-toggle="collapse" data-target="#rcode-643E0F368" aria-expanded="false" aria-controls="rcode-643E0F368"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F368"><pre class="sourceCode r"><code class="sourceCode r"><span id="section-cb8-1"><a href="#section-cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remove all claims that have a closed closed status from the data</span></span>
<span id="section-cb8-2"><a href="#section-cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co"># these will be set to incremental payments of 0</span></span>
<span id="section-cb8-3"><a href="#section-cb8-3" aria-hidden="true" tabindex="-1"></a>zm_model_data <span class="ot">&lt;-</span> <span class="fu">filter</span>(model_data, status <span class="sc">==</span> <span class="st">"O"</span> <span class="sc">|</span>  status_act <span class="sc">==</span> <span class="st">"O"</span>)</span>
<span id="section-cb8-4"><a href="#section-cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="section-cb8-5"><a href="#section-cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Add in response variable for zero payment:</span></span>
<span id="section-cb8-6"><a href="#section-cb8-6" aria-hidden="true" tabindex="-1"></a>zm_model_data<span class="sc">$</span>zero <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">ifelse</span>(zm_model_data<span class="sc">$</span>tot_pd_incr_act <span class="sc">==</span> <span class="dv">0</span>, </span>
<span id="section-cb8-7"><a href="#section-cb8-7" aria-hidden="true" tabindex="-1"></a>                                    <span class="st">"Zero"</span>, <span class="st">"NonZero"</span>))</span></code></pre></div></div>
<!-- rnb-source-end -->
<!-- rnb-chunk-end -->
<!-- rnb-text-begin -->
</div>
<div id="section-fit" class="section level3">
<h3>Fit</h3>
<p>I use the same data prepared for the claim closure model to fit the zero payment model.</p>
<!-- rnb-text-end -->
<!-- rnb-chunk-begin -->
<!-- rnb-source-begin eyJkYXRhIjoiem1fbW9kZWwgPC0gY2FyZXQ6OnRyYWluKHplcm8gfiBzdGF0dXMgKyBzdGF0dXNfYWN0ICsgdG90X3J4ICsgdG90X3BkX2luY3IsIFxuICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSB6bV9tb2RlbF9kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZCA9IFwiZ2xtU3RlcEFJQ1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNlID0gRkFMU0UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgcHJlUHJvY2VzcyA9IGMoXCJjZW50ZXJcIiwgXCJzY2FsZVwiLCBcIlllb0pvaG5zb25cIiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgdHJDb250cm9sID0gdHJhaW5Db250cm9sKG1ldGhvZCA9IFwicmVwZWF0ZWRjdlwiLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0cyA9IDIpKSJ9 -->
<div class="sourceCode" id="section-cb9"><div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs btn-secondary btn-sm code-folding-btn pull-right float-right" data-toggle="collapse" data-target="#rcode-643E0F369" aria-expanded="false" aria-controls="rcode-643E0F369"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F369"><pre class="sourceCode r"><code class="sourceCode r"><span id="section-cb9-1"><a href="#section-cb9-1" aria-hidden="true" tabindex="-1"></a>zm_model <span class="ot">&lt;-</span> caret<span class="sc">::</span><span class="fu">train</span>(zero <span class="sc">~</span> status <span class="sc">+</span> status_act <span class="sc">+</span> tot_rx <span class="sc">+</span> tot_pd_incr, </span>
<span id="section-cb9-2"><a href="#section-cb9-2" aria-hidden="true" tabindex="-1"></a>                         <span class="at">data =</span> zm_model_data,</span>
<span id="section-cb9-3"><a href="#section-cb9-3" aria-hidden="true" tabindex="-1"></a>                         <span class="at">method =</span> <span class="st">"glmStepAIC"</span>,</span>
<span id="section-cb9-4"><a href="#section-cb9-4" aria-hidden="true" tabindex="-1"></a>                         <span class="at">trace =</span> <span class="cn">FALSE</span>,</span>
<span id="section-cb9-5"><a href="#section-cb9-5" aria-hidden="true" tabindex="-1"></a>                         <span class="at">preProcess =</span> <span class="fu">c</span>(<span class="st">"center"</span>, <span class="st">"scale"</span>, <span class="st">"YeoJohnson"</span>),</span>
<span id="section-cb9-6"><a href="#section-cb9-6" aria-hidden="true" tabindex="-1"></a>                         <span class="at">trControl =</span> <span class="fu">trainControl</span>(<span class="at">method =</span> <span class="st">"repeatedcv"</span>, </span>
<span id="section-cb9-7"><a href="#section-cb9-7" aria-hidden="true" tabindex="-1"></a>                                                  <span class="at">repeats =</span> <span class="dv">2</span>))</span></code></pre></div></div>
<!-- rnb-source-end -->
<!-- rnb-chunk-end -->
<!-- rnb-text-begin -->
<!-- rnb-text-end -->
<!-- rnb-chunk-begin -->
<!-- rnb-source-begin eyJkYXRhIjpbInptX3N1bW1hcnkgPC0gem1fbW9kZWwkcmVzdWx0c1ssIC0xXSIsIiIsImthYmxlKHptX3N1bW1hcnksXG4gICAgICByb3cubmFtZXMgPSBGQUxTRSkiXX0= -->
<div class="sourceCode" id="section-cb10"><div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs btn-secondary btn-sm code-folding-btn pull-right float-right" data-toggle="collapse" data-target="#rcode-643E0F3610" aria-expanded="false" aria-controls="rcode-643E0F3610"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3610"><pre class="sourceCode r"><code class="sourceCode r"><span id="section-cb10-1"><a href="#section-cb10-1" aria-hidden="true" tabindex="-1"></a>zm_summary <span class="ot">&lt;-</span> zm_model<span class="sc">$</span>results[, <span class="sc">-</span><span class="dv">1</span>]</span>
<span id="section-cb10-2"><a href="#section-cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="section-cb10-3"><a href="#section-cb10-3" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(zm_summary,</span>
<span id="section-cb10-4"><a href="#section-cb10-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code></pre></div></div>
<!-- rnb-source-end -->
<table class="table table-condensed">
<thead>
<tr class="header">
<th align="right">Accuracy</th>
<th align="right">Kappa</th>
<th align="right">AccuracySD</th>
<th align="right">KappaSD</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">0.7725765</td>
<td align="right">0.0257551</td>
<td align="right">0.0071494</td>
<td align="right">0.0411513</td>
</tr>
</tbody>
</table>
<!-- rnb-chunk-end -->
<!-- rnb-text-begin -->
<!-- rnb-text-end -->
<!-- rnb-chunk-begin -->
<!-- rnb-source-begin eyJkYXRhIjpbInptX3Byb2JzIDwtIGNiaW5kKHptX21vZGVsX2RhdGEsIHByZWRpY3Qoem1fbW9kZWwsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdkYXRhID0gem1fbW9kZWxfZGF0YSwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgPSBcInByb2JcIikpIiwiIiwiem1fcHJvYnMkbG9naXRzIDwtIGxvZyh6bV9wcm9icyROb25aZXJvIC8gem1fcHJvYnMkWmVybykiXX0= -->
<div class="sourceCode" id="section-cb11"><div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs btn-secondary btn-sm code-folding-btn pull-right float-right" data-toggle="collapse" data-target="#rcode-643E0F3611" aria-expanded="false" aria-controls="rcode-643E0F3611"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3611"><pre class="sourceCode r"><code class="sourceCode r"><span id="section-cb11-1"><a href="#section-cb11-1" aria-hidden="true" tabindex="-1"></a>zm_probs <span class="ot">&lt;-</span> <span class="fu">cbind</span>(zm_model_data, <span class="fu">predict</span>(zm_model, </span>
<span id="section-cb11-2"><a href="#section-cb11-2" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">newdata =</span> zm_model_data, </span>
<span id="section-cb11-3"><a href="#section-cb11-3" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">type =</span> <span class="st">"prob"</span>))</span>
<span id="section-cb11-4"><a href="#section-cb11-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="section-cb11-5"><a href="#section-cb11-5" aria-hidden="true" tabindex="-1"></a>zm_probs<span class="sc">$</span>logits <span class="ot">&lt;-</span> <span class="fu">log</span>(zm_probs<span class="sc">$</span>NonZero <span class="sc">/</span> zm_probs<span class="sc">$</span>Zero)</span></code></pre></div></div>
<!-- rnb-source-end -->
<!-- rnb-chunk-end -->
<!-- rnb-text-begin -->
<p>In the plots below, the blue line indicates the fitted probability of
 the claim having a payments between age 30 and 42 months. The red dots 
at the top are the actual claims with payments between age 30 and 42 
months, and the dots at the bottom are the claims with zero payments 
during this time period. (i.e.&nbsp;Zero Payment model fits the blue 
line to the red dots)</p>
<!-- rnb-text-end -->
<!-- rnb-chunk-begin -->
<!-- rnb-source-begin eyJkYXRhIjpbInptX3Byb2JzJHplcm8gPC0gaWZlbHNlKHptX3Byb2JzJHplcm8gPT0gXCJaZXJvXCIsIDAsIDEpIiwiICAiLCJnZ3Bsb3Qoem1fcHJvYnMsIGFlcyh4ID0gbG9naXRzLCB5ID0gemVybykpICtcbiAgICAgICBnZW9tX3BvaW50KGNvbG91ciA9IFwicmVkXCIsIFxuICAgICAgICAgICAgICAgICAgcG9zaXRpb24gPSBwb3NpdGlvbl9qaXR0ZXIoaGVpZ2h0ID0gMC4xLCB3aWR0aCA9IDAuMSksXG4gICAgICAgICAgICAgICAgICBzaXplID0gMC41LFxuICAgICAgICAgICAgICAgICAgYWxwaGEgPSAwLjIpICsgXG4gICAgICAgZ2VvbV9zbW9vdGgobWV0aG9kID0gXCJnbG1cIiwgbWV0aG9kLmFyZ3MgPSBsaXN0KGZhbWlseSA9IFwiYmlub21pYWxcIiksIFxuICAgICAgICAgICAgICAgICAgIHNpemUgPSAxKSArIFxuICAgICAgIHlsYWIoXCJQYXltZW50IFByb2JhYmlsaXR5XCIpICtcbiAgICAgICB4bGFiKFwiTG9naXQgT2Rkc1wiKSArXG4gICAgICAgZ2d0aXRsZShwYXN0ZTAoXCJBZ2UgXCIsIGRldnRfcGVyaW9kLCBcIiB0byBcIiwgZGV2dF9wZXJpb2QgKyAxMiwgXG4gICAgICAgICAgICAgICAgICAgICAgXCIgTm9uLVplcm8gSW5jcmVtZW50YWwgUGF5bWVudFwiKSkiXX0= -->
<div class="sourceCode" id="section-cb12"><div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs btn-secondary btn-sm code-folding-btn pull-right float-right" data-toggle="collapse" data-target="#rcode-643E0F3612" aria-expanded="false" aria-controls="rcode-643E0F3612"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3612"><pre class="sourceCode r"><code class="sourceCode r"><span id="section-cb12-1"><a href="#section-cb12-1" aria-hidden="true" tabindex="-1"></a>zm_probs<span class="sc">$</span>zero <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(zm_probs<span class="sc">$</span>zero <span class="sc">==</span> <span class="st">"Zero"</span>, <span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="section-cb12-2"><a href="#section-cb12-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="section-cb12-3"><a href="#section-cb12-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(zm_probs, <span class="fu">aes</span>(<span class="at">x =</span> logits, <span class="at">y =</span> zero)) <span class="sc">+</span></span>
<span id="section-cb12-4"><a href="#section-cb12-4" aria-hidden="true" tabindex="-1"></a>       <span class="fu">geom_point</span>(<span class="at">colour =</span> <span class="st">"red"</span>, </span>
<span id="section-cb12-5"><a href="#section-cb12-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="at">height =</span> <span class="fl">0.1</span>, <span class="at">width =</span> <span class="fl">0.1</span>),</span>
<span id="section-cb12-6"><a href="#section-cb12-6" aria-hidden="true" tabindex="-1"></a>                  <span class="at">size =</span> <span class="fl">0.5</span>,</span>
<span id="section-cb12-7"><a href="#section-cb12-7" aria-hidden="true" tabindex="-1"></a>                  <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span> </span>
<span id="section-cb12-8"><a href="#section-cb12-8" aria-hidden="true" tabindex="-1"></a>       <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"glm"</span>, <span class="at">method.args =</span> <span class="fu">list</span>(<span class="at">family =</span> <span class="st">"binomial"</span>), </span>
<span id="section-cb12-9"><a href="#section-cb12-9" aria-hidden="true" tabindex="-1"></a>                   <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="section-cb12-10"><a href="#section-cb12-10" aria-hidden="true" tabindex="-1"></a>       <span class="fu">ylab</span>(<span class="st">"Payment Probability"</span>) <span class="sc">+</span></span>
<span id="section-cb12-11"><a href="#section-cb12-11" aria-hidden="true" tabindex="-1"></a>       <span class="fu">xlab</span>(<span class="st">"Logit Odds"</span>) <span class="sc">+</span></span>
<span id="section-cb12-12"><a href="#section-cb12-12" aria-hidden="true" tabindex="-1"></a>       <span class="fu">ggtitle</span>(<span class="fu">paste0</span>(<span class="st">"Age "</span>, devt_period, <span class="st">" to "</span>, devt_period <span class="sc">+</span> <span class="dv">12</span>, </span>
<span id="section-cb12-13"><a href="#section-cb12-13" aria-hidden="true" tabindex="-1"></a>                      <span class="st">" Non-Zero Incremental Payment"</span>))</span></code></pre></div></div>
<!-- rnb-source-end -->
<!-- rnb-plot-begin -->
<p><img src="index_files/zm_plots-1.png" width="672"></p>
<!-- rnb-plot-end -->
<!-- rnb-chunk-end -->
<!-- rnb-text-begin -->
</div>
</div>
<div id="section-incremental-payment-model" class="section level2">
<h2>Incremental Payment Model</h2>
<div id="section-assumptions-2" class="section level3">
<h3>Assumptions</h3>
<p>The incremental payment model models incremental payments between 30 
and 42. The incremental payment model uses a generalized additive model 
(GAM) with an integrated smoothness estimation and a <strong>quasi-poisson log link function</strong> ;).</p>
<p><strong>Response Variable</strong></p>
<ul>
<li><em>tot_pd_incr_act</em> Total incremental payment between 30 and 42 months.</li>
</ul>
<p><strong>Predictor Variables</strong></p>
<ul>
<li><em>status_act</em> The actual status at 42 months.</li>
<li><em>tot_rx</em> Total case reserve dollar value at 30 months.</li>
<li><em>tot_pd_incr</em> Incremental payments between 18 and 30 months.</li>
</ul>
</div>
<div id="section-data-prep-1" class="section level3">
<h3>Data Prep</h3>
<!-- rnb-text-end -->
<!-- rnb-chunk-begin -->
<!-- rnb-source-begin eyJkYXRhIjpbIiNUYWtlIG91dCB6ZXJvIHBtbnRzOiIsIm56bV9tb2RlbF9kYXRhIDwtIHptX21vZGVsX2RhdGFbem1fbW9kZWxfZGF0YSR0b3RfcGRfaW5jcl9hY3QgPiAwLCBdIl19 -->
<div class="sourceCode" id="section-cb13"><div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs btn-secondary btn-sm code-folding-btn pull-right float-right" data-toggle="collapse" data-target="#rcode-643E0F3613" aria-expanded="false" aria-controls="rcode-643E0F3613"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3613"><pre class="sourceCode r"><code class="sourceCode r"><span id="section-cb13-1"><a href="#section-cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Take out zero pmnts:</span></span>
<span id="section-cb13-2"><a href="#section-cb13-2" aria-hidden="true" tabindex="-1"></a>nzm_model_data <span class="ot">&lt;-</span> zm_model_data[zm_model_data<span class="sc">$</span>tot_pd_incr_act <span class="sc">&gt;</span> <span class="dv">0</span>, ]</span></code></pre></div></div>
<!-- rnb-source-end -->
<!-- rnb-chunk-end -->
<!-- rnb-text-begin -->
</div>
<div id="section-fit-1" class="section level3">
<h3>Fit</h3>
<!-- rnb-text-end -->
<!-- rnb-chunk-begin -->
<!-- rnb-source-begin eyJkYXRhIjpbIiMgZml0IGluY3JlbWVudGFsIHBheW1lbnQgbW9kZWwiLCJuem1fbW9kZWwgPC0gbWdjdjo6Z2FtKHRvdF9wZF9pbmNyX2FjdCB+IHN0YXR1c19hY3QgKyBzKHRvdF9yeCkgKyBzKHRvdF9wZF9pbmNyKSxcbiAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IG56bV9tb2RlbF9kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICBmYW1pbHkgPSBxdWFzaXBvaXNzb24obGluayA9IFwibG9nXCIpKSJdfQ== -->
<div class="sourceCode" id="section-cb14"><div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs btn-secondary btn-sm code-folding-btn pull-right float-right" data-toggle="collapse" data-target="#rcode-643E0F3614" aria-expanded="false" aria-controls="rcode-643E0F3614"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3614"><pre class="sourceCode r"><code class="sourceCode r"><span id="section-cb14-1"><a href="#section-cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># fit incremental payment model</span></span>
<span id="section-cb14-2"><a href="#section-cb14-2" aria-hidden="true" tabindex="-1"></a>nzm_model <span class="ot">&lt;-</span> mgcv<span class="sc">::</span><span class="fu">gam</span>(tot_pd_incr_act <span class="sc">~</span> status_act <span class="sc">+</span> <span class="fu">s</span>(tot_rx) <span class="sc">+</span> <span class="fu">s</span>(tot_pd_incr),</span>
<span id="section-cb14-3"><a href="#section-cb14-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">data =</span> nzm_model_data,</span>
<span id="section-cb14-4"><a href="#section-cb14-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">family =</span> <span class="fu">quasipoisson</span>(<span class="at">link =</span> <span class="st">"log"</span>))</span></code></pre></div></div>
<!-- rnb-source-end -->
<!-- rnb-chunk-end -->
<!-- rnb-text-begin -->
<!-- rnb-text-end -->
<!-- rnb-chunk-begin -->
<!-- rnb-source-begin eyJkYXRhIjoibnptX2ZpdCA8LSBjYmluZChuem1fbW9kZWxfZGF0YSwgXG4gICAgICAgICAgICAgICAgIHRvdF9wZF9pbmNyX3NpbSA9IGV4cChwcmVkaWN0KG56bV9tb2RlbCwgbmV3ZGF0YSA9IG56bV9tb2RlbF9kYXRhKSkpIn0= -->
<div class="sourceCode" id="section-cb15"><div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs btn-secondary btn-sm code-folding-btn pull-right float-right" data-toggle="collapse" data-target="#rcode-643E0F3615" aria-expanded="false" aria-controls="rcode-643E0F3615"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3615"><pre class="sourceCode r"><code class="sourceCode r"><span id="section-cb15-1"><a href="#section-cb15-1" aria-hidden="true" tabindex="-1"></a>nzm_fit <span class="ot">&lt;-</span> <span class="fu">cbind</span>(nzm_model_data, </span>
<span id="section-cb15-2"><a href="#section-cb15-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">tot_pd_incr_sim =</span> <span class="fu">exp</span>(<span class="fu">predict</span>(nzm_model, <span class="at">newdata =</span> nzm_model_data)))</span></code></pre></div></div>
<!-- rnb-source-end -->
<!-- rnb-chunk-end -->
<!-- rnb-text-begin -->
<!-- rnb-text-end -->
<!-- rnb-chunk-begin -->
<!-- rnb-source-begin eyJkYXRhIjoiIyBwbG90cyB0byBiZSBkZXRlcm1pbmVkIn0= -->
<div class="sourceCode" id="section-cb16"><div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs btn-secondary btn-sm code-folding-btn pull-right float-right" data-toggle="collapse" data-target="#rcode-643E0F3616" aria-expanded="false" aria-controls="rcode-643E0F3616"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3616"><pre class="sourceCode r"><code class="sourceCode r"><span id="section-cb16-1"><a href="#section-cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plots to be determined</span></span></code></pre></div></div>
<!-- rnb-source-end -->
<!-- rnb-chunk-end -->
<!-- rnb-text-begin -->
</div>
</div>
</div>
<div id="section-simulation" class="section level1">
<h1>Simulation</h1>
<div id="section-closure-status" class="section level2">
<h2>Closure Status</h2>
<!-- rnb-text-end -->
<!-- rnb-chunk-begin -->
<!-- rnb-source-begin eyJkYXRhIjpbInNldC5zZWVkKDEyMzQpIiwibl9zaW1zIDwtIDIwMDAiLCIiLCJjbV9wcmVkX2RhdGEgPC0gZHBseXI6OmZpbHRlcihjbGFpbXMsIGV2YWwgPT0gcHJlZGljdF9ldmFsKSIsIiIsImNtX3Byb2JzIDwtIGNiaW5kKGNtX3ByZWRfZGF0YSwgXG4gICAgICAgICAgICAgICAgICBwcmVkaWN0KGNtX21vZGVsLCBuZXdkYXRhID0gY21fcHJlZF9kYXRhLCB0eXBlID0gXCJwcm9iXCIpKSIsIiAgIiwiY21fcHJlZCA8LSBsYXBwbHkoY21fcHJvYnMkTywgcmJpbm9tLCBuID0gbl9zaW1zLCBzaXplID0gMSkiLCJjbV9wcmVkIDwtIG1hdHJpeCh1bmxpc3QoY21fcHJlZCksIG5jb2wgPSBuX3NpbXMsIGJ5cm93ID0gVFJVRSkiLCJjbV9wcmVkIDwtIGlmZWxzZShjbV9wcmVkID09IDEsIFwiT1wiLCBcIkNcIikiLCJjbV9wcmVkIDwtIGFzLmRhdGEuZnJhbWUoY21fcHJlZCkiXX0= -->
<div class="sourceCode" id="section-cb17"><div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs btn-secondary btn-sm code-folding-btn pull-right float-right" data-toggle="collapse" data-target="#rcode-643E0F3617" aria-expanded="false" aria-controls="rcode-643E0F3617"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3617"><pre class="sourceCode r"><code class="sourceCode r"><span id="section-cb17-1"><a href="#section-cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1234</span>)</span>
<span id="section-cb17-2"><a href="#section-cb17-2" aria-hidden="true" tabindex="-1"></a>n_sims <span class="ot">&lt;-</span> <span class="dv">2000</span></span>
<span id="section-cb17-3"><a href="#section-cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="section-cb17-4"><a href="#section-cb17-4" aria-hidden="true" tabindex="-1"></a>cm_pred_data <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(claims, eval <span class="sc">==</span> predict_eval)</span>
<span id="section-cb17-5"><a href="#section-cb17-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="section-cb17-6"><a href="#section-cb17-6" aria-hidden="true" tabindex="-1"></a>cm_probs <span class="ot">&lt;-</span> <span class="fu">cbind</span>(cm_pred_data, </span>
<span id="section-cb17-7"><a href="#section-cb17-7" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">predict</span>(cm_model, <span class="at">newdata =</span> cm_pred_data, <span class="at">type =</span> <span class="st">"prob"</span>))</span>
<span id="section-cb17-8"><a href="#section-cb17-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="section-cb17-9"><a href="#section-cb17-9" aria-hidden="true" tabindex="-1"></a>cm_pred <span class="ot">&lt;-</span> <span class="fu">lapply</span>(cm_probs<span class="sc">$</span>O, rbinom, <span class="at">n =</span> n_sims, <span class="at">size =</span> <span class="dv">1</span>)</span>
<span id="section-cb17-10"><a href="#section-cb17-10" aria-hidden="true" tabindex="-1"></a>cm_pred <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">unlist</span>(cm_pred), <span class="at">ncol =</span> n_sims, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="section-cb17-11"><a href="#section-cb17-11" aria-hidden="true" tabindex="-1"></a>cm_pred <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(cm_pred <span class="sc">==</span> <span class="dv">1</span>, <span class="st">"O"</span>, <span class="st">"C"</span>)</span>
<span id="section-cb17-12"><a href="#section-cb17-12" aria-hidden="true" tabindex="-1"></a>cm_pred <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(cm_pred)</span></code></pre></div></div>
<!-- rnb-source-end -->
<!-- rnb-chunk-end -->
<!-- rnb-text-begin -->
<p>I use the probabilities returned from the closure model to simulate the status of all of the claims.</p>
<p>I simulate each claim 2000 times.</p>
<p>The table below shows selected age 30 claims after they had their 
closure probability predicted by the closure model and their status 
simulated using a simulated binomial random variable.</p>
<!-- rnb-text-end -->
<!-- rnb-chunk-begin -->
<!-- rnb-source-begin eyJkYXRhIjpbImNtX291dCA8LSBjbV9wcm9icyIsIiIsImNtX291dCA8LSBkcGx5cjo6c2VsZWN0KGNtX291dCwgY2xhaW1fbnVtYmVyLCBzdGF0dXMsIHRvdF9yeCwgdG90X3BkX2luY3IsIE8pIiwiIiwiY21fb3V0JHN0YXR1c19zaW0gPC0gY21fcHJlZFssIDFdIiwiY21fb3V0IDwtIGNtX291dFtjKDEsIDYsIDI0LCAyLCAxMCksIF0iLCJuYW1lcyhjbV9vdXQpIDwtIGMoXCJDbGFpbSBOdW1iZXJcIiwgXCJTdGF0dXNcIiwgXCJDYXNlXCIsIFwiUGFpZCBJbmNyZVwiLCBcbiAgICAgICAgICAgICAgICAgICBcIlByb2IgT3BlblwiLCBcIlNpbSBTdGF0dXNcIikiLCJrYWJsZShjbV9vdXQsXG4gICAgICByb3cubmFtZXMgPSBGQUxTRSkiXX0= -->
<div class="sourceCode" id="section-cb18"><div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs btn-secondary btn-sm code-folding-btn pull-right float-right" data-toggle="collapse" data-target="#rcode-643E0F3618" aria-expanded="false" aria-controls="rcode-643E0F3618"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3618"><pre class="sourceCode r"><code class="sourceCode r"><span id="section-cb18-1"><a href="#section-cb18-1" aria-hidden="true" tabindex="-1"></a>cm_out <span class="ot">&lt;-</span> cm_probs</span>
<span id="section-cb18-2"><a href="#section-cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="section-cb18-3"><a href="#section-cb18-3" aria-hidden="true" tabindex="-1"></a>cm_out <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">select</span>(cm_out, claim_number, status, tot_rx, tot_pd_incr, O)</span>
<span id="section-cb18-4"><a href="#section-cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="section-cb18-5"><a href="#section-cb18-5" aria-hidden="true" tabindex="-1"></a>cm_out<span class="sc">$</span>status_sim <span class="ot">&lt;-</span> cm_pred[, <span class="dv">1</span>]</span>
<span id="section-cb18-6"><a href="#section-cb18-6" aria-hidden="true" tabindex="-1"></a>cm_out <span class="ot">&lt;-</span> cm_out[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">6</span>, <span class="dv">24</span>, <span class="dv">2</span>, <span class="dv">10</span>), ]</span>
<span id="section-cb18-7"><a href="#section-cb18-7" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(cm_out) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Claim Number"</span>, <span class="st">"Status"</span>, <span class="st">"Case"</span>, <span class="st">"Paid Incre"</span>, </span>
<span id="section-cb18-8"><a href="#section-cb18-8" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"Prob Open"</span>, <span class="st">"Sim Status"</span>)</span>
<span id="section-cb18-9"><a href="#section-cb18-9" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(cm_out,</span>
<span id="section-cb18-10"><a href="#section-cb18-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code></pre></div></div>
<!-- rnb-source-end -->
<table class="table table-condensed">
<thead>
<tr class="header">
<th align="left">Claim Number</th>
<th align="left">Status</th>
<th align="right">Case</th>
<th align="right">Paid Incre</th>
<th align="right">Prob Open</th>
<th align="left">Sim Status</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">2008137571</td>
<td align="left">C</td>
<td align="right">0</td>
<td align="right">0.00</td>
<td align="right">0.0075471</td>
<td align="left">C</td>
</tr>
<tr class="even">
<td align="left">2008137835</td>
<td align="left">C</td>
<td align="right">0</td>
<td align="right">17754.26</td>
<td align="right">0.0072112</td>
<td align="left">C</td>
</tr>
<tr class="odd">
<td align="left">2008138427</td>
<td align="left">C</td>
<td align="right">0</td>
<td align="right">0.00</td>
<td align="right">0.0075471</td>
<td align="left">C</td>
</tr>
<tr class="even">
<td align="left">2008137654</td>
<td align="left">C</td>
<td align="right">0</td>
<td align="right">0.00</td>
<td align="right">0.0075471</td>
<td align="left">C</td>
</tr>
<tr class="odd">
<td align="left">2008138095</td>
<td align="left">C</td>
<td align="right">0</td>
<td align="right">0.00</td>
<td align="right">0.0075471</td>
<td align="left">C</td>
</tr>
</tbody>
</table>
<!-- rnb-chunk-end -->
<!-- rnb-text-begin -->
<p>The <code>Prob Open</code> column is the probability that the age 30 claim will be open at age 42 as modeled in the closure model. The <code>Sim Status</code> column is the result of a <em>Bernoulli simulation</em> on each of those probabilities.</p>
<p>I am running this simulation 2000 times to simulate 2000 closure scenarios.</p>
<p>The simulations allow me to determine the corresponding distribution’s confidence intervals.</p>
</div>
<div id="section-zero-payment-model-1" class="section level2">
<h2>Zero Payment Model</h2>
<p>Next the simulated claims with their simulated statuses have their 
probability of having a non zero incremental payment simulated by the 
zero payment model. This probability is then simulated using the same 
random binomial simulation approach as used when simulating closure 
status.</p>
<!-- rnb-text-end -->
<!-- rnb-chunk-begin -->
<!-- rnb-source-begin eyJkYXRhIjpbIiMgcHV0IGNsb3N1cmUgbW9kZWwgcHJlZGljdGlvbnMgdG9nZXRoZXIiLCJjbV9wcmVkIDwtIGNiaW5kKGNtX3Byb2JzWywgYyhcImNsYWltX251bWJlclwiKSwgZHJvcCA9IEZBTFNFXSwgY21fcHJlZCkiLCIiLCIjIGdhdGhlciBgY21fcHJlZGAgaW50byBhIGxvbmcgZGF0YSBmcmFtZSIsImNtX3ByZWQgPC0gdGlkeXI6OmdhdGhlcihjbV9wcmVkLCBrZXkgPSBcInNpbV9udW1cIiwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBcInN0YXR1c19zaW1cIiwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgLWNsYWltX251bWJlcikiLCIiLCIjIGpvaW4gYHptX3ByZWRfZGF0YWAgdG8gcHJlZGljdGlvbnMgZnJvbSBjbG9zdXJlIG1vZGVsIiwiIyByZW1vdmUgc3RhdHVzX2FjdCBhbmQgcmVuYW1lIHRoZSBzaW11bGF0ZWQgc3RhdGVzIGFzIHN0YXR1c19hY3QiLCJ6bV9wcmVkX2RhdGEgPC0gbGVmdF9qb2luKGNtX3ByZWQsIGNtX3Byb2JzLCBieSA9IFwiY2xhaW1fbnVtYmVyXCIpICU+JVxuICAgICAgICAgICAgICAgICAgZHBseXI6OnNlbGVjdCgtc3RhdHVzX2FjdCkgJT4lXG4gICAgICAgICAgICAgICAgICBkcGx5cjo6cmVuYW1lKHN0YXR1c19hY3QgPSBzdGF0dXNfc2ltKSIsIiIsIiMgcmVtb3ZlIGFsbCBjbGFpbXMgdGhhdCBoYXZlIGEgY2xvc2VkIGNsb3NlZCBzdGF0dXMgZnJvbSB0aGUgZGF0YSIsIiMgdGhlc2Ugd2lsbCBiZSBzZXQgdG8gaW5jcmVtZW50YWwgcGF5bWVudHMgb2YgMCAiLCJjbG9zZWRfY2xvc2VkX2RhdGEgPC0gZHBseXI6OmZpbHRlcih6bV9wcmVkX2RhdGEsIHN0YXR1cyA9PSBcIkNcIiAmICBzdGF0dXNfYWN0ID09IFwiQ1wiKSIsIiIsInptX3ByZWRfZGF0YSA8LSBmaWx0ZXIoem1fcHJlZF9kYXRhLCBzdGF0dXMgPT0gXCJPXCIgfCAgc3RhdHVzX2FjdCA9PSBcIk9cIikiXX0= -->
<div class="sourceCode" id="section-cb19"><div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs btn-secondary btn-sm code-folding-btn pull-right float-right" data-toggle="collapse" data-target="#rcode-643E0F3619" aria-expanded="false" aria-controls="rcode-643E0F3619"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3619"><pre class="sourceCode r"><code class="sourceCode r"><span id="section-cb19-1"><a href="#section-cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># put closure model predictions together</span></span>
<span id="section-cb19-2"><a href="#section-cb19-2" aria-hidden="true" tabindex="-1"></a>cm_pred <span class="ot">&lt;-</span> <span class="fu">cbind</span>(cm_probs[, <span class="fu">c</span>(<span class="st">"claim_number"</span>), <span class="at">drop =</span> <span class="cn">FALSE</span>], cm_pred)</span>
<span id="section-cb19-3"><a href="#section-cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="section-cb19-4"><a href="#section-cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co"># gather `cm_pred` into a long data frame</span></span>
<span id="section-cb19-5"><a href="#section-cb19-5" aria-hidden="true" tabindex="-1"></a>cm_pred <span class="ot">&lt;-</span> tidyr<span class="sc">::</span><span class="fu">gather</span>(cm_pred, <span class="at">key =</span> <span class="st">"sim_num"</span>, </span>
<span id="section-cb19-6"><a href="#section-cb19-6" aria-hidden="true" tabindex="-1"></a>                         <span class="at">value =</span> <span class="st">"status_sim"</span>, </span>
<span id="section-cb19-7"><a href="#section-cb19-7" aria-hidden="true" tabindex="-1"></a>                         <span class="sc">-</span>claim_number)</span>
<span id="section-cb19-8"><a href="#section-cb19-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="section-cb19-9"><a href="#section-cb19-9" aria-hidden="true" tabindex="-1"></a><span class="co"># join `zm_pred_data` to predictions from closure model</span></span>
<span id="section-cb19-10"><a href="#section-cb19-10" aria-hidden="true" tabindex="-1"></a><span class="co"># remove status_act and rename the simulated states as status_act</span></span>
<span id="section-cb19-11"><a href="#section-cb19-11" aria-hidden="true" tabindex="-1"></a>zm_pred_data <span class="ot">&lt;-</span> <span class="fu">left_join</span>(cm_pred, cm_probs, <span class="at">by =</span> <span class="st">"claim_number"</span>) <span class="sc">%&gt;%</span></span>
<span id="section-cb19-12"><a href="#section-cb19-12" aria-hidden="true" tabindex="-1"></a>                  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="sc">-</span>status_act) <span class="sc">%&gt;%</span></span>
<span id="section-cb19-13"><a href="#section-cb19-13" aria-hidden="true" tabindex="-1"></a>                  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">status_act =</span> status_sim)</span>
<span id="section-cb19-14"><a href="#section-cb19-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="section-cb19-15"><a href="#section-cb19-15" aria-hidden="true" tabindex="-1"></a><span class="co"># remove all claims that have a closed closed status from the data</span></span>
<span id="section-cb19-16"><a href="#section-cb19-16" aria-hidden="true" tabindex="-1"></a><span class="co"># these will be set to incremental payments of 0 </span></span>
<span id="section-cb19-17"><a href="#section-cb19-17" aria-hidden="true" tabindex="-1"></a>closed_closed_data <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(zm_pred_data, status <span class="sc">==</span> <span class="st">"C"</span> <span class="sc">&amp;</span>  status_act <span class="sc">==</span> <span class="st">"C"</span>)</span>
<span id="section-cb19-18"><a href="#section-cb19-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="section-cb19-19"><a href="#section-cb19-19" aria-hidden="true" tabindex="-1"></a>zm_pred_data <span class="ot">&lt;-</span> <span class="fu">filter</span>(zm_pred_data, status <span class="sc">==</span> <span class="st">"O"</span> <span class="sc">|</span>  status_act <span class="sc">==</span> <span class="st">"O"</span>)</span></code></pre></div></div>
<!-- rnb-source-end -->
<!-- rnb-chunk-end -->
<!-- rnb-text-begin -->
<!-- rnb-text-end -->
<!-- rnb-chunk-begin -->
<!-- rnb-source-begin eyJkYXRhIjpbInptX3ByZWQgPC0gY2JpbmQoem1fcHJlZF9kYXRhLCBcbiAgICAgICAgICAgICAgICAgIHByZWRpY3Qoem1fbW9kZWwsIG5ld2RhdGEgPSB6bV9wcmVkX2RhdGEsIHR5cGUgPSBcInByb2JcIikpIiwiICAiLCJ6bV9wcmVkJHplcm9fc2ltIDwtIHNhcHBseSh6bV9wcmVkJE5vblplcm8sIHJiaW5vbSwgbiA9IDEsIHNpemUgPSAxKSIsInptX3ByZWQkemVyb19zaW0gPC0gaWZlbHNlKHptX3ByZWQkemVyb19zaW0gPT0gMSwgXCJOb25aZXJvXCIsIFwiWmVyb1wiKSJdfQ== -->
<div class="sourceCode" id="section-cb20"><div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs btn-secondary btn-sm code-folding-btn pull-right float-right" data-toggle="collapse" data-target="#rcode-643E0F3620" aria-expanded="false" aria-controls="rcode-643E0F3620"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3620"><pre class="sourceCode r"><code class="sourceCode r"><span id="section-cb20-1"><a href="#section-cb20-1" aria-hidden="true" tabindex="-1"></a>zm_pred <span class="ot">&lt;-</span> <span class="fu">cbind</span>(zm_pred_data, </span>
<span id="section-cb20-2"><a href="#section-cb20-2" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">predict</span>(zm_model, <span class="at">newdata =</span> zm_pred_data, <span class="at">type =</span> <span class="st">"prob"</span>))</span>
<span id="section-cb20-3"><a href="#section-cb20-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="section-cb20-4"><a href="#section-cb20-4" aria-hidden="true" tabindex="-1"></a>zm_pred<span class="sc">$</span>zero_sim <span class="ot">&lt;-</span> <span class="fu">sapply</span>(zm_pred<span class="sc">$</span>NonZero, rbinom, <span class="at">n =</span> <span class="dv">1</span>, <span class="at">size =</span> <span class="dv">1</span>)</span>
<span id="section-cb20-5"><a href="#section-cb20-5" aria-hidden="true" tabindex="-1"></a>zm_pred<span class="sc">$</span>zero_sim <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(zm_pred<span class="sc">$</span>zero_sim <span class="sc">==</span> <span class="dv">1</span>, <span class="st">"NonZero"</span>, <span class="st">"Zero"</span>)</span></code></pre></div></div>
<!-- rnb-source-end -->
<!-- rnb-chunk-end -->
<!-- rnb-text-begin -->
<!-- rnb-text-end -->
<!-- rnb-chunk-begin -->
<!-- rnb-source-begin eyJkYXRhIjpbInptX291dCA8LSB6bV9wcmVkIiwiIiwiem1fb3V0IDwtIGRwbHlyOjpzZWxlY3Qoem1fb3V0LCBjbGFpbV9udW1iZXIsIHN0YXR1cywgdG90X3J4LCB0b3RfcGRfaW5jciwgXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNfYWN0LCBOb25aZXJvLCB6ZXJvX3NpbSkiLCIiLCJ6bV9vdXQgPC0gaGVhZCh6bV9vdXQsIDgpIiwibmFtZXMoem1fb3V0KSA8LSBjKFwiQ2xhaW0gTnVtYmVyXCIsIFwiU3RhdHVzXCIsIFwiQ2FzZVwiLCBcIlBhaWQgSW5jcmVcIiwgXG4gICAgICAgICAgICAgICAgICAgXCJTaW0gU3RhdHVzXCIsIFwiUHJvYiBOb24gWmVyb1wiLCBcIlplcm8gU2ltXCIpIiwia2FibGUoem1fb3V0LFxuICAgICAgcm93Lm5hbWVzID0gRkFMU0UpIl19 -->
<div class="sourceCode" id="section-cb21"><div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs btn-secondary btn-sm code-folding-btn pull-right float-right" data-toggle="collapse" data-target="#rcode-643E0F3621" aria-expanded="false" aria-controls="rcode-643E0F3621"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3621"><pre class="sourceCode r"><code class="sourceCode r"><span id="section-cb21-1"><a href="#section-cb21-1" aria-hidden="true" tabindex="-1"></a>zm_out <span class="ot">&lt;-</span> zm_pred</span>
<span id="section-cb21-2"><a href="#section-cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="section-cb21-3"><a href="#section-cb21-3" aria-hidden="true" tabindex="-1"></a>zm_out <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">select</span>(zm_out, claim_number, status, tot_rx, tot_pd_incr, </span>
<span id="section-cb21-4"><a href="#section-cb21-4" aria-hidden="true" tabindex="-1"></a>                        status_act, NonZero, zero_sim)</span>
<span id="section-cb21-5"><a href="#section-cb21-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="section-cb21-6"><a href="#section-cb21-6" aria-hidden="true" tabindex="-1"></a>zm_out <span class="ot">&lt;-</span> <span class="fu">head</span>(zm_out, <span class="dv">8</span>)</span>
<span id="section-cb21-7"><a href="#section-cb21-7" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(zm_out) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Claim Number"</span>, <span class="st">"Status"</span>, <span class="st">"Case"</span>, <span class="st">"Paid Incre"</span>, </span>
<span id="section-cb21-8"><a href="#section-cb21-8" aria-hidden="true" tabindex="-1"></a>                   <span class="st">"Sim Status"</span>, <span class="st">"Prob Non Zero"</span>, <span class="st">"Zero Sim"</span>)</span>
<span id="section-cb21-9"><a href="#section-cb21-9" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(zm_out,</span>
<span id="section-cb21-10"><a href="#section-cb21-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code></pre></div></div>
<!-- rnb-source-end -->
<table class="table table-condensed">
<thead>
<tr class="header">
<th align="left">Claim Number</th>
<th align="left">Status</th>
<th align="right">Case</th>
<th align="right">Paid Incre</th>
<th align="left">Sim Status</th>
<th align="right">Prob Non Zero</th>
<th align="left">Zero Sim</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">2008137674</td>
<td align="left">O</td>
<td align="right">86018.83</td>
<td align="right">3741.17</td>
<td align="left">O</td>
<td align="right">0.8621934</td>
<td align="left">NonZero</td>
</tr>
<tr class="even">
<td align="left">2008137801</td>
<td align="left">O</td>
<td align="right">76990.10</td>
<td align="right">4588.70</td>
<td align="left">O</td>
<td align="right">0.8541665</td>
<td align="left">Zero</td>
</tr>
<tr class="odd">
<td align="left">2008138088</td>
<td align="left">O</td>
<td align="right">123715.66</td>
<td align="right">4861.24</td>
<td align="left">C</td>
<td align="right">0.8075995</td>
<td align="left">NonZero</td>
</tr>
<tr class="even">
<td align="left">2008138093</td>
<td align="left">O</td>
<td align="right">20475.05</td>
<td align="right">83510.25</td>
<td align="left">C</td>
<td align="right">0.6467032</td>
<td align="left">Zero</td>
</tr>
<tr class="odd">
<td align="left">2008138329</td>
<td align="left">O</td>
<td align="right">124989.76</td>
<td align="right">3316019.94</td>
<td align="left">C</td>
<td align="right">0.1010250</td>
<td align="left">Zero</td>
</tr>
<tr class="even">
<td align="left">2008138368</td>
<td align="left">O</td>
<td align="right">63180.31</td>
<td align="right">16819.69</td>
<td align="left">C</td>
<td align="right">0.7281607</td>
<td align="left">NonZero</td>
</tr>
<tr class="odd">
<td align="left">2008138496</td>
<td align="left">O</td>
<td align="right">204459.93</td>
<td align="right">15540.07</td>
<td align="left">O</td>
<td align="right">0.9354681</td>
<td align="left">NonZero</td>
</tr>
<tr class="even">
<td align="left">2008138605</td>
<td align="left">O</td>
<td align="right">3541.86</td>
<td align="right">322.00</td>
<td align="left">C</td>
<td align="right">0.6396368</td>
<td align="left">NonZero</td>
</tr>
</tbody>
</table>
<!-- rnb-chunk-end -->
<!-- rnb-text-begin -->
</div>
<div id="section-incremental-payment-simulation" class="section level2">
<h2>Incremental Payment Simulation</h2>
<p>Since I am only interested in predicting incremental payments for 
claims that were simulated to have a non-zero incremental payment, all 
claims that were closed at age 30 and were simulated to be closed at 42 
will be given an incremental payment of zero.</p>
<p>Additionally, all claims that were simulated by the Zero Payment 
Model to have a Zero payment will be given an incremental payment of 
zero.</p>
<!-- rnb-text-end -->
<!-- rnb-chunk-begin -->
<!-- rnb-source-begin eyJkYXRhIjpbIiMgc2VwYXJhdGUgemVyb3MgZnJvbSBub24gemVyb3MiLCJ6ZXJvX2NsYWltcyA8LSBmaWx0ZXIoem1fcHJlZCwgemVyb19zaW0gPT0gXCJaZXJvXCIpIiwiIiwibnptX3ByZWQgPC0gZmlsdGVyKHptX3ByZWQsIHplcm9fc2ltID09IFwiTm9uWmVyb1wiKSJdfQ== -->
<div class="sourceCode" id="section-cb22"><div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs btn-secondary btn-sm code-folding-btn pull-right float-right" data-toggle="collapse" data-target="#rcode-643E0F3622" aria-expanded="false" aria-controls="rcode-643E0F3622"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3622"><pre class="sourceCode r"><code class="sourceCode r"><span id="section-cb22-1"><a href="#section-cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># separate zeros from non zeros</span></span>
<span id="section-cb22-2"><a href="#section-cb22-2" aria-hidden="true" tabindex="-1"></a>zero_claims <span class="ot">&lt;-</span> <span class="fu">filter</span>(zm_pred, zero_sim <span class="sc">==</span> <span class="st">"Zero"</span>)</span>
<span id="section-cb22-3"><a href="#section-cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="section-cb22-4"><a href="#section-cb22-4" aria-hidden="true" tabindex="-1"></a>nzm_pred <span class="ot">&lt;-</span> <span class="fu">filter</span>(zm_pred, zero_sim <span class="sc">==</span> <span class="st">"NonZero"</span>)</span></code></pre></div></div>
<!-- rnb-source-end -->
<!-- rnb-chunk-end -->
<!-- rnb-text-begin -->
<p>Now for the final simulations I simulate all the claims that were predicted to have a non-zero incremental payment.</p>
<!-- rnb-text-end -->
<!-- rnb-chunk-begin -->
<!-- rnb-source-begin eyJkYXRhIjpbIiMjIyBRdWFzaSBQb2lzc29uIFNpbXVsYXRpb24iLCJuem1fcHJlZCR0b3RfcGRfaW5jcl9maXQgPC0gZXhwKHByZWRpY3QobnptX21vZGVsLCBuZXdkYXRhID0gbnptX3ByZWQpKSIsIiIsIiMgdXNlIG5lZ2F0aXZlIGJpbm9taWFsIHRvIHJhbmRvbWx5IGRpc3BlcnNlIGNsYWltcyBmcm9tIHByZWRpY3RlZCBmaXQiLCJuem1fcHJlZCR0b3RfcGRfaW5jcl9zaW0gPC0gc2FwcGx5KG56bV9wcmVkJHRvdF9wZF9pbmNyX2ZpdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm5iaW5vbShuID0gMSwgc2l6ZSA9IHggXiAoMS81KSwgcHJvYiA9IDEgLyAoMSArIHggXiAoNC81KSkpIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkiXX0= -->
<div class="sourceCode" id="section-cb23"><div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs btn-secondary btn-sm code-folding-btn pull-right float-right" data-toggle="collapse" data-target="#rcode-643E0F3623" aria-expanded="false" aria-controls="rcode-643E0F3623"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3623"><pre class="sourceCode r"><code class="sourceCode r"><span id="section-cb23-1"><a href="#section-cb23-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Quasi Poisson Simulation</span></span>
<span id="section-cb23-2"><a href="#section-cb23-2" aria-hidden="true" tabindex="-1"></a>nzm_pred<span class="sc">$</span>tot_pd_incr_fit <span class="ot">&lt;-</span> <span class="fu">exp</span>(<span class="fu">predict</span>(nzm_model, <span class="at">newdata =</span> nzm_pred))</span>
<span id="section-cb23-3"><a href="#section-cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="section-cb23-4"><a href="#section-cb23-4" aria-hidden="true" tabindex="-1"></a><span class="co"># use negative binomial to randomly disperse claims from predicted fit</span></span>
<span id="section-cb23-5"><a href="#section-cb23-5" aria-hidden="true" tabindex="-1"></a>nzm_pred<span class="sc">$</span>tot_pd_incr_sim <span class="ot">&lt;-</span> <span class="fu">sapply</span>(nzm_pred<span class="sc">$</span>tot_pd_incr_fit,</span>
<span id="section-cb23-6"><a href="#section-cb23-6" aria-hidden="true" tabindex="-1"></a>                                    <span class="cf">function</span>(x) {</span>
<span id="section-cb23-7"><a href="#section-cb23-7" aria-hidden="true" tabindex="-1"></a>                                      <span class="fu">rnbinom</span>(<span class="at">n =</span> <span class="dv">1</span>, <span class="at">size =</span> x <span class="sc">^</span> (<span class="dv">1</span><span class="sc">/</span><span class="dv">5</span>), <span class="at">prob =</span> <span class="dv">1</span> <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">+</span> x <span class="sc">^</span> (<span class="dv">4</span><span class="sc">/</span><span class="dv">5</span>))) </span>
<span id="section-cb23-8"><a href="#section-cb23-8" aria-hidden="true" tabindex="-1"></a>                                    })</span></code></pre></div></div>
<!-- rnb-source-end -->
<!-- rnb-chunk-end -->
<!-- rnb-text-begin -->
<!-- rnb-text-end -->
<!-- rnb-chunk-begin -->
<!-- rnb-source-begin eyJkYXRhIjpbImNsb3NlZF9jbG9zZWRfZGF0YSR0b3RfcGRfaW5jcl9zaW0gPC0gMCIsInplcm9fY2xhaW1zJHRvdF9wZF9pbmNyX3NpbSA8LSAwIiwiIiwiY2xvc2VkX2Nsb3NlZF9kYXRhJHNpbV90eXBlIDwtIFwiQ2xvc2VfQ2xvc2VcIiIsInplcm9fY2xhaW1zJHNpbV90eXBlIDwtIFwiWmVyb1wiIiwibnptX3ByZWQkc2ltX3R5cGUgPC0gXCJOb25fWmVyb1wiIiwiIiwiIiwiY29scyA8LSBjKFwic2ltX251bVwiLCBcImNsYWltX251bWJlclwiLCBcInN0YXR1c19hY3RcIiwgXCJ0b3RfcGRfaW5jcl9zaW1cIiwgXCJzaW1fdHlwZVwiKSIsIiIsInNpbV8xIDwtIGNsb3NlZF9jbG9zZWRfZGF0YVssIGNvbHNdIiwic2ltXzIgPC0gemVyb19jbGFpbXNbLCBjb2xzXSIsInNpbV8zIDwtIG56bV9wcmVkWywgY29sc10iLCIiLCIiLCJmdWxsX3NpbSA8LSByYmluZChzaW1fMSwgc2ltXzIsIHNpbV8zKSIsIiIsImthYmxlKFxuICBmdWxsX3NpbVtzYW1wbGUoMTpucm93KGZ1bGxfc2ltKSwgMjApLCBdLCBcbiAgcm93Lm5hbWVzID0gRkFMU0UsXG4gIGNvbC5uYW1lcyA9IGMoXCJTaW0gTnVtXCIsIFwiQ2xhaW0gTnVtXCIsIFwiU2ltIFN0YXR1c1wiLCBcIlNpbSBQYXltZW50XCIsIFwiU2ltIFR5cGVcIikpIl19 -->
<div class="sourceCode" id="section-cb24"><div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs btn-secondary btn-sm code-folding-btn pull-right float-right" data-toggle="collapse" data-target="#rcode-643E0F3624" aria-expanded="false" aria-controls="rcode-643E0F3624"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3624"><pre class="sourceCode r"><code class="sourceCode r"><span id="section-cb24-1"><a href="#section-cb24-1" aria-hidden="true" tabindex="-1"></a>closed_closed_data<span class="sc">$</span>tot_pd_incr_sim <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="section-cb24-2"><a href="#section-cb24-2" aria-hidden="true" tabindex="-1"></a>zero_claims<span class="sc">$</span>tot_pd_incr_sim <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="section-cb24-3"><a href="#section-cb24-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="section-cb24-4"><a href="#section-cb24-4" aria-hidden="true" tabindex="-1"></a>closed_closed_data<span class="sc">$</span>sim_type <span class="ot">&lt;-</span> <span class="st">"Close_Close"</span></span>
<span id="section-cb24-5"><a href="#section-cb24-5" aria-hidden="true" tabindex="-1"></a>zero_claims<span class="sc">$</span>sim_type <span class="ot">&lt;-</span> <span class="st">"Zero"</span></span>
<span id="section-cb24-6"><a href="#section-cb24-6" aria-hidden="true" tabindex="-1"></a>nzm_pred<span class="sc">$</span>sim_type <span class="ot">&lt;-</span> <span class="st">"Non_Zero"</span></span>
<span id="section-cb24-7"><a href="#section-cb24-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="section-cb24-8"><a href="#section-cb24-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="section-cb24-9"><a href="#section-cb24-9" aria-hidden="true" tabindex="-1"></a>cols <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"sim_num"</span>, <span class="st">"claim_number"</span>, <span class="st">"status_act"</span>, <span class="st">"tot_pd_incr_sim"</span>, <span class="st">"sim_type"</span>)</span>
<span id="section-cb24-10"><a href="#section-cb24-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="section-cb24-11"><a href="#section-cb24-11" aria-hidden="true" tabindex="-1"></a>sim_1 <span class="ot">&lt;-</span> closed_closed_data[, cols]</span>
<span id="section-cb24-12"><a href="#section-cb24-12" aria-hidden="true" tabindex="-1"></a>sim_2 <span class="ot">&lt;-</span> zero_claims[, cols]</span>
<span id="section-cb24-13"><a href="#section-cb24-13" aria-hidden="true" tabindex="-1"></a>sim_3 <span class="ot">&lt;-</span> nzm_pred[, cols]</span>
<span id="section-cb24-14"><a href="#section-cb24-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="section-cb24-15"><a href="#section-cb24-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="section-cb24-16"><a href="#section-cb24-16" aria-hidden="true" tabindex="-1"></a>full_sim <span class="ot">&lt;-</span> <span class="fu">rbind</span>(sim_1, sim_2, sim_3)</span>
<span id="section-cb24-17"><a href="#section-cb24-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="section-cb24-18"><a href="#section-cb24-18" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(</span>
<span id="section-cb24-19"><a href="#section-cb24-19" aria-hidden="true" tabindex="-1"></a>  full_sim[<span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(full_sim), <span class="dv">20</span>), ], </span>
<span id="section-cb24-20"><a href="#section-cb24-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">row.names =</span> <span class="cn">FALSE</span>,</span>
<span id="section-cb24-21"><a href="#section-cb24-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">"Sim Num"</span>, <span class="st">"Claim Num"</span>, <span class="st">"Sim Status"</span>, <span class="st">"Sim Payment"</span>, <span class="st">"Sim Type"</span>))</span></code></pre></div></div>
<!-- rnb-source-end -->
<table class="table table-condensed">
<thead>
<tr class="header">
<th align="left">Sim Num</th>
<th align="left">Claim Num</th>
<th align="left">Sim Status</th>
<th align="right">Sim Payment</th>
<th align="left">Sim Type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">V1436</td>
<td align="left">2008143184</td>
<td align="left">C</td>
<td align="right">0</td>
<td align="left">Close_Close</td>
</tr>
<tr class="even">
<td align="left">V1907</td>
<td align="left">2008141841</td>
<td align="left">C</td>
<td align="right">0</td>
<td align="left">Close_Close</td>
</tr>
<tr class="odd">
<td align="left">V1753</td>
<td align="left">2009155522</td>
<td align="left">O</td>
<td align="right">282069</td>
<td align="left">Non_Zero</td>
</tr>
<tr class="even">
<td align="left">V1109</td>
<td align="left">2008146393</td>
<td align="left">C</td>
<td align="right">0</td>
<td align="left">Close_Close</td>
</tr>
<tr class="odd">
<td align="left">V1587</td>
<td align="left">2009152667</td>
<td align="left">C</td>
<td align="right">0</td>
<td align="left">Close_Close</td>
</tr>
<tr class="even">
<td align="left">V1530</td>
<td align="left">2008138722</td>
<td align="left">C</td>
<td align="right">0</td>
<td align="left">Close_Close</td>
</tr>
<tr class="odd">
<td align="left">V404</td>
<td align="left">2009155055</td>
<td align="left">C</td>
<td align="right">0</td>
<td align="left">Close_Close</td>
</tr>
<tr class="even">
<td align="left">V226</td>
<td align="left">2009156783</td>
<td align="left">O</td>
<td align="right">13473</td>
<td align="left">Non_Zero</td>
</tr>
<tr class="odd">
<td align="left">V550</td>
<td align="left">2008144828</td>
<td align="left">C</td>
<td align="right">0</td>
<td align="left">Close_Close</td>
</tr>
<tr class="even">
<td align="left">V306</td>
<td align="left">2009149406</td>
<td align="left">O</td>
<td align="right">145973</td>
<td align="left">Non_Zero</td>
</tr>
<tr class="odd">
<td align="left">V1921</td>
<td align="left">2009156607</td>
<td align="left">C</td>
<td align="right">0</td>
<td align="left">Close_Close</td>
</tr>
<tr class="even">
<td align="left">V798</td>
<td align="left">2008142796</td>
<td align="left">C</td>
<td align="right">0</td>
<td align="left">Close_Close</td>
</tr>
<tr class="odd">
<td align="left">V1642</td>
<td align="left">2008141299</td>
<td align="left">C</td>
<td align="right">0</td>
<td align="left">Close_Close</td>
</tr>
<tr class="even">
<td align="left">V298</td>
<td align="left">2008145434</td>
<td align="left">O</td>
<td align="right">185065</td>
<td align="left">Non_Zero</td>
</tr>
<tr class="odd">
<td align="left">V853</td>
<td align="left">2008146293</td>
<td align="left">C</td>
<td align="right">0</td>
<td align="left">Close_Close</td>
</tr>
<tr class="even">
<td align="left">V1249</td>
<td align="left">2009153881</td>
<td align="left">C</td>
<td align="right">0</td>
<td align="left">Close_Close</td>
</tr>
<tr class="odd">
<td align="left">V1383</td>
<td align="left">2008149110</td>
<td align="left">C</td>
<td align="right">0</td>
<td align="left">Close_Close</td>
</tr>
<tr class="even">
<td align="left">V1691</td>
<td align="left">2008143511</td>
<td align="left">C</td>
<td align="right">0</td>
<td align="left">Close_Close</td>
</tr>
<tr class="odd">
<td align="left">V683</td>
<td align="left">2008142919</td>
<td align="left">C</td>
<td align="right">0</td>
<td align="left">Close_Close</td>
</tr>
<tr class="even">
<td align="left">V1186</td>
<td align="left">2008140829</td>
<td align="left">C</td>
<td align="right">0</td>
<td align="left">Close_Close</td>
</tr>
</tbody>
</table>
<!-- rnb-chunk-end -->
<!-- rnb-text-begin -->
</div>
<div id="section-results" class="section level2">
<h2>Results</h2>
<div id="section-all-claims-aggregated-by-simulation" class="section level3">
<h3>All Claims Aggregated by Simulation</h3>
<!-- rnb-text-end -->
<!-- rnb-chunk-begin -->
<!-- rnb-source-begin eyJkYXRhIjpbIiMgZmluZCBhY3R1YWwgbnVtYmVyIG9mIG9wZW4gY2xhaW1zIGFuZCBpbmNyZW1lbnRhbCBwYXltZW50IGRvbGxhcnMiLCJwcmVkX2RhdGFfYWN0dWFscyA8LSBtdXRhdGUoY21fcHJlZF9kYXRhLCBzdGF0dXNfYWN0ID0gaWZlbHNlKHN0YXR1c19hY3QgPT0gXCJDXCIsIDAsIDEpKSIsIiIsIm9wZW5fYWN0dWFsIDwtIHN1bShwcmVkX2RhdGFfYWN0dWFscyRzdGF0dXNfYWN0KSIsInBheW1lbnRzX2FjdHVhbCA8LSBzdW0ocHJlZF9kYXRhX2FjdHVhbHMkdG90X3BkX2luY3JfYWN0KSJdfQ== -->
<div class="sourceCode" id="section-cb25"><div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs btn-secondary btn-sm code-folding-btn pull-right float-right" data-toggle="collapse" data-target="#rcode-643E0F3625" aria-expanded="false" aria-controls="rcode-643E0F3625"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3625"><pre class="sourceCode r"><code class="sourceCode r"><span id="section-cb25-1"><a href="#section-cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># find actual number of open claims and incremental payment dollars</span></span>
<span id="section-cb25-2"><a href="#section-cb25-2" aria-hidden="true" tabindex="-1"></a>pred_data_actuals <span class="ot">&lt;-</span> <span class="fu">mutate</span>(cm_pred_data, <span class="at">status_act =</span> <span class="fu">ifelse</span>(status_act <span class="sc">==</span> <span class="st">"C"</span>, <span class="dv">0</span>, <span class="dv">1</span>))</span>
<span id="section-cb25-3"><a href="#section-cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="section-cb25-4"><a href="#section-cb25-4" aria-hidden="true" tabindex="-1"></a>open_actual <span class="ot">&lt;-</span> <span class="fu">sum</span>(pred_data_actuals<span class="sc">$</span>status_act)</span>
<span id="section-cb25-5"><a href="#section-cb25-5" aria-hidden="true" tabindex="-1"></a>payments_actual <span class="ot">&lt;-</span> <span class="fu">sum</span>(pred_data_actuals<span class="sc">$</span>tot_pd_incr_act)</span></code></pre></div></div>
<!-- rnb-source-end -->
<!-- rnb-chunk-end -->
<!-- rnb-text-begin -->
<p>The blue dashed vertical line marks the actual number of open claims 
in the test data at 42 months development. The white histogram shows the
 simulated distribution of open claims at 42 as determined from the 
simulation based on the claim closure model.</p>
<!-- rnb-text-end -->
<!-- rnb-chunk-begin -->
<!-- rnb-source-begin eyJkYXRhIjpbImZ1bGxfc2ltX2FnZyA8LSBtdXRhdGUoZnVsbF9zaW0sIG9wZW4gPSBpZmVsc2Uoc3RhdHVzX2FjdCA9PSBcIkNcIiwgMCwgMSkpICU+JVxuICAgICAgICAgICAgICAgICAgZ3JvdXBfYnkoc2ltX251bSkgJT4lXG4gICAgICAgICAgICAgICAgICBzdW1tYXJpc2UobiA9IG4oKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVuX2NsYWltcyA9IHN1bShvcGVuKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNyZW1lbnRhbF9wYWlkID0gc3VtKHRvdF9wZF9pbmNyX3NpbSkpIiwiIiwiIiwiZ2dwbG90KGZ1bGxfc2ltX2FnZywgYWVzKHggPSBvcGVuX2NsYWltcykpICtcbiAgZ2VvbV9oaXN0b2dyYW0oZmlsbCA9IFwid2hpdGVcIiwgY29sb3VyID0gXCJibGFja1wiKSArXG4gIGdndGl0bGUoXCJIaXN0b2dyYW0gb2YgU2ltdWxhdGVkIE9wZW4gQ2xhaW0gQ291bnRzXCIpICtcbiAgeWxhYihcIk51bWJlciBvZiBPYnNlcnZhdGlvbnNcIikgK1xuICB4bGFiKFwiT3BlbiBDbGFpbSBDb3VudHNcIikgK1xuICBnZW9tX3ZsaW5lKHhpbnRlcmNlcHQgPSBvcGVuX2FjdHVhbCwgc2l6ZSA9IDEsIFxuICAgICAgICAgICAgIGNvbG91ciA9IFwiYmx1ZVwiLCBsaW5ldHlwZSA9IFwibG9uZ2Rhc2hcIikiXX0= -->
<div class="sourceCode" id="section-cb26"><div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs btn-secondary btn-sm code-folding-btn pull-right float-right" data-toggle="collapse" data-target="#rcode-643E0F3626" aria-expanded="false" aria-controls="rcode-643E0F3626"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3626"><pre class="sourceCode r"><code class="sourceCode r"><span id="section-cb26-1"><a href="#section-cb26-1" aria-hidden="true" tabindex="-1"></a>full_sim_agg <span class="ot">&lt;-</span> <span class="fu">mutate</span>(full_sim, <span class="at">open =</span> <span class="fu">ifelse</span>(status_act <span class="sc">==</span> <span class="st">"C"</span>, <span class="dv">0</span>, <span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="section-cb26-2"><a href="#section-cb26-2" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">group_by</span>(sim_num) <span class="sc">%&gt;%</span></span>
<span id="section-cb26-3"><a href="#section-cb26-3" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="section-cb26-4"><a href="#section-cb26-4" aria-hidden="true" tabindex="-1"></a>                            <span class="at">open_claims =</span> <span class="fu">sum</span>(open),</span>
<span id="section-cb26-5"><a href="#section-cb26-5" aria-hidden="true" tabindex="-1"></a>                            <span class="at">incremental_paid =</span> <span class="fu">sum</span>(tot_pd_incr_sim))</span>
<span id="section-cb26-6"><a href="#section-cb26-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="section-cb26-7"><a href="#section-cb26-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="section-cb26-8"><a href="#section-cb26-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(full_sim_agg, <span class="fu">aes</span>(<span class="at">x =</span> open_claims)) <span class="sc">+</span></span>
<span id="section-cb26-9"><a href="#section-cb26-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">fill =</span> <span class="st">"white"</span>, <span class="at">colour =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="section-cb26-10"><a href="#section-cb26-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Histogram of Simulated Open Claim Counts"</span>) <span class="sc">+</span></span>
<span id="section-cb26-11"><a href="#section-cb26-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Number of Observations"</span>) <span class="sc">+</span></span>
<span id="section-cb26-12"><a href="#section-cb26-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Open Claim Counts"</span>) <span class="sc">+</span></span>
<span id="section-cb26-13"><a href="#section-cb26-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> open_actual, <span class="at">size =</span> <span class="dv">1</span>, </span>
<span id="section-cb26-14"><a href="#section-cb26-14" aria-hidden="true" tabindex="-1"></a>             <span class="at">colour =</span> <span class="st">"blue"</span>, <span class="at">linetype =</span> <span class="st">"longdash"</span>)</span></code></pre></div></div>
<!-- rnb-source-end -->
<!-- rnb-plot-begin -->
<p><img src="index_files/sim_v_actual-1.png" width="672"></p>
<!-- rnb-plot-end -->
<!-- rnb-chunk-end -->
<!-- rnb-text-begin -->
<p>The blue dashed vertical line marks the actual incremental payments 
in the test data between age 30 and 42. The white histogram shows the 
simulated distribution of incremental payments between age 30 and 42 
months for all claims in the test data. The simulation is based on the 
incremental payment model.</p>
<!-- rnb-text-end -->
<!-- rnb-chunk-begin -->
<!-- rnb-source-begin eyJkYXRhIjoiZ2dwbG90KGZ1bGxfc2ltX2FnZywgYWVzKHggPSBpbmNyZW1lbnRhbF9wYWlkKSkgK1xuICBnZW9tX2hpc3RvZ3JhbShmaWxsID0gXCJ3aGl0ZVwiLCBjb2xvdXIgPSBcImJsYWNrXCIpICtcbiAgZ2d0aXRsZShcIkhpc3RvZ3JhbSBvZiBTaW11bGF0ZWQgSW5jcmVtZW50YWwgUGF5bWVudHNcIikgK1xuICB5bGFiKFwiTnVtYmVyIG9mIE9ic2VydmF0aW9uc1wiKSArXG4gIHhsYWIoXCJJbmNyZW1lbnRhbCBQYXltZW50c1wiKSArXG4gIGdlb21fdmxpbmUoeGludGVyY2VwdCA9IHBheW1lbnRzX2FjdHVhbCwgc2l6ZSA9IDEsIFxuICAgICAgICAgICAgIGNvbG91ciA9IFwiYmx1ZVwiLCBsaW5ldHlwZSA9IFwibG9uZ2Rhc2hcIikgK1xuICBzY2FsZV94X2NvbnRpbnVvdXMobGFiZWxzID0gZG9sbGFyKSJ9 -->
<div class="sourceCode" id="section-cb27"><div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs btn-secondary btn-sm code-folding-btn pull-right float-right" data-toggle="collapse" data-target="#rcode-643E0F3627" aria-expanded="false" aria-controls="rcode-643E0F3627"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3627"><pre class="sourceCode r"><code class="sourceCode r"><span id="section-cb27-1"><a href="#section-cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(full_sim_agg, <span class="fu">aes</span>(<span class="at">x =</span> incremental_paid)) <span class="sc">+</span></span>
<span id="section-cb27-2"><a href="#section-cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">fill =</span> <span class="st">"white"</span>, <span class="at">colour =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="section-cb27-3"><a href="#section-cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Histogram of Simulated Incremental Payments"</span>) <span class="sc">+</span></span>
<span id="section-cb27-4"><a href="#section-cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Number of Observations"</span>) <span class="sc">+</span></span>
<span id="section-cb27-5"><a href="#section-cb27-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Incremental Payments"</span>) <span class="sc">+</span></span>
<span id="section-cb27-6"><a href="#section-cb27-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> payments_actual, <span class="at">size =</span> <span class="dv">1</span>, </span>
<span id="section-cb27-7"><a href="#section-cb27-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">colour =</span> <span class="st">"blue"</span>, <span class="at">linetype =</span> <span class="st">"longdash"</span>) <span class="sc">+</span></span>
<span id="section-cb27-8"><a href="#section-cb27-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> dollar)</span></code></pre></div></div>
<!-- rnb-source-end -->
<!-- rnb-plot-begin -->
<p><img src="index_files/plot-1.png" width="672"></p>
<!-- rnb-plot-end -->
<!-- rnb-chunk-end -->
<!-- rnb-text-begin -->
</div>
<div id="section-individual-claim" class="section level3">
<h3>Individual Claim</h3>
<p>The blue dashed vertical line marks the actual incremental payments in the test data for the claim in the <code>Select Claim Number</code> input box between age 30 and 42.</p>
<!-- rnb-text-end -->
<!-- rnb-chunk-begin -->
<!-- rnb-source-begin eyJkYXRhIjoic2VsZWN0SW5wdXQoXG4gIFwic2VsX2NsYWltXCIsXG4gIFwiU2VsZWN0IENsYWltIG51bWJlclwiLFxuICBjaG9pY2VzID0gdW5pcXVlKGNsYWltcyRjbGFpbV9udW1iZXIpWzE6NTBdLFxuICBzZWxlY3RlZCA9IDIwMDgxNDYxODRcbikifQ== -->
<div class="sourceCode" id="section-cb28"><div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs btn-secondary btn-sm code-folding-btn pull-right float-right" data-toggle="collapse" data-target="#rcode-643E0F3628" aria-expanded="false" aria-controls="rcode-643E0F3628"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3628"><pre class="sourceCode r"><code class="sourceCode r"><span id="section-cb28-1"><a href="#section-cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">selectInput</span>(</span>
<span id="section-cb28-2"><a href="#section-cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"sel_claim"</span>,</span>
<span id="section-cb28-3"><a href="#section-cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Select Claim number"</span>,</span>
<span id="section-cb28-4"><a href="#section-cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">choices =</span> <span class="fu">unique</span>(claims<span class="sc">$</span>claim_number)[<span class="dv">1</span><span class="sc">:</span><span class="dv">50</span>],</span>
<span id="section-cb28-5"><a href="#section-cb28-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">selected =</span> <span class="dv">2008146184</span></span>
<span id="section-cb28-6"><a href="#section-cb28-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div></div>
<!-- rnb-source-end -->
<div class="form-group shiny-input-container">
<label class="control-label" id="sel_claim-label" for="sel_claim-selectized">Select Claim number</label>
<div>
<select id="sel_claim" tabindex="-1" style="display: none;" class="selectized shiny-bound-input"><option value="2008137571" selected="selected">2008137571</option></select><div class="selectize-control single plugin-selectize-plugin-a11y"><div class="selectize-input items full has-options has-items"><div class="item" data-value="2008137571">2008137571</div><input type="text" autocomplete="off" tabindex="" id="sel_claim-selectized" style="width: 4px;" role="combobox" aria-expanded="false" haspopup="listbox" aria-owns="w5iegez5xm"></div><div class="selectize-dropdown single plugin-selectize-plugin-a11y" style="display: none;"><div class="selectize-dropdown-content" role="listbox" id="w5iegez5xm"></div></div></div>
<script type="application/json" data-for="sel_claim" data-nonempty="">{"plugins":["selectize-plugin-a11y"]}</script>
</div>
</div>
<!-- rnb-source-begin eyJkYXRhIjpbInBsb3RfZGF0YSA8LSByZWFjdGl2ZSh7XG4gIGluZGl2IDwtIGZ1bGxfc2ltW2Z1bGxfc2ltJGNsYWltX251bWJlciA9PSBpbnB1dCRzZWxfY2xhaW0sIF1cbiAgaW5kaXZfYWN0IDwtIGNsYWltc1tjbGFpbXMkY2xhaW1fbnVtYmVyID09IGlucHV0JHNlbF9jbGFpbSwgXCJ0b3RfcGRfaW5jcl9hY3RcIl1cbiAgXG4gIGxpc3QoXG4gICAgaW5kaXYsXG4gICAgaW5kaXZfYWN0XG4gIClcbn0pIiwiIiwicmVuZGVyUGxvdCh7XG4gIGdncGxvdChwbG90X2RhdGEoKVtbMV1dLCBhZXMoeCA9IHRvdF9wZF9pbmNyX3NpbSkpICtcbiAgICBnZW9tX2hpc3RvZ3JhbShmaWxsID0gXCJ3aGl0ZVwiLCBjb2xvdXIgPSBcImJsYWNrXCIpICtcbiAgICBnZ3RpdGxlKHBhc3RlMChcIkhpc3RvZ3JhbSBvZiBTaW11bGF0ZWQgSW5jcmVtZW50YWwgUGF5bWVudHMgZm9yIGNsYWltIFwiLCBpbnB1dCRzZWxfY2xhaW0pKSArXG4gICAgeWxhYihcIk51bWJlciBvZiBPYnNlcnZhdGlvbnNcIikgK1xuICAgIHhsYWIoXCJJbmNyZW1lbnRhbCBQYXltZW50c1wiKSArXG4gICAgZ2VvbV92bGluZSh4aW50ZXJjZXB0ID0gcGxvdF9kYXRhKClbWzJdXSwgc2l6ZSA9IDEsIFxuICAgICAgICAgICAgICAgY29sb3VyID0gXCJibHVlXCIsIGxpbmV0eXBlID0gXCJsb25nZGFzaFwiKSArXG4gICAgc2NhbGVfeF9jb250aW51b3VzKGxhYmVscyA9IGRvbGxhcilcbn0pIl19 -->
<div class="sourceCode" id="section-cb29"><div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs btn-secondary btn-sm code-folding-btn pull-right float-right" data-toggle="collapse" data-target="#rcode-643E0F3629" aria-expanded="false" aria-controls="rcode-643E0F3629"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3629"><pre class="sourceCode r"><code class="sourceCode r"><span id="section-cb29-1"><a href="#section-cb29-1" aria-hidden="true" tabindex="-1"></a>plot_data <span class="ot">&lt;-</span> <span class="fu">reactive</span>({</span>
<span id="section-cb29-2"><a href="#section-cb29-2" aria-hidden="true" tabindex="-1"></a>  indiv <span class="ot">&lt;-</span> full_sim[full_sim<span class="sc">$</span>claim_number <span class="sc">==</span> input<span class="sc">$</span>sel_claim, ]</span>
<span id="section-cb29-3"><a href="#section-cb29-3" aria-hidden="true" tabindex="-1"></a>  indiv_act <span class="ot">&lt;-</span> claims[claims<span class="sc">$</span>claim_number <span class="sc">==</span> input<span class="sc">$</span>sel_claim, <span class="st">"tot_pd_incr_act"</span>]</span>
<span id="section-cb29-4"><a href="#section-cb29-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="section-cb29-5"><a href="#section-cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(</span>
<span id="section-cb29-6"><a href="#section-cb29-6" aria-hidden="true" tabindex="-1"></a>    indiv,</span>
<span id="section-cb29-7"><a href="#section-cb29-7" aria-hidden="true" tabindex="-1"></a>    indiv_act</span>
<span id="section-cb29-8"><a href="#section-cb29-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="section-cb29-9"><a href="#section-cb29-9" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="section-cb29-10"><a href="#section-cb29-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="section-cb29-11"><a href="#section-cb29-11" aria-hidden="true" tabindex="-1"></a><span class="fu">renderPlot</span>({</span>
<span id="section-cb29-12"><a href="#section-cb29-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">plot_data</span>()[[<span class="dv">1</span>]], <span class="fu">aes</span>(<span class="at">x =</span> tot_pd_incr_sim)) <span class="sc">+</span></span>
<span id="section-cb29-13"><a href="#section-cb29-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">fill =</span> <span class="st">"white"</span>, <span class="at">colour =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="section-cb29-14"><a href="#section-cb29-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggtitle</span>(<span class="fu">paste0</span>(<span class="st">"Histogram of Simulated Incremental Payments for claim "</span>, input<span class="sc">$</span>sel_claim)) <span class="sc">+</span></span>
<span id="section-cb29-15"><a href="#section-cb29-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ylab</span>(<span class="st">"Number of Observations"</span>) <span class="sc">+</span></span>
<span id="section-cb29-16"><a href="#section-cb29-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">xlab</span>(<span class="st">"Incremental Payments"</span>) <span class="sc">+</span></span>
<span id="section-cb29-17"><a href="#section-cb29-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="fu">plot_data</span>()[[<span class="dv">2</span>]], <span class="at">size =</span> <span class="dv">1</span>, </span>
<span id="section-cb29-18"><a href="#section-cb29-18" aria-hidden="true" tabindex="-1"></a>               <span class="at">colour =</span> <span class="st">"blue"</span>, <span class="at">linetype =</span> <span class="st">"longdash"</span>) <span class="sc">+</span></span>
<span id="section-cb29-19"><a href="#section-cb29-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> dollar)</span>
<span id="section-cb29-20"><a href="#section-cb29-20" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div></div>
<!-- rnb-source-end -->
<p></p><div id="out551e26bc7cf4e0a1" class="shiny-plot-output shiny-bound-output" style="width:100%;height:400px;" aria-live="polite"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA44AAAGQCAMAAADWas5kAAAA/FBMVEUAAAAAADoAAGYAAP8AOpAAZmYAZpAAZrYzMzM6AAA6ADo6AGY6OgA6OmY6OpA6ZmY6kJA6kLY6kNtNTU1NTW5NTY5NbqtNjshmAABmADpmAGZmOgBmOpBmkJBmtttmtv9uTU1uTY5ujshuq+SOTU2OTY6ObquOjsiOq6uOq+SOyP+QOgCQOjqQOmaQkDqQ2/+rbk2rjqur5P+2ZgC2Zjq2/7a2/9u2///Ijk3Ijm7Iq27Iq6vIyP/I///bkDrbtmbbtrbb25Db/7bb/9vb///kq27kq47kyI7k5Kvk///r6+v/tmb/yI7/25D/5Kv//7b//8j//9v//+T///9WbwRFAAAACXBIWXMAAAsSAAALEgHS3X78AAAZMElEQVR4nO2dD1/b2JlGFcKsCdlJW5iZQLqtZzfTTsekSxZ3CtnOuJ0pSZsax5D7/b9LpSvJkg02F7+61pHznF8isNCfY716uNKVLBInhICQtC0ghChRHIXAoDgKgUFxFAKD4igEBsVRCAwPiuPk6Xk+zL9Zl2Gye5l+uTlJkqRXLvXOVd3B9Ph05c8DKeafPEkdkken6y6meCvLFu/uFM1W2vfvf+d89iUd+ah6Z2MvNc7kkgM/w+5l+cr+5gWV9eK4OOpBFIFyw162L/ZWreqONVjiWJupjKP/Mg7O490y9043x/So79eYvv9sE+RfspGjLJbTo3Q42U+zuOMXkX0ZzzbSeDaJ2EZaiGMxS74rL5t/o3G8Oek/fAkrLVbpjdMGNV1j9kbSyYov2QzZt6PkF8Ws+RvNYuqGB8Ws/lU1idg21j9Y9cdT06PsoKo40Eq//MdJf/L5r3fOx/449ObkN0+SXjq6+O3upysO1aqGMV1YbcJs0dUakl6+hnS4kx/DfTaL4+Tp//pjt3yBfrX5ZPXV5mPySfNF5Wq34piPzporN+rdu4TiuDJbc/7m/epn49xMf+HdlaS5KgJYfPEKaU7/dlkmeeQPg7PhzauyDfbjqknEtvGwOPozrXTvLH6rp/uP35uyo68sC+nxVrZ79svjsZuT3cvpUTrRvt+fiunKnSndt/0O6nfY2YRVHIuFZCOynXWUTZJ+mZ1hTZ4clKv1r/rlZLWlFWOKSWey+VLd7GB1Z2Flq5eQv/Ni9vJNPem78j0u6i9shoxRseVmccxOIWfL9Jvav0/fbk+P/zOpXrk1Dw1EB1i7dfTHTa5szLI9KttFs9/6xU5X/Mov/xfTFjtgQZrIov2YTVhrHfOFLK6hah33/WFemYz81cJqy1Xun9YWWpOY68opZr3tM7+E4p2XFtXPM8b1TBUrWtgMKaOdczcfx+nRQX7uOMuaP030L7JlT1+cVz9SHLeV9Q9Ws8atOCrLT4ZG+Zd8D3qS7eQL++G4NsFskfunt3f/Yg35Qsrv0m9H83HMpxxVASgmqy8tH1PPeLVUV9+x89HpgaobHbjVS8jfeTH7wptasHl0Zxx9Cz8fx7KRrJT8q1F5fDv3SnHcVkwXOoqjt4XW8WneM3hf65j3HOZ78p1xLBZSrsHleb4Vx1p7VEy2sLTqhzW1xTgWo9NW6M+vTlcvoZKvt47lD2Y21YoW45i3gnd35SzEserEqb9SHLeVteNY9MX7nW7+3DFrL9MdbnirdZw/d8zOqMqTqNqERY9/lrN8IdkaimPIhXPHPCH+bG1/doo5v7RiTBmm4vrB8HbrWIxOd/nfPLt0K5dQuwoxqc4dZyfEpU21osXfSvuzCz3VhY6bk/rBajbvpPBwC6+c4ri9GHtWsx6Ifq1n9bPjIhdJ8qt8V643C0UnZLkzDZPs6vZCgNJEJ798ce5HFgtJsr6hcg2/XGwda32ZxWT1pRVdv/mk2aKKpS7GsRiddd723eolVD2r5errb2pmU61oYTMMfX9Yv+wtLr7M3wYwSvKf5W92/pXiuL00fJPc0uvinUG7umiPBuNYO4jrMKMltwkJEZ8mW8eR5e5PBpMnnf99IjqMPtEhBAbFUQgMiqMQGBRHITA8KI7/ejiPH68xU3TWeSexITohpYhOdqnNxHFLN14EiE5IKaKT4miBKEV0QkoRnRRHC0QpohNSiuikOFogShGdkFJEJ8XRAlGK6ISUIjopjhaIUkQnpBTRqStx1IWOUIhOSCmik+JogVhRohNSiuikOFogVpTohJQiOimOFogVJTohpYhOiqMFYkWJTkgpolPMOF5/c/jljx9fHz531UBxjA3RCSlFdIoZx7cD9/bl1Ut3MagGimNsiE5IKaJT5IPVq8G7M3f1sho4t7e395AD24LHj9eYSYhPk7vjeP3792+yEFYDP3qN0Kt1DIXohJQiOkVtHa9/96O71TqGxzGp8fhx/VVilW4IYkWJTkgpolPMOH747x+dM5w71pc5f7CqOC6H6ISUIjrFjOPF4eHhS0PPquK4DkQnpBTRiXzdUXFcB6ITUoropDhaIFaU6ISUIjp1JY7zKI7LITohpYhOiqMFYkWJTkgpopPiaIFYUaITUoropDhaIFaU6ISUIjopjhaIFSU6IaWIToqjBWJFiU5IKaJTV+KoCx2hEJ2QUkQnxdECsaJEJ6QU0UlxtECsKNEJKUV0UhwtECtKdEJKEZ0URwvEihKdkFJEJ8XRArGiRCekFNFJcbRArCjRCSlFdFIcLRArSnRCShGdFEcLxIoSnZBSRCfF0QKxokQnpBTRSXG0QKwo0QkpRXRSHC0QK0p0QkoRnRRHC8SKEp2QUkQnxdECsaJEJ6QU0akrcZxHcVwO0QkpRXRSHC0QK0p0QkoRnRRHC8SKEp2QUkQnxdECsaJEJ6QU0UlxtECsKNEJKUV0UhwtECtKdEJKEZ26Ekdd6AiF6ISUIjopjhaIFSU6IaWIToqjBWJFiU5IKaKT4miBWFGiE1KK6KQ4WiBWlOiElCI6KY4WiBUlOiGliE6txDGQFXGMsDYhtga1jhSITkgpopMOVi0QK0p0QkoRnRRHC8SKEp2QUkQnxdECsaJEJ6QU0UlxtECsKNEJKUV0UhwtECtKdEJKEZ0URwvEihKdkFJEp67EcR7FcTlEJ6QU0UlxtECsKNEJKUV0UhwtECtKdEJKEZ0URwvEihKdkFJEJ8XRArGiRCekFNFJcbRArCjRCSlFdOpKHHWhIxSiE1KK6KQ4WiBWlOiElCI6KY4WiBUlOiGliE6KowViRYlOSCmik+JogVhRohNSiuikOFogVpTohJQiOimOFogVJTohpYhOiqMFYkWJTkgpopPiaIFYUaITUoropDhaIFaU6ISUIjopjhaIFSU6IaWIToqjBWJFiU5IKaKT4miBWFGiE1KK6KQ4WiBWlOiElCI6dSWO8yiOyyE6IaWIToqjBWJFiU5IKaKT4miBWFGiE1KK6KQ4WiBWlOiElCI6KY4WiBUlOiGliE6KowViRYlOSCmiU1fiqAsdoRCdkFJEJ8XRArGiRCekFNFJcbRArCjRCSlFdIobx7cD9/H14Rdn6eC58wPFMTZEJ6QU0SlqHC8OB+762/Sbq5fuYuAHimNsiE5IKaJTzDhe/5C2jh++Pvzq/buzNJF+4Nze3t6dLeltVsQxcAlCfJIsPVhNE/jhuzdZEt/kcXRqHaNCdEJKEZ2inzs6VzaM7xTHTUB0QkoRnaLHMWsgBzp33BxEJ6QU0WkTPavPnXpWNwfRCSlFdNJ1RwvEihKdkFJEJ8XRArGiRCekFNFJcbRArCjRCSlFdFIcLRArSnRCShGduhLHeRTH5RCdkFJEJ8XRArGiRCekFNFJcbRArCjRCSlFdFIcLRArSnRCShGdFEcLxIoSnZBSRCfF0QKxokQnpBTRqStx1IWOUIhOSCmik+JogVhRohNSiuikOFogVpTohJQiOimOFogVJTohpYhOiqMFYkWJTkgpolPzcRz3pkdJX3FsC6ITUoro1Hgcb16djnqTZ5eKY0sQnZBSRKfG4zh9cT48SAeKY0sQnZBSRKfmW8c/fn98qtaxPYhOSCmiU4Rzx2T35+PTVWlUHGNCdEJKEZ3Us2qBWFGiE1KK6NR8HEdJyo7OHduC6ISUIjo135Vzz4Gq4hgZohNSiugUo2dVcWwTohNSiujU/MHqcPUtAGvGcR7FcTlEJ6QU0an51vEoyrmj4hgK0QkpRXTqSs+q4hgK0QkpRXRqPo5Z87i6cVQcY0J0QkoRnZq/K+ckPXcc7zZ9V47iGArRCSlFdIrTs9r8PauKYyhEJ6QU0akrraMudIRCdEJKEZ26cu6oOIZCdEJKEZ260rOqOIZCdEJKEZ0ajuP0xfdxrjsqjqEQnZBSRKdWWsdAVsQxwtqE2Bpi96yqdQyF6ISUIjo13DrenCQe9ay2BtEJKUV00ic6LBArSnRCShGd9PFjC8SKEp2QUkSnGB8/HvbHPbWObUF0QkoRnWIcrI70YMcWITohpYhOMR57PO4pju1BdEJKEZ0iPNhx9+8nycGqNCqOMSE6IaWITrpJzgKxokQnpBTRKcLDOVa3jGvGcR7FcTlEJ6QU0SlC6zhKktUdq4pjTIhOSCmiU5yD1bEeXdUaRCekFNFJraMFYkWJTkgpopPOHS0QK0p0QkoRnbpyz6riGArRCSlFdOpKHHWhIxSiE1KK6NT8uWOcPwqgOIZCdEJKEZ0inDvqEx2tQnRCShGddFeOBWJFiU5IKaJTlAc7/vaV/hh5axCdkFJEpxiPPR72J8/0cI62IDohpYhOMXpWh319wKo9iE5IKaJTnNZRfxSgPYhOSCmiU5RzR/1RgBYhOiGliE7qWbVArCjRCSlFdIrwNIBe2j6uvhUgcMmK4zoQnZBSRKcYz8oZ9dSz2h5EJ6QU0SlKz6qeJNciRCekFNGp+dbxj98fn6p1bA+iE1KK6BTh3DHZ/fm48bty5lEcl0N0QkoRnbrSs6o4hkJ0QkoRneJcd1x9F4DiGBOiE1KK6BTjrpzs0cdNnzsqjqEQnZBSRKc4TwNovmdVcQyF6ISUIjrFeRpA83/BSnEMheiElCI6NRzH/FkAehpAixCdkFJEp7g9q28H7uPrw+e1geIYG6ITUoroFDWOF4cDd/XSXQyqgeIYG6ITUoro1HgcJ0+S5FF+F8D1D2nr+O4sTWQ1cG5vb+/OlvQ2K+IYuAQhPknKgPi/zjE9Kj7RkcbxTRbCauBHBwZdreM6EJ2QUkSnhlvHm/yhVeU9q3e1jopjXIhOSCmiU9M9q/kFx/K641udO24cohNSiugUvXVUz+qGITohpYhOTXflzJ87LiFwyYrjOhCdkFJEp5g9q4pjGxCdkFJEp658wEpxDIXohJQiOimOFogVJTohpYhOiqMFYkWJTkgpolPjFzq+159bbReiE1KK6NR06ziM9ImOeRTH5RCdkFJEpzgfP26+dVQcQyE6IaWITl05d1QcQyE6IaWITnEeXdX8n8xRHEMhOiGliE56dJUFYkWJTkgpopMeXWWBWFGiE1KK6NSV1lEXOkIhOiGliE5dOXdUHEMhOiGliE5d6VlVHEMhOiGliE6KowViRYlOSCmik+JogVhRohNSiujUlbtyFMdQiE5IKaKT4miBWFGiE1KK6NT8wepw9YM5FMfIEJ2QUkSn5lvHI/2NjlYhOiGliE7qyrFArCjRCSlFdIpyG8BvX61+dlXgkhXHdSA6IaWITjFukhv2y+esKo6bh+iElCI6xehZHfabv4VccQyF6ISUIjrFaR11C3l7EJ2QUkSnrtxCPo/iuByiE1KK6NSVnlXFMRSiE1KK6BSndVx9rKo4xoTohJQiOnXl48eKYyhEJ6QU0UkP57BArCjRCSlFdIpzz+q4tyqNimNMiE5IKaJTw3HM71jVPastQnRCShGdutKzqjiGQnRCShGdWoljICviGGFtQmwNtXNHHay2CtEJKUV00tMALBArSnRCShGdmj9Y/dPqD1cpjpEhOiGliE7Nx3Gkg9VWITohpYhOOli1QKwo0QkpRXTSwaoFYkWJTkgpopMeXWWBWFGiE1KK6KTbACwQK0p0QkoRndQ6WiBWlOiElCI6xWkdxwdqHduC6ISUIjrFiaMeXdUeRCekFNEpThwnT/V5x7YgOiGliE6Rzh0bP1hVHEMhOiGliE5d6VlVHEMhOiGliE5d+fix4hgK0QkpRXSK0jr6x1cpju1AdEJKEZ1ixHGyf899coFLVhzXgeiElCI6RYjj8J6nrOpCR1SITkgpolOEnlX99eNWITohpYhOTcdxfM+f51AcY0N0QkoRnbrSs6o4hkJ0QkoRnbpy3VFxDIXohJQiOimOFogVJTohpYhOiqMFYkWJTkgpopPiaIFYUaITUoropDhaIFaU6ISUIjopjhaIFSU6IaWIToqjBWJFiU5IKaKT4miBWFGiE1KK6KQ4WiBWlOiElCI6KY4WiBUlOiGliE5dieM8iuNyiE5IKaKT4miBWFGiE1KK6KQ4WiBWlOiElCI6KY4WiBUlOiGliE6KowViRYlOSCmiU/Q4fnx9+MVZOnju/EBxjA3RCSlFdIoex+tv08HVS3cx8IN146gLHaEQnZBSRKfocfzw9eFX79+dpYn0A+f29vaWtnoLbeDyOAYuQYhPkqUBSRP44bs3WRLf5HF0ah2jQnRCShGdNtGVUzSM7xTHTUB0QkoRnaLH8e3AXQ107rg5iE5IKaLTJnpWnzt7z6riGArRCSlFdOrKdUfFMRSiE1KK6KQ4WiBWlOiElCI6KY4WiBUlOiGliE6KowViRYlOSCmik+JogVhRohNSiuikOFogVpTohJQiOimOFogVJTohpYhOiqMFYkWJTkgpolNX4jiP4rgcohNSiuikOFogVpTohJQiOimOFogVJTohpYhOiqMFYkWJTkgpopPiaIFYUaITUoropDhaIFaU6ISUIjp1JY660BEK0QkpRXRSHC0QK0p0QkoRnRRHC8SKEp2QUkQnxdECsaJEJ6QU0UlxtECsKNEJKUV0UhwtECtKdEJKEZ0URwvEihKdkFJEJ8XRArGiRCekFNFJcbRArCjRCSlFdFIcLRArSnRCShGdFEcLxIoSnZBSRCfF0QKxokQnpBTRSXG0QKwo0QkpRXRSHC0QK0p0QkoRnboSx3kUx+UQnZBSRCfF0QKxokQnpBTRSXG0QKwo0QkpRXRSHC0QK0p0QkoRnRRHC8SKEp2QUkQnxdECsaJEJ6QU0amVOAay4kJHhLUJsTXouiMFohNSiujUlYNVxTEUohNSiuikOFogVpTohJQiOimOFogVJTohpYhOiqMFYkWJTkgpopPiaIFYUaITUoropDhaIFaU6ISUIjopjhaIFSU6IaWIToqjBWJFiU5IKaKT4miBWFGiE1KK6KQ4WiBWlOiElCI6KY4WiBUlOiGliE6KowViRYlOSCmiU1fiOI/iuByiE1KK6KQ4WiBWlOiElCI6KY4WiBUlOiGliE6KowViRYlOSCmik+JogVhRohNSiuikOFogVpTohJQiOnUljrrQEQrRCSlFdFIcLRArSnRCShGdFEcLxIoSnZBSRCfF0QKxokQnpBTRSXG0QKwo0QkpRXRSHC0QK0p0QkoRnRRHC8SKEp2QUkQnxdECsaJEJ6QU0UlxtECsKNEJKUV0UhwtECtKdEJKEZ0URwvEihKdkFJEJ8XRArGiRCekFNFJcbRArCjRCSlFdFIcLRArSnRCShGduhLHeRTH5RCdkFJEJ8XRArGiRCekFNFJcbRArCjRCSlFdNpgHD++PnyuOEaH6ISUIjptMI5XL93FQHGMzUqnZDntSRmwvB9i8TYYx3dnWSLd3t7e/dPmyxRCFASGJjiOb/I4uuDWsc7jx9ZfGzEg/oIlOiGliE6bbx0Vx7gQnZBSRCfyuWMdxTEUohNSiuhE7lmtoziGQnRCShGdyNcd6yiOoRCdkFJEJ8XRArGiRCekFNFJcbRArCjRCSlFdFIcLRArSnRCShGdFEcLxIoSnZBSRCfF0QKxokQnpBTRSXG0QKwo0QkpRXRSHC0QK0p0QkoRnRRHC8SKEp2QUkQnxdECsaJEJ6QU0amVOK5D6KeyPnm0oQLZ5g2lOFLQhgpkmzeU4khBGyqQbd5Q0eMohAhFcRQCg+IoBAbFUQgMMeN4/c3hV++rZwmIBcrt88WZK565UA1Eid9Kzr0dzDbMFm+qmHF8O/jL/w+qJ+2IBfz2uf42f+G3UzVo14yE30ru4nAwe2jTFm+qmHG8+vIP72vPoRML+O3z4Wv/yz/fTtWgbTcOfitd/5C2juWG2eJNFfXc8fqbL87ebNsWa5Bs+6Qb58N3rniabTVoWw1EtpX8wWq5YbZ4U8XtyvnLP/9n636BNUm6fZzb+l/5VvxWUutoJT3q/8fzrTu8bw6/fdLd7GrLT4hs+K3k46hzRxPX3xx++ePWdX41R7V9rn//fou7C234rVT1rG73pop8sPo+6uI7T7l9Pv6fNtRy5vai7d5Uug1ACAyKoxAYFEchMCiOQmBQHIXAoDh2gcmzy+Bpp/91WZtp8iRJHp0GzyPaRXHsAg+J42zaPI7pYLx739wPWb6IiOLYBSbPfvrFUdLzjd3O+eTzX++cj5P0dfpd8quT5MDlr7Jpbk6S3cuRf1nGMf3vRwwPnBv3lszz95MkHSfaRXHsAmkcn55PX5xPj0/dqDfZP/UxG/bT77J/z37KX/lp0p+k//Jvytbxp3zE0/Obk2XzjHsu/abtN/qpozh2AR+em1en+UGlj1iScpBHb/Lsr+WrYpq0EX10Wj939COyLBYz3J4nnaLX9tsUimMXuCOOvXx8Ea3yVT7NeCdrR2etY3qI6kekM40Ols3jk9tv7y2KDMWxC5Rx9JnKDj1derxZa+x+Kl8Vcey58aO5OPoRbnr8+blbMs8oTedQJ48tozh2gTKORVdOFrFx0VuT/ytfZZE92v35KPnsqF+L49SPcC7L3JJ5LodJcm8PrIiM4vgJkQVakFEcPx3G6qyhozgKgUFxFAKD4igEBsVRCAyKoxAY/g2utzY1q5kpHQAAAABJRU5ErkJggg==" alt="Plot object" width="910" height="400"></div><p></p>
<!-- rnb-chunk-end -->
<!-- rnb-text-begin -->
<!-- rnb-text-end -->
<!-- rnb-chunk-begin -->
<!-- rnb-source-begin eyJkYXRhIjpbImNsYWltX3N0YXRzIDwtIHJlYWN0aXZlKHtcbiAgb3V0IDwtIGNsYWltc1tjbGFpbXMkY2xhaW1fbnVtYmVyID09IGlucHV0JHNlbF9jbGFpbSwgMzo4XVxuICBcbiAgbmFtZXMob3V0KSA8LSBjKFwiQ2xhaW0gTnVtXCIsIFwiU3RhdHVzXCIsIFwiQ2FzZVwiLCBcIkluY2VtZW50YWwgUGF5bWVudFwiLCBcIkFjdHVhbCBTdGF0dXNcIiwgXCJBY3R1YWwgUGF5bWVudFwiKVxuICBcbiAgb3V0XG59KSAiLCIiLCJyZW5kZXJUYWJsZSh7XG4gIGNsYWltX3N0YXRzKClcbiAgfSxcbiAgaW5jbHVkZS5yb3duYW1lcyA9IEZBTFNFXG4pIl19 -->
<div class="sourceCode" id="section-cb30"><div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs btn-secondary btn-sm code-folding-btn pull-right float-right" data-toggle="collapse" data-target="#rcode-643E0F3630" aria-expanded="false" aria-controls="rcode-643E0F3630"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3630"><pre class="sourceCode r"><code class="sourceCode r"><span id="section-cb30-1"><a href="#section-cb30-1" aria-hidden="true" tabindex="-1"></a>claim_stats <span class="ot">&lt;-</span> <span class="fu">reactive</span>({</span>
<span id="section-cb30-2"><a href="#section-cb30-2" aria-hidden="true" tabindex="-1"></a>  out <span class="ot">&lt;-</span> claims[claims<span class="sc">$</span>claim_number <span class="sc">==</span> input<span class="sc">$</span>sel_claim, <span class="dv">3</span><span class="sc">:</span><span class="dv">8</span>]</span>
<span id="section-cb30-3"><a href="#section-cb30-3" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="section-cb30-4"><a href="#section-cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>(out) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Claim Num"</span>, <span class="st">"Status"</span>, <span class="st">"Case"</span>, <span class="st">"Incemental Payment"</span>, <span class="st">"Actual Status"</span>, <span class="st">"Actual Payment"</span>)</span>
<span id="section-cb30-5"><a href="#section-cb30-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="section-cb30-6"><a href="#section-cb30-6" aria-hidden="true" tabindex="-1"></a>  out</span>
<span id="section-cb30-7"><a href="#section-cb30-7" aria-hidden="true" tabindex="-1"></a>}) </span>
<span id="section-cb30-8"><a href="#section-cb30-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="section-cb30-9"><a href="#section-cb30-9" aria-hidden="true" tabindex="-1"></a><span class="fu">renderTable</span>({</span>
<span id="section-cb30-10"><a href="#section-cb30-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">claim_stats</span>()</span>
<span id="section-cb30-11"><a href="#section-cb30-11" aria-hidden="true" tabindex="-1"></a>  },</span>
<span id="section-cb30-12"><a href="#section-cb30-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">include.rownames =</span> <span class="cn">FALSE</span></span>
<span id="section-cb30-13"><a href="#section-cb30-13" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div></div>
<!-- rnb-source-end -->
<p></p><div id="out54040d390f90f427" class="shiny-html-output shiny-bound-output" aria-live="polite"><table class="table shiny-table table- spacing-s" style="width:auto;">
<thead> <tr> <th style="text-align: left;"> Claim Num </th> <th style="text-align: left;"> Status </th> <th style="text-align: right;"> Case </th> <th style="text-align: right;"> Incemental Payment </th> <th style="text-align: left;"> Actual Status </th> <th style="text-align: right;"> Actual Payment </th>  </tr> </thead> <tbody>
  <tr> <td> 2008137571 </td> <td> C </td> <td align="right"> 0.00 </td> <td align="right"> 0.00 </td> <td> C </td> <td align="right"> 0.00 </td> </tr>
   </tbody> </table></div><p></p>
<!-- rnb-chunk-end -->
<!-- rnb-text-begin -->
</div>
</div>
</div>
<div id="section-conclusion" class="section level1">
<h1>Conclusion</h1>
<p><strong>WIP</strong></p>
</div>
<div id="section-appendices" class="section level1">
<h1>Appendices</h1>
<div id="section-a.-software" class="section level2">
<h2>A. Software</h2>
<p>I used <code>R</code>, the free and open source statistical 
programming environment, for all the data analysis, model fitting, 
simulations, graphics, and data output.</p>
<p>The <code>caret</code> package was used extensively for the heavy lifting predictive modeling.</p>
<p>Detail of the <code>R</code> environment at the time this report is available below:</p>
<!-- rnb-text-end -->
<!-- rnb-chunk-begin -->
<!-- rnb-source-begin eyJkYXRhIjoic2Vzc2lvbkluZm8oKSJ9 -->
<div class="sourceCode" id="section-cb31"><div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs btn-secondary btn-sm code-folding-btn pull-right float-right" data-toggle="collapse" data-target="#rcode-643E0F3631" aria-expanded="false" aria-controls="rcode-643E0F3631"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3631"><pre class="sourceCode r"><code class="sourceCode r"><span id="section-cb31-1"><a href="#section-cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span></code></pre></div></div>
<!-- rnb-source-end -->
<!-- rnb-output-begin eyJkYXRhIjoiUiB2ZXJzaW9uIDQuMS4xICgyMDIxLTA4LTEwKVxuUGxhdGZvcm06IHg4Nl82NC13NjQtbWluZ3czMi94NjQgKDY0LWJpdClcblJ1bm5pbmcgdW5kZXI6IFdpbmRvd3MgMTAgeDY0IChidWlsZCAxODM2MylcblxuTWF0cml4IHByb2R1Y3RzOiBkZWZhdWx0XG5cbmxvY2FsZTpcblsxXSBMQ19DT0xMQVRFPUVuZ2xpc2hfVW5pdGVkIFN0YXRlcy4xMjUyIFxuWzJdIExDX0NUWVBFPUVuZ2xpc2hfVW5pdGVkIFN0YXRlcy4xMjUyICAgXG5bM10gTENfTU9ORVRBUlk9RW5nbGlzaF9Vbml0ZWQgU3RhdGVzLjEyNTJcbls0XSBMQ19OVU1FUklDPUMgICAgICAgICAgICAgICAgICAgICAgICAgIFxuWzVdIExDX1RJTUU9RW5nbGlzaF9Vbml0ZWQgU3RhdGVzLjEyNTIgICAgXG5cbmF0dGFjaGVkIGJhc2UgcGFja2FnZXM6XG5bMV0gc3RhdHMgICAgIGdyYXBoaWNzICBnckRldmljZXMgdXRpbHMgICAgIGRhdGFzZXRzICBtZXRob2RzICAgYmFzZSAgICAgXG5cbm90aGVyIGF0dGFjaGVkIHBhY2thZ2VzOlxuIFsxXSB3ZWJzaG90XzAuNS4yICAgICAgcXNfMC4yNS4xICAgICAgICAgIGJpbmRyY3BwXzAuMi4yICAgICBlMTA3MV8xLjctOSAgICAgICBcbiBbNV0gc2NhbGVzXzEuMS4xICAgICAgIERpYWdyYW1tZVJfMS4wLjYuMSBrbml0cl8xLjM2ICAgICAgICAgbHVicmlkYXRlXzEuNy4xMCAgXG4gWzldIGNhcmV0XzYuMC04OSAgICAgICBsYXR0aWNlXzAuMjAtNDQgICAgZ2dwbG90Ml8zLjMuNSAgICAgIHRpZHlyXzEuMS40ICAgICAgIFxuWzEzXSBkcGx5cl8xLjAuNyAgICAgICAgc2hpbnlfMS43LjAgICAgICAgXG5cbmxvYWRlZCB2aWEgYSBuYW1lc3BhY2UgKGFuZCBub3QgYXR0YWNoZWQpOlxuIFsxXSBubG1lXzMuMS0xNTIgICAgICAgICBSQ29sb3JCcmV3ZXJfMS4xLTIgICB0b29sc180LjEuMSAgICAgICAgIFxuIFs0XSBic2xpYl8wLjMuMCAgICAgICAgICB1dGY4XzEuMi4yICAgICAgICAgICBSNl8yLjUuMSAgICAgICAgICAgIFxuIFs3XSBycGFydF80LjEtMTUgICAgICAgICBtZ2N2XzEuOC0zNiAgICAgICAgICBjb2xvcnNwYWNlXzIuMC0yICAgIFxuWzEwXSBubmV0XzcuMy0xNiAgICAgICAgICB3aXRocl8yLjQuMiAgICAgICAgICB0aWR5c2VsZWN0XzEuMS4xICAgIFxuWzEzXSBjb21waWxlcl80LjEuMSAgICAgICBsYWJlbGluZ18wLjQuMiAgICAgICBzdHJpbmdmaXNoXzAuMTUuMiAgIFxuWzE2XSBzYXNzXzAuNC4wICAgICAgICAgICBwcm94eV8wLjQtMjYgICAgICAgICBzdHJpbmdyXzEuNC4wICAgICAgIFxuWzE5XSBkaWdlc3RfMC42LjI4ICAgICAgICBybWFya2Rvd25fMi4xMSAgICAgICBwa2djb25maWdfMi4wLjMgICAgIFxuWzIyXSBodG1sdG9vbHNfMC41LjIgICAgICBwYXJhbGxlbGx5XzEuMjguMSAgICBmYXN0bWFwXzEuMS4wICAgICAgIFxuWzI1XSBoaWdocl8wLjkgICAgICAgICAgICBodG1sd2lkZ2V0c18xLjUuNCAgICBybGFuZ18wLjQuMTEgICAgICAgIFxuWzI4XSBiaW5kcl8wLjEuMSAgICAgICAgICB2aXNOZXR3b3JrXzIuMS4wICAgICBqcXVlcnlsaWJfMC4xLjQgICAgIFxuWzMxXSBnZW5lcmljc18wLjEuMCAgICAgICBmYXJ2ZXJfMi4xLjAgICAgICAgICBSQXBpU2VyaWFsaXplXzAuMS4wIFxuWzM0XSBqc29ubGl0ZV8xLjcuMiAgICAgICBNb2RlbE1ldHJpY3NfMS4yLjIuMiBtYWdyaXR0cl8yLjAuMSAgICAgIFxuWzM3XSBNYXRyaXhfMS4zLTQgICAgICAgICBSY3BwXzEuMC43ICAgICAgICAgICBtdW5zZWxsXzAuNS4wICAgICAgIFxuWzQwXSBmYW5zaV8wLjUuMCAgICAgICAgICBsaWZlY3ljbGVfMS4wLjEgICAgICBzdHJpbmdpXzEuNy40ICAgICAgIFxuWzQzXSBwUk9DXzEuMTguMCAgICAgICAgICB5YW1sXzIuMi4xICAgICAgICAgICBNQVNTXzcuMy01NCAgICAgICAgIFxuWzQ2XSBwbHlyXzEuOC42ICAgICAgICAgICByZWNpcGVzXzAuMS4xNyAgICAgICBncmlkXzQuMS4xICAgICAgICAgIFxuWzQ5XSBwYXJhbGxlbF80LjEuMSAgICAgICBsaXN0ZW52XzAuOC4wICAgICAgICBwcm9taXNlc18xLjIuMC4xICAgIFxuWzUyXSBjcmF5b25fMS40LjEgICAgICAgICBzcGxpbmVzXzQuMS4xICAgICAgICBwaWxsYXJfMS42LjMgICAgICAgIFxuWzU1XSBmdXR1cmUuYXBwbHlfMS44LjEgICByZXNoYXBlMl8xLjQuNCAgICAgICBjb2RldG9vbHNfMC4yLTE4ICAgIFxuWzU4XSBzdGF0czRfNC4xLjEgICAgICAgICBnbHVlXzEuNC4yICAgICAgICAgICBldmFsdWF0ZV8wLjE0ICAgICAgIFxuWzYxXSBkYXRhLnRhYmxlXzEuMTQuMiAgICBSY3BwUGFyYWxsZWxfNS4xLjQgICB2Y3Ryc18wLjMuOCAgICAgICAgIFxuWzY0XSBodHRwdXZfMS42LjMgICAgICAgICBmb3JlYWNoXzEuNS4xICAgICAgICBndGFibGVfMC4zLjAgICAgICAgIFxuWzY3XSBwdXJycl8wLjMuNCAgICAgICAgICBmdXR1cmVfMS4yMi4xICAgICAgICBjYWNoZW1fMS4wLjYgICAgICAgIFxuWzcwXSB4ZnVuXzAuMjYgICAgICAgICAgICBnb3dlcl8wLjIuMiAgICAgICAgICBtaW1lXzAuMTIgICAgICAgICAgIFxuWzczXSBwcm9kbGltXzIwMTkuMTEuMTMgICB4dGFibGVfMS44LTQgICAgICAgICBsYXRlcl8xLjMuMCAgICAgICAgIFxuWzc2XSBjbGFzc183LjMtMTkgICAgICAgICBzdXJ2aXZhbF8zLjItMTEgICAgICB0aW1lRGF0ZV8zMDQzLjEwMiAgIFxuWzc5XSB0aWJibGVfMy4xLjQgICAgICAgICBpdGVyYXRvcnNfMS4wLjEzICAgICBsYXZhXzEuNi4xMCAgICAgICAgIFxuWzgyXSBnbG9iYWxzXzAuMTQuMCAgICAgICBlbGxpcHNpc18wLjMuMiAgICAgICBpcHJlZF8wLjktMTIgICAgICAgIFxuIn0= -->
<pre><code>R version 4.1.1 (2021-08-10)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 18363)

Matrix products: default

locale:
[1] LC_COLLATE=English_United States.1252 
[2] LC_CTYPE=English_United States.1252   
[3] LC_MONETARY=English_United States.1252
[4] LC_NUMERIC=C                          
[5] LC_TIME=English_United States.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
 [1] webshot_0.5.2      qs_0.25.1          bindrcpp_0.2.2     e1071_1.7-9       
 [5] scales_1.1.1       DiagrammeR_1.0.6.1 knitr_1.36         lubridate_1.7.10  
 [9] caret_6.0-89       lattice_0.20-44    ggplot2_3.3.5      tidyr_1.1.4       
[13] dplyr_1.0.7        shiny_1.7.0       

loaded via a namespace (and not attached):
 [1] nlme_3.1-152         RColorBrewer_1.1-2   tools_4.1.1         
 [4] bslib_0.3.0          utf8_1.2.2           R6_2.5.1            
 [7] rpart_4.1-15         mgcv_1.8-36          colorspace_2.0-2    
[10] nnet_7.3-16          withr_2.4.2          tidyselect_1.1.1    
[13] compiler_4.1.1       labeling_0.4.2       stringfish_0.15.2   
[16] sass_0.4.0           proxy_0.4-26         stringr_1.4.0       
[19] digest_0.6.28        rmarkdown_2.11       pkgconfig_2.0.3     
[22] htmltools_0.5.2      parallelly_1.28.1    fastmap_1.1.0       
[25] highr_0.9            htmlwidgets_1.5.4    rlang_0.4.11        
[28] bindr_0.1.1          visNetwork_2.1.0     jquerylib_0.1.4     
[31] generics_0.1.0       farver_2.1.0         RApiSerialize_0.1.0 
[34] jsonlite_1.7.2       ModelMetrics_1.2.2.2 magrittr_2.0.1      
[37] Matrix_1.3-4         Rcpp_1.0.7           munsell_0.5.0       
[40] fansi_0.5.0          lifecycle_1.0.1      stringi_1.7.4       
[43] pROC_1.18.0          yaml_2.2.1           MASS_7.3-54         
[46] plyr_1.8.6           recipes_0.1.17       grid_4.1.1          
[49] parallel_4.1.1       listenv_0.8.0        promises_1.2.0.1    
[52] crayon_1.4.1         splines_4.1.1        pillar_1.6.3        
[55] future.apply_1.8.1   reshape2_1.4.4       codetools_0.2-18    
[58] stats4_4.1.1         glue_1.4.2           evaluate_0.14       
[61] data.table_1.14.2    RcppParallel_5.1.4   vctrs_0.3.8         
[64] httpuv_1.6.3         foreach_1.5.1        gtable_0.3.0        
[67] purrr_0.3.4          future_1.22.1        cachem_1.0.6        
[70] xfun_0.26            gower_0.2.2          mime_0.12           
[73] prodlim_2019.11.13   xtable_1.8-4         later_1.3.0         
[76] class_7.3-19         survival_3.2-11      timeDate_3043.102   
[79] tibble_3.1.4         iterators_1.0.13     lava_1.6.10         
[82] globals_0.14.0       ellipsis_0.3.2       ipred_0.9-12        </code></pre>
<!-- rnb-output-end -->
<!-- rnb-chunk-end -->
<!-- rnb-text-begin -->
</div>
<div id="section-closure-model-summary-statistics" class="section level2">
<h2>Closure Model Summary Statistics</h2>
<!-- rnb-text-end -->
<!-- rnb-chunk-begin -->
<!-- rnb-source-begin eyJkYXRhIjoic3VtbWFyeShjbV9tb2RlbCkifQ== -->
<div class="sourceCode" id="section-cb33"><div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs btn-secondary btn-sm code-folding-btn pull-right float-right" data-toggle="collapse" data-target="#rcode-643E0F3632" aria-expanded="false" aria-controls="rcode-643E0F3632"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3632"><pre class="sourceCode r"><code class="sourceCode r"><span id="section-cb33-1"><a href="#section-cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(cm_model)</span></code></pre></div></div>
<!-- rnb-source-end -->
<!-- rnb-output-begin eyJkYXRhIjoiXG5DYWxsOlxuTlVMTFxuXG5EZXZpYW5jZSBSZXNpZHVhbHM6IFxuICAgIE1pbiAgICAgICAxUSAgIE1lZGlhbiAgICAgICAzUSAgICAgIE1heCAgXG4tMS45MjI3ICAtMC4xMjMxICAtMC4xMjMxICAtMC4xMjIyICAgMy4xNTU4ICBcblxuQ29lZmZpY2llbnRzOlxuICAgICAgICAgICAgRXN0aW1hdGUgU3RkLiBFcnJvciB6IHZhbHVlICAgICAgICAgICAgIFByKD58enwpICAgIFxuKEludGVyY2VwdCkgLTMuNzA5MjIgICAgMC4xNTkxNiAtMjMuMzA0IDwgMC4wMDAwMDAwMDAwMDAwMDAyICoqKlxuc3RhdHVzTyAgICAgIDIuMDg0NzYgICAgMC4wOTQ3MyAgMjIuMDA4IDwgMC4wMDAwMDAwMDAwMDAwMDAyICoqKlxudG90X3J4ICAgICAgIDAuMTI4OTggICAgMC4wNDMyNiAgIDIuOTgyICAgICAgICAgICAgICAwLjAwMjg2ICoqIFxudG90X3BkX2luY3IgLTAuMjk4NzEgICAgMC4xMTM3MiAgLTIuNjI3ICAgICAgICAgICAgICAwLjAwODYyICoqIFxuLS0tXG5TaWduaWYuIGNvZGVzOiAgMCAnKioqJyAwLjAwMSAnKionIDAuMDEgJyonIDAuMDUgJy4nIDAuMSAnICcgMVxuXG4oRGlzcGVyc2lvbiBwYXJhbWV0ZXIgZm9yIGJpbm9taWFsIGZhbWlseSB0YWtlbiB0byBiZSAxKVxuXG4gICAgTnVsbCBkZXZpYW5jZTogMzEyNy40ICBvbiA0MDg5ICBkZWdyZWVzIG9mIGZyZWVkb21cblJlc2lkdWFsIGRldmlhbmNlOiAxNjI4LjggIG9uIDQwODYgIGRlZ3JlZXMgb2YgZnJlZWRvbVxuQUlDOiAxNjM2LjhcblxuTnVtYmVyIG9mIEZpc2hlciBTY29yaW5nIGl0ZXJhdGlvbnM6IDdcbiJ9 -->
<pre><code>
Call:
NULL

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-1.9227  -0.1231  -0.1231  -0.1222   3.1558  

Coefficients:
            Estimate Std. Error z value             Pr(&gt;|z|)    
(Intercept) -3.70922    0.15916 -23.304 &lt; 0.0000000000000002 ***
statusO      2.08476    0.09473  22.008 &lt; 0.0000000000000002 ***
tot_rx       0.12898    0.04326   2.982              0.00286 ** 
tot_pd_incr -0.29871    0.11372  -2.627              0.00862 ** 
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 3127.4  on 4089  degrees of freedom
Residual deviance: 1628.8  on 4086  degrees of freedom
AIC: 1636.8

Number of Fisher Scoring iterations: 7</code></pre>
<!-- rnb-output-end -->
<!-- rnb-chunk-end -->
<!-- rnb-text-begin -->
</div>
<div id="section-zero-payment-model-summary-statistics" class="section level2">
<h2>Zero Payment Model Summary Statistics}</h2>
<!-- rnb-text-end -->
<!-- rnb-chunk-begin -->
<!-- rnb-source-begin eyJkYXRhIjoic3VtbWFyeSh6bV9tb2RlbCkifQ== -->
<div class="sourceCode" id="section-cb35"><div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs btn-secondary btn-sm code-folding-btn pull-right float-right" data-toggle="collapse" data-target="#rcode-643E0F3633" aria-expanded="false" aria-controls="rcode-643E0F3633"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3633"><pre class="sourceCode r"><code class="sourceCode r"><span id="section-cb35-1"><a href="#section-cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(zm_model)</span></code></pre></div></div>
<!-- rnb-source-end -->
<!-- rnb-output-begin eyJkYXRhIjoiXG5DYWxsOlxuTlVMTFxuXG5EZXZpYW5jZSBSZXNpZHVhbHM6IFxuICAgIE1pbiAgICAgICAxUSAgIE1lZGlhbiAgICAgICAzUSAgICAgIE1heCAgXG4tMS44NzcyICAtMC43NzMwICAtMC42Mjk1ICAtMC4wNjAzICAgNS41OTAyICBcblxuQ29lZmZpY2llbnRzOlxuICAgICAgICAgICAgRXN0aW1hdGUgU3RkLiBFcnJvciB6IHZhbHVlICAgICAgICAgICAgIFByKD58enwpICAgIFxuKEludGVyY2VwdCkgLTEuNTU0MjEgICAgMC4xMTg0OSAtMTMuMTE2IDwgMC4wMDAwMDAwMDAwMDAwMDAyICoqKlxuc3RhdHVzX2FjdE8gLTAuMzM0NzkgICAgMC4wNzg5MCAgLTQuMjQzICAgICAgICAgICAwLjAwMDAyMjAyICoqKlxudG90X3J4ICAgICAgLTEuODIwODEgICAgMC40MDI5MCAgLTQuNTE5ICAgICAgICAgICAwLjAwMDAwNjIxICoqKlxudG90X3BkX2luY3IgIDAuMjI4NzkgICAgMC4wODUwMyAgIDIuNjkxICAgICAgICAgICAgICAwLjAwNzEzICoqIFxuLS0tXG5TaWduaWYuIGNvZGVzOiAgMCAnKioqJyAwLjAwMSAnKionIDAuMDEgJyonIDAuMDUgJy4nIDAuMSAnICcgMVxuXG4oRGlzcGVyc2lvbiBwYXJhbWV0ZXIgZm9yIGJpbm9taWFsIGZhbWlseSB0YWtlbiB0byBiZSAxKVxuXG4gICAgTnVsbCBkZXZpYW5jZTogMTA5OC43ICBvbiAxMDE5ICBkZWdyZWVzIG9mIGZyZWVkb21cblJlc2lkdWFsIGRldmlhbmNlOiAxMDIxLjEgIG9uIDEwMTYgIGRlZ3JlZXMgb2YgZnJlZWRvbVxuQUlDOiAxMDI5LjFcblxuTnVtYmVyIG9mIEZpc2hlciBTY29yaW5nIGl0ZXJhdGlvbnM6IDdcbiJ9 -->
<pre><code>
Call:
NULL

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-1.8772  -0.7730  -0.6295  -0.0603   5.5902  

Coefficients:
            Estimate Std. Error z value             Pr(&gt;|z|)    
(Intercept) -1.55421    0.11849 -13.116 &lt; 0.0000000000000002 ***
status_actO -0.33479    0.07890  -4.243           0.00002202 ***
tot_rx      -1.82081    0.40290  -4.519           0.00000621 ***
tot_pd_incr  0.22879    0.08503   2.691              0.00713 ** 
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 1098.7  on 1019  degrees of freedom
Residual deviance: 1021.1  on 1016  degrees of freedom
AIC: 1029.1

Number of Fisher Scoring iterations: 7</code></pre>
<!-- rnb-output-end -->
<!-- rnb-chunk-end -->
<!-- rnb-text-begin -->
</div>
<div id="section-incremental-payment-model-summary-statistics" class="section level2">
<h2>Incremental Payment Model Summary Statistics</h2>
<!-- rnb-text-end -->
<!-- rnb-chunk-begin -->
<!-- rnb-source-begin eyJkYXRhIjoic3VtbWFyeShuem1fbW9kZWwpIn0= -->
<div class="sourceCode" id="section-cb37"><div class="row"><div class="col-md-12"><button type="button" class="btn btn-default btn-xs btn-secondary btn-sm code-folding-btn pull-right float-right" data-toggle="collapse" data-target="#rcode-643E0F3634" aria-expanded="false" aria-controls="rcode-643E0F3634"><span>Code</span></button></div></div><div class="collapse r-code-collapse" id="rcode-643E0F3634"><pre class="sourceCode r"><code class="sourceCode r"><span id="section-cb37-1"><a href="#section-cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(nzm_model)</span></code></pre></div></div>
<!-- rnb-source-end -->
<!-- rnb-output-begin eyJkYXRhIjoiXG5GYW1pbHk6IHF1YXNpcG9pc3NvbiBcbkxpbmsgZnVuY3Rpb246IGxvZyBcblxuRm9ybXVsYTpcbnRvdF9wZF9pbmNyX2FjdCB+IHN0YXR1c19hY3QgKyBzKHRvdF9yeCkgKyBzKHRvdF9wZF9pbmNyKVxuXG5QYXJhbWV0cmljIGNvZWZmaWNpZW50czpcbiAgICAgICAgICAgIEVzdGltYXRlIFN0ZC4gRXJyb3IgdCB2YWx1ZSAgICAgICAgICAgICBQcig+fHR8KSAgICBcbihJbnRlcmNlcHQpICAxMC43MjQ3ICAgICAwLjEwMTggIDEwNS4zNCA8IDAuMDAwMDAwMDAwMDAwMDAwMiAqKipcbnN0YXR1c19hY3RPICAtMC4zNDkyICAgICAwLjExNDUgICAtMy4wNSAgICAgICAgICAgICAgMC4wMDIzNyAqKiBcbi0tLVxuU2lnbmlmLiBjb2RlczogIDAgJyoqKicgMC4wMDEgJyoqJyAwLjAxICcqJyAwLjA1ICcuJyAwLjEgJyAnIDFcblxuQXBwcm94aW1hdGUgc2lnbmlmaWNhbmNlIG9mIHNtb290aCB0ZXJtczpcbiAgICAgICAgICAgICAgICAgZWRmIFJlZi5kZiAgICAgIEYgICAgICAgICAgICAgIHAtdmFsdWUgICAgXG5zKHRvdF9yeCkgICAgICA4LjczNCAgOC45NjcgNDcuOTA1IDwgMC4wMDAwMDAwMDAwMDAwMDAyICoqKlxucyh0b3RfcGRfaW5jcikgNy4zMjcgIDguMTEyICAzLjMyMyAgICAgICAgICAgICAwLjAwMDg5MyAqKipcbi0tLVxuU2lnbmlmLiBjb2RlczogIDAgJyoqKicgMC4wMDEgJyoqJyAwLjAxICcqJyAwLjA1ICcuJyAwLjEgJyAnIDFcblxuUi1zcS4oYWRqKSA9ICAwLjY4NyAgIERldmlhbmNlIGV4cGxhaW5lZCA9IDY2LjMlXG5HQ1YgPSAgOTY0NDggIFNjYWxlIGVzdC4gPSAxLjY1NjVlKzA1ICBuID0gNzg2XG4ifQ== -->
<pre><code>
Family: quasipoisson 
Link function: log 

Formula:
tot_pd_incr_act ~ status_act + s(tot_rx) + s(tot_pd_incr)

Parametric coefficients:
            Estimate Std. Error t value             Pr(&gt;|t|)    
(Intercept)  10.7247     0.1018  105.34 &lt; 0.0000000000000002 ***
status_actO  -0.3492     0.1145   -3.05              0.00237 ** 
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Approximate significance of smooth terms:
                 edf Ref.df      F              p-value    
s(tot_rx)      8.734  8.967 47.905 &lt; 0.0000000000000002 ***
s(tot_pd_incr) 7.327  8.112  3.323             0.000893 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

R-sq.(adj) =  0.687   Deviance explained = 66.3%
GCV =  96448  Scale est. = 1.6565e+05  n = 786</code></pre>
<!-- rnb-output-end -->
<!-- rnb-chunk-end -->
</div>
</div>

<div id="rmd-source-code">LS0tCnRpdGxlOiAiTWljcm8tQ2xhaW1zIEFuYWx5c2lzIGFuZCBNb2RlbGxpbmc6IENsYWltIFN0YXR1cyBhbmQgUGF5bWVudCBNb2RlbCIKYXV0aG9yOiAiSmltbXkgQnJpZ2dzIgpkYXRlOiAiTWF5IDksIDIwMTYiCm91dHB1dDoKICBodG1sX25vdGVib29rOiAKICAgIHRvYzogeWVzCiAgICB0b2NfZGVwdGg6IDIKICAgIGNvZGVfZm9sZGluZzogaGlkZQogICAgaGlnaGxpZ2h0OiB0YW5nbwogICAgdGhlbWU6IHJlYWRhYmxlCiAgaHRtbF9kb2N1bWVudDoKICAgIHRvYzogeWVzCiAgICB0b2NfZmxvYXQ6IHllcwogICAgdG9jX2RlcHRoOiAyCiAgICBjb2RlX2ZvbGRpbmc6IGhpZGUKICAgIHRoZW1lOiByZWFkYWJsZQogICAgaGlnaGxpZ2h0OiB0YW5nbwogICAgbnVtYmVyX3NlY3Rpb25zOiB5ZXMKcmVzb3VyY2VfZmlsZXM6Ci0gaW5kZXhfZmlsZXMvZmlndXJlLWh0bWwvem1fcGxvdHMtMS5wbmcKLSBpbmRleF9maWxlcy9maWd1cmUtaHRtbC91bm5hbWVkLWNodW5rLTQtMS5wbmcKLSBpbmRleF9maWxlcy9maWd1cmUtaHRtbC9zaW1fdl9hY3R1YWwtMS5wbmcKLSBpbmRleF9maWxlcy9maWd1cmUtaHRtbC9jbV9sb2dpdF9wbG90LTEucG5nCnJ1bnRpbWU6IHNoaW55Ci0tLQoKYGBge3Igc2V0dXAsIGVjaG89RkFMU0UsIGV2YWw9VFJVRX0Ka25pdHI6Om9wdHNfY2h1bmskc2V0KAogIHdhcm5pbmcgPSBGQUxTRSwgbWVzc2FnZSA9IEZBTFNFLCBlcnJvciA9IEZBTFNFLAogIGNhY2hlID0gVFJVRSwgYXV0b2RlcCA9IFRSVUUKKQpgYGAKCltTb3VyY2UgQ29kZV0oaHR0cHM6Ly9naXRodWIuY29tL2ppbWJyaWcvY2xhaW1zLXBtKQoKIyBJbnRyb2R1Y3Rpb24KCiMjIFB1cnBvc2UgYW5kIFNjb3BlCgpUaGlzIHJlcG9ydCBkZXNjcmliZXMgYSBtb2RlbCBmb3IgcHJlZGljdGluZyBpbmNyZW1lbnRhbCBwYWlkIGxvc3NlcyBvbgphbiBpbmRpdmlkdWFsIGNsYWltIGJhc2lzICgiVGhlIE1vZGVsIikuIFRoZSBtb2RlbCB1c2VzIGEgbWl4dHVyZSBvZgpwcmVkaWN0aXZlIG1vZGVsaW5nIGFuZCBzaW11bGF0aW9uIHRlY2huaXF1ZXMgdG8gbWltaWMgcmVhbCB3b3JsZCBjbGFpbQpkZXZlbG9wbWVudC4KCk5vdGUgdGhhdCB0aGlzIHJlcG9ydCBpcyBhIG11Y2ggbW9yZSBzaW1wbGlmaWVkIHZlcnNpb24gb2YgdGhlIGZ1bGwKZW5zZW1ibGUgb2YgbW9kZWwncyB1c2VkIGluIHRoZSBmdWxsIGFuYWx5c2lzIHBlcmZvcm1lZCBhbmQgaXMgbWVyZWx5Cm1lYW50IGFzIGEgc3RhcnRpbmcgcG9pbnQgZm9yIHRlYWNoaW5nL2xlYXJuaW5nIHB1cnBvc2VzLgoKIyMgQmFja2dyb3VuZAoKTW9kZWxzLCBieSBkZWZpbml0aW9uLCB1c2Ugc2ltcGxpZmllZCBhc3N1bXB0aW9ucyBvZiByZWFsaXR5IHRvIHJldmVhbAppbmZvcm1hdGlvbiBvciBwcmVkaWN0IGV2ZW50cyBiYXNlZCBvbiB0aGUgdW5kZXJseWluZyBkYXRhLiBNb2RlbHMgd2hpY2gKY2xvc2VseSBtaW1pYyB0aGUgZnVuZGFtZW50YWwgZm9yY2VzIGRyaXZpbmcgdGhlIGRhdGEgaGF2ZSB0aGUgYmVzdApjaGFuY2Ugb2YgcHJvdmlkaW5nIHZhbHVhYmxlIGluc2lnaHRzLgoKRHVlIHRvIGRhdGEgYW5kIGNvbXB1dGluZyBsaW1pdGF0aW9ucywgYWN0dWFyaWVzIGhhdmUgdHJhZGl0aW9uYWxseQphZ2dyZWdhdGVkIGxvc3MgaW5mb3JtYXRpb24gYnkgcG9saWN5LCBhY2NpZGVudCwgb3IgY2FsZW5kYXIgcGVyaW9kIHRvCnByb2plY3QgZnV0dXJlIGxvc3Nlcy4gQnkgYWdncmVnYXRpbmcgbG9zc2VzLCB0aGUgYWN0dWFyeSBsb3NlcyB2YWx1YWJsZQpjbGFpbSBsZXZlbCBpbmZvcm1hdGlvbi4KClRoZSBtb2RlbCBhc3N1bWVzIHRoYXQgaW5kaXZpZHVhbCBjbGFpbXMgYW5kIHRoZWlyIGNsYWltIGxldmVsCmNoYXJhY3RlcmlzdGljcyBhcmUgdGhlIGZ1bmRhbWVudGFsIGRyaXZlcnMgb2YgZnV0dXJlIHBheW1lbnRzLgpUaGVyZWZvcmUsIEluIGFjY29yZGFuY2Ugd2l0aCB0aGUgcGhpbG9zb3BoeSB0aGF0IHRoZSBiZXN0IG1vZGVscyBhcmUKdGhvc2Ugd2hpY2ggbWltaWMgcmVhbGl0eSBtb3N0IGNsb3NlbHksIHRoZSBtb2RlbCB1c2VzIGluZm9ybWF0aW9uIG9uIGFuCmluZGl2aWR1YWwgY2xhaW0gbGV2ZWwsIGFuZCBydW5zIHN0YXRpc3RpY2FsbHkgcmlnb3JvdXMgdGVjaG5pcXVlcyB0bwpmaXQgYW5kIHNpbXVsYXRlIGluZGl2aWR1YWwgY2xhaW0gZGV2ZWxvcG1lbnQuCgojIyBPdmVydmlldwoKVGhlIG1vZGVsIGlzIG1lYW50IHRvIGJlIGEgc3RhcnRpbmcgcG9pbnQgZm9yIGFueW9uZSBsb29raW5nIHRvIGRpc2NvdmVyCm5ldyBhbmQgYWR2YW5jZWQgbWV0aG9kcyBmb3IgcGVyZm9ybWluZyBtaWNyby1jbGFpbXMgYW5hbHlzaXMgYW5kCm1hY2hpbmUtbGVhcm5pbmcgbW9kZWxsaW5nIHRlY2huaXF1ZXMgdGhhdCBwcm92aWRlIGluc2lnaHRzIGJleW9uZCB0aGUKdHlwaWNhbCBhZ2dyZWdhdGVkIGFjdHVhcmlhbCBwcmFjdGljZXMgaW4gUCZDLiBBZGRpdGlvbmFsbHksIHRoZSBtb2RlbAppcyBhIHNob3djYXNlIGZvciB0aGUgc3RhdGlzdGljYWwgcG93ZXIgdGhhdCB0aGUgUiBQcm9ncmFtbWluZyBsYW5ndWFnZQpjYW4gcHJvdmlkZSwgc3BlY2lmaWNhbGx5IGZvciB0aG9zZSB3aXRoIGFwcmlvcmkgc3RhdGlzdGljYWwgYW5kCm1hdGhlbWF0aWNhbCBrbm93bGVkZ2UgaW4gYXBwbGllZCBwcmVkaWN0aXZlIGFuYWx5dGljcyBhbmQgcHJvYmFiaWxpdHkKdGhlb3J5LgoKSSBkZWNpZGVkIHRvIHVzZSBvbmx5IGEgZmV3IHZlcnkgY29tbW9uIHByZWRpY3RvciB2YXJpYWJsZXMgc28gdGhlIG1vZGVsCmNvdWxkIGVhc2lseSBiZSBhcHBsaWVkIHRvIG90aGVyIGRhdGEgc2V0cy4gRm9yIHRyYW5zcGFyZW5jeSBhbmQgdG8gYWlkCmludGVyZXN0ZWQgaW5kaXZpZHVhbHMsIEkgcHJvdmlkZSB0aGlzIHJlcG9ydCB3aXRoIGFjY2VzcyB0byB0aGUgYFJgCmNvZGUgdXNlZCB0byBmaXQgYW5kIHJ1biBwcmVkaWN0aW9ucy4gVGhlIGNvZGUgY2FuIGJlIHZpZXdlZCBieSBjbGlja2luZwp0aGUgYGNvZGVgIGJveGVzIG9uIHRoZSByaWdodCBzaWRlIG9mIHRoZSByZXBvcnQuIFRoZSBgUmAgc2F2dnkgcmVhZGVyCmNhbiBydW4gdGhlIGBSYCBjb2RlIHRvIHJlcHJvZHVjZSB0aGUgb3V0cHV0LCBhcHBseSB0aGUgbW9kZWwgdG8gb3RoZXIKZGF0YSBzZXRzLCBhbmQgZXhwYW5kIGFuZCBpbXByb3ZlIHVwb24gdGhlIG1vZGVsLgoKVGhlIG1vZGVsIGlzIG9ubHkgYXBwbGljYWJsZSB0byByZXBvcnRlZCBjbGFpbXMgYW5kIHRoZWlyIGNvcnJlc3BvbmRpbmcKaW5jcmVtZW50YWwgcGF5bWVudHMuIElCTlIgY2xhaW0gcHJlZGljdGlvbnMgYXJlIGJleW9uZCB0aGUgc2NvcGUgb2YKdGhpcyBtb2RlbC4KCiMjIFZvY2FidWxhcnkKCkZvciBjb25zaXN0ZW5jeSBhbmQgY2xhcml0eSBJIHVzZSB0aGUgZm9sbG93aW5nIHRlcm1zOgoKLSAgICoqUmVzcG9uc2UgVmFyaWFibGUqKiBUaGUgdmFsdWUgYmVpbmcgcHJlZGljdGVkIGJ5IHRoZSBtb2RlbCAoY2xhaW0KICAgIHN0YXR1cyBhbmQgY2xhaW0gaW5jcmVtZW50YWwgcGF5bWVudCBpbiB0aGlzIHJlcG9ydCkKLSAgICoqUHJlZGljdG9yIFZhcmlhYmxlKiogVGhlIHZhbHVlcyB1c2VkIHRvIGZpdCB0aGUgbW9kZWwgb3IgdG8KICAgIHByZWRpY3QgdGhlIHJlc3BvbnNlIHZhcmlhYmxlIChpLmUuIEkgdXNlIGNlcnRhaW4gY2xhaW0KICAgIGNoYXJhY3RlcmlzdGljcyBhcyBwcmVkaWN0b3IgdmFyaWFibGUgdG8gbW9kZWwgYW5kIHByZWRpY3QgdGhlCiAgICByZXNwb25zZSB2YXJpYWJsZSkKCiMjIERhdGEKCkluIHRoZSBzcGlyaXQgb2YgbWltaWNraW5nIHRoZSByZWFsIHdvcmxkLCB0aGlzIHJlcG9ydCBjb21tdW5pY2F0ZXMgdGhlCm1vZGVsIHRocm91Z2ggYSB3b3JraW5nIGV4YW1wbGUgdXNpbmcgcmVhbCBhdXRvLWxpYWJpbGl0eSBkYXRhIHN1cHBsaWVkCm1vc3RseSBmcm9tIHRoZSBbaW5zdXJhbmNlRGF0YSBSClBhY2thZ2VdKGh0dHBzOi8vY3Jhbi5yLXByb2plY3Qub3JnL3dlYi9wYWNrYWdlcy9pbnN1cmFuY2VEYXRhL2luc3VyYW5jZURhdGEucGRmKQooW0dpdEh1YiBSZXBvXShodHRwczovL2dpdGh1Yi5jb20vY3Jhbi9pbnN1cmFuY2VEYXRhKSkgYXMgd2VsbCBhcwpwdWJsaWNseSBhdmFpbGFibGUgZGF0YSBzdXBwbGllZCBieSB0aGUgKipDQVMqKi4KCk5vdGUgdGhhdCB0aGlzIHNwZWNpZmljIG1vZGVsIGhhcyBiZWVuIHR1bmVkIHRvIGZvcm0gcHJlZGljdGlvbnMgcmVsYXRlZApzcGVjaWZpY2FsbHkgdG8gKkJvZGlseSBJbmp1cnkqIGNsYWltcyBvbmx5LCBhcyB0aGVzZSBjbGFpbXMgZHJpdmUgdGhlCmZvdW5kYXRpb24gb2YgdGhlIHJpc2sgYmVoaW5kIEF1dG8gTGlhYmlsaXR5IHJlc2VydmluZyBhbmQgcmF0ZS1tYWtpbmcuCgpUaGF0IGJlaW5nIHNhaWQsIGFsdGhvdWdoIHRoZSByZXN1bHRzIG9mIHRoZSBtb2RlbCBhcmUgc3BlY2lmaWMgdG8gQXV0bwpMaWFiaWxpdHkgaW4gdGhpcyBpbnN0YW5jZSwgdGhlIG1vZGVsaW5nIHRlY2huaXF1ZXMgYW5kIG1hY2hpbmUtbGVhcm5lZAp0dW5pbmcgcHJvY2VkdXJlcyBjYW4gZWFzaWx5IGJlIGdlbmVyYWxpemVkIHRvIG90aGVyIGxpbmVzIG9mIGNvdmVyYWdlLAphcmVhcyBvZiBidXNpbmVzcywgYW5kIHJpc2sgcG9ydGZvbGlvcy4KCi0gICBSIENvZGUgZm9yIERhdGEgTG9hZCBhbmQgSW5nZXN0aW9uOgoKYGBge3IgbG9hZF9kYXRhLCBtZXNzYWdlPUZBTFNFfQpsaWJyYXJ5KGRwbHlyLCB3YXJuLmNvbmZsaWN0cyA9IEZBTFNFKQpsaWJyYXJ5KHRpZHlyKQpsaWJyYXJ5KGNhcmV0LCB3YXJuLmNvbmZsaWN0cyA9IEZBTFNFKQpsaWJyYXJ5KGx1YnJpZGF0ZSkKbGlicmFyeShnZ3Bsb3QyLCB3YXJuLmNvbmZsaWN0cyA9IEZBTFNFKQpsaWJyYXJ5KGtuaXRyKQpsaWJyYXJ5KERpYWdyYW1tZVIpCmxpYnJhcnkoc2NhbGVzKQpsaWJyYXJ5KHNoaW55KQpyZXF1aXJlKGUxMDcxKSAKcmVxdWlyZShiaW5kcmNwcCkKbGlicmFyeShxcykKbGlicmFyeSh3ZWJzaG90KQoKIyB0dXJuIG9mZiBzY2llbnRpZmljIG5vdGF0aW9uIGluIHByaW50aW5nCm9wdGlvbnMoc2NpcGVuID0gOTk5KQoKIyBsb2FkIGRhdGEKY2xhaW1zIDwtIHFzOjpxcmVhZCgiZGF0YS9tb2RlbC1jbGFpbXMucXMiKQoKIyBkZXZlbG9wbWVudCBhZ2UgdG8gcHJvamVjdCBmcm9tCiMgZS5nLiBpZiBJIHNldCB0aGlzIHRvIDE4IEkgd2lsbCB1c2UgaW5mb3JtYXRpb24gYXZhaWxhYmxlCiMgYXMgb2YgdGhlIDE4IG1vbnRoIGV2YWx1YXRpb24gdG8gcHJlZGljdCBzdHVmZiBhdCBhZ2UgMzApCmRldnRfcGVyaW9kIDwtIDMwCgojIHllYXIgdG8gcHJlZGljdCB3aXRoIG1vZGVsCiMgZXZhbHVhdGlvbnMgYXQgb3IgZ3JlYXRlciB0aGFuIHRoaXMgdGltZSB3aWxsIG5vdCBiZSBpbmNsdWRlZCBpbgojIHRoZSBtb2RlbCBmaXQKcHJlZGljdF9ldmFsIDwtIGFzLkRhdGUoIjIwMTAtMTEtMzAiKQoKIyByZW1vdmUgdW5uZWVkZWQgZGF0YQpjbGFpbXMgPC0gZHBseXI6OmZpbHRlcihjbGFpbXMsIAogICAgICAgICAgICAgICAgICAgICAgICBldmFsIDw9IHByZWRpY3RfZXZhbCwKICAgICAgICAgICAgICAgICAgICAgICAgZXZhbCA+PSBwcmVkaWN0X2V2YWwgLSB5ZWFycyg1KSkgJT4lCiAgICAgICAgICAgIGRwbHlyOjpzZWxlY3QoZXZhbCwgZGV2dCwgY2xhaW1fbnVtYmVyLCAKICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXMsIHRvdF9yeCwgdG90X3BkX2luY3IsCiAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzX2FjdCwgdG90X3BkX2luY3JfYWN0KQoKZGV2dF9wZXJpb2RzX25lZWRlZCA8LSBzZXEoNiwgZGV2dF9wZXJpb2QgKyAxMiwgYnkgPSAxMikKCiMgZm9yIHNob3dpbmcgaW4gdHJpYW5nbGUKY2xhaW1zX2Rpc3BsYXkgPC0gZHBseXI6OmZpbHRlcihjbGFpbXMsIGRldnQgJWluJSBkZXZ0X3BlcmlvZHNfbmVlZGVkKQoKIyBvbmx5IG5lZWQgdGhlIGNsYWltcyBhdCB0aGUgc2VsZWN0ZWQgYGRldl9wZXJpb2RgCmNsYWltcyA8LSBkcGx5cjo6ZmlsdGVyKGNsYWltcywgZGV2dCAlaW4lIGRldnRfcGVyaW9kKQpgYGAKCkkgYW0gdXNpbmcgZGF0YSBmcm9tIGZpc2NhbCB5ZWFycyAyMDAzIHRvCmByIGx1YnJpZGF0ZTo6eWVhcihwcmVkaWN0X2V2YWwpICsgMWAuCgpGaXNjYWwgeWVhcnMgYmVnaW4gYXQgNi8xIG9mIHRoZSB5ZWFyIHByaW9yIHRvIHRoZSBmaXNjYWwgeWVhciBhbmQgZW5kCmF0IDUvMzEgb2YgdGhlIGZpc2NhbCB5ZWFyIChpLmUuIGZpc2NhbCB5ZWFyIDIwMDMgaW5jbHVkZXMgY2xhaW1zIHdoaWNoCm9jY3VycmVkIGJldHdlZW4gNi8xLzIwMDIgYW5kIDUvMzEvMjAwMykuCgpUaGUgY2xhaW1zIGFyZSBldmFsdWF0ZWQgYXQgMTEvMzAgb2YgZWFjaCB5ZWFyIGZyb20gMjAwMiB0bwpgciBsdWJyaWRhdGU6OnllYXIocHJlZGljdF9ldmFsKWAuCgpJIGNyZWF0ZWQgYSBsYXJnZSBkYXRhIHNldCBjb250YWluaW5nIGFsbCB0aGUgZGF0YSB1c2VkIGluIGZpdHRpbmcgdGhlCm1vZGVsIGFuZCBtYWtpbmcgcHJlZGljdGlvbnMgZnJvbSB0aGUgbW9kZWwuCgpUaGUgb3JpZ2luYWwgZGF0YSBhbmQgdGhlIHNjcmlwdCB1c2VkIHRvIHByZXBhcmUgdGhlIGxhcmdlIGRhdGEgc2V0IHVzZWQKaW4gdGhpcyByZXBvcnQgaXMgbG9jYXRlZCBpbiB0aGUgYGRhdGEvYCBkaXJlY3RvcnkgYW5kIGRldGFpbHMgY2FuIGJlCnZpZXdlZCBpbiB0aGlzIHJlcG9ydCdzIEFwcGVuZGl4LgoKIyBUaGUgTW9kZWwKClRoZSBtb2RlbCB1c2VzIHNldmVyYWwgYWR2YW5jZWQgc3RhdGlzdGljYWwgdGVjaG5pcXVlcy4gRm9yIGNvbXBhY3RuZXNzCmFuZCBiZWNhdXNlIEkgbGFjayB0aGUgZXhwZXJ0aXNlIHRvIGV4cGxhaW4gZXZlcnl0aGluZyBpbiBkZXRhaWwsIGEKY29tcHJlaGVuc2l2ZSBleHBsYW5hdGlvbiBvZiB0aGVzZSB0ZWNobmlxdWVzIGlzIGJleW9uZCB0aGUgc2NvcGUgb2YKdGhpcyBhbmFseXNpcy4KCldoZXJlLWV2ZXIgcG9zc2libGUgSSBoYXZlIGluY2x1ZGVkIGxpbmtzIHRvIGFkZGl0aW9uYWwgcmVzb3VyY2VzIGZvcgpkaXZpbmcgaW50byB0aGUgc3RhdGlzdGljcyBiZWhpbmQgdGhlIG1vZGVsLiBUaGUgc3RhdGlzdGljcyB3aWxsIGJlIG9ubHkKdmVyeSBicmllZmx5IHRvdWNoZWQgdXBvbiBhcyBlYWNoIHRlY2huaXF1ZSBpcyB1c2VkIGluIHRoZSBtb2RlbCBmaXQuCgojIyMgVHJhaW4gYW5kIFRlc3QgRGF0YQoKVGhlIGZpcnN0IHN0ZXAgaW4gZml0dGluZyB0aGUgbW9kZWwgaXMgdG8gZmVlZCB0cmFpbmluZyBkYXRhIGludG8gdGhlCm1vZGVsLgoKSSBhbSB1c2luZyBhbGwgZGF0YSBmcm9tIGZpc2NhbCB5ZWFycyBwcmlvciB0bwpgciBsdWJyaWRhdGU6OnllYXIocHJlZGljdF9ldmFsKSArIDFgIGZyb20gZGV2ZWxvcG1lbnQgdGltZQpgciBkZXZ0X3BlcmlvZGAgbW9udGhzIHRvIGByIGRldnRfcGVyaW9kICsgMTJgIG1vbnRocyB0byBmaXQgdGhlIG1vZGVsLgoKTGF0ZXIgSSB3aWxsIHBhc3MgdGhlIHRlc3QgZGF0YSAoaS5lLiBjbGFpbXMgZnJvbSBmaXNjYWwgeWVhcgpgciBsdWJyaWRhdGU6OnllYXIocHJlZGljdF9ldmFsKSArIDFgIGF0IGByIGRldnRfcGVyaW9kYCBtb250aHMpIHRvCnByZWRpY3QgdGhlIHN0YXR1cyBvZiBlYWNoIG9mIHRoZXNlIGNsYWltcyBhdCBgciBkZXZ0X3BlcmlvZCArIDEyYAptb250aHMgYW5kIHRoZSBpbmNyZW1lbnRhbCBwYXltZW50IHBlciBjbGFpbSBmcm9tIGByIGRldnRfcGVyaW9kYCB0bwpgciBkZXZ0X3BlcmlvZCArIDEyYCBtb250aHMuCgojIyBNb2RlbCBPdmVydmlldyBEaWFncmFtCgpUaGUgZm9sbG93aW5nIGRpYWdyYW0gaWxsdXN0cmF0ZXMgaG93IHRoZSBtb2RlbCBpcyBmaXQ6CgpgYGB7ciBkaWFncmFtMX0KbWVybWFpZCgiCiAgZ3JhcGggVEQKICBBKENsYWltIFRyYWluIERhdGEpLS0+QntGaXQgQ2xvc3VyZSBNb2RlbH0KICBBKENsYWltIFRyYWluIERhdGEpLS0+Q1tSZW1vdmUgQ2xvc2VkLUNsb3NlZF0KICBBKENsYWltIFRyYWluIERhdGEpLS0+RFtSZW1vdmUgWmVybyBQYWlkXQogIEMtLT5Fe0ZpdCBaZXJvIE1vZGVsfQogIEQtLT5Ge0ZpdCBQYXltZW50IE1vZGVsfQoiKQpgYGAKCkFmdGVyIGZpdHRpbmcgdGhlIG1vZGVscyAocGljdHVyZWQgYXMgYSByaG9tYnVzIGluIHRoZSBhYm92ZSBkaWFncmFtKQp3aXRoIHRoZSBjbGFpbXMgdHJhaW5pbmcgZGF0YSBJIGNhbiB1c2UgdGhlIHRocmVlIG1vZGVscyB0byBwcmVkaWN0IGEKcHJvYmFiaWxpdHkgZm9yIHN0YXR1cyBhbmQgemVybyBwYXltZW50IG9yIGEgZG9sbGFyIHZhbHVlIGZvcgppbmNyZW1lbnRhbCBwYXltZW50cyBvbiB0aGUgdGVzdCBkYXRhLgoKVGhlIGNsYWltcyB0ZXN0IGRhdGEgZmxvd3MgdGhyb3VnaCB0aGUgZm9sbG93aW5nIGRpYWdyYW0gdG8gYXJyaXZlIGF0CnRoZSBmaW5hbCBvdXRwdXQ6CgpgYGB7ciBkaWFncmFtMiwgZWNobz1GQUxTRX0KbWVybWFpZCgiCiAgZ3JhcGggVEQKICBBKENsYWltIFRlc3QgRGF0YSktLT5Ce0Nsb3N1cmUgTW9kZWwgKyBTaW11bGF0aW9ufQogIEItLT5DKENsYWltcyBTaW11bGF0ZWQgdG8gYmUgQ2xvc2VkIENsb3NlZCkKICBCLS0+RChBbGwgT3RoZXIgQ2xhaW1zKQogIEQtLT5Fe1plcm8gTW9kZWwgKyBTaW11bGF0aW9ufQogIEUtLT5GKENsYWltcyBTaW11bGF0ZWQgd2l0aCBaZXJvIFBheW1lbnQpCiAgRS0tPkcoQ2xhaW1zIFNpbXVsYXRlZCB3aXRoIFBheW1lbnQpCiAgRy0tPkh7UGF5bWVudCBNb2RlbCArIFNpbXVsYXRpb259CiAgSC0tPkooT3V0cHV0OiBDbGFpbXMgd2l0aCBTaW11bGF0ZWQgU3RhdHVzIGFuZCBQYXltZW50KQogIEMtLT5JW1NpbXVsYXRlZCBQYXltZW50IHNldCB0byBaZXJvXQogIEYtLT5JW1NpbXVsYXRlZCBQYXltZW50IHNldCB0byBaZXJvXQogIEktLT5KCiIsIGhlaWdodCA9IDcwMCkKYGBgCgpBdCBlYWNoIG1vZGVsIChwaWN0dXJlZCBhcyBhIHJob21idXMgaW4gdGhlIGFib3ZlIGRpYWdyYW0pIHRoZSBjbGFpbSBpbgp0aGUgdGVzdCBkYXRhIGlzIGdpdmVuIGEgcHJlZGljdGVkIHZhbHVlIGJhc2VkIG9uIHRoZSBtb2RlbC4gSSB0aGVuIHJ1bgphIHNpbXVsYXRpb24gYmFzZWQgb24gdGhpcyBwcmVkaWN0ZWQgdmFsdWUgdG8gbW9kZWwgcmVhbCB3b3JsZAp2YXJpYWJpbGl0eS4KCkF0IGVhY2ggc3RlcCB0aGUgc2ltdWxhdGVkIGNsYWltcyBhcmUgcGFzc2VkIHRvIHRoZSBuZXh0IG1vZGVsIGJhc2VkIG9uCnRoZSByZXN1bHRzIG9mIHRoZSBzaW11bGF0aW9uIGluIHRoZSBwcmV2aW91cyBtb2RlbCdzIHNpbXVsYXRlZApyZXN1bHRzL3Byb2JhYmlsaXRpZXMuCgojIyBDbGFpbSBDbG9zdXJlIE1vZGVsCgojIyMgQXNzdW1wdGlvbnMKClRvIHByZWRpY3Qgd2hldGhlciBhIGNsYWltIHdpbGwgY2xvc2Ugd2l0aGluIGEgZ2l2ZW4gcGVyaW9kIG9mIHRpbWUsIEkKdXNlIGEgbG9naXN0aWMgcmVncmVzc2lvbiB3aXRoICpjZW50ZXIsIHNjYWxlLCBhbmQKW1llby1Kb2huc29uXShodHRwczovL3d3dy5zdGF0LnVtbi5lZHUvYXJjL3lqcG93ZXIucGRmKSB0cmFuc2Zvcm1hdGlvbnMqCmFwcGxpZWQgdG8gYWxsIGNvbnRpbnVvdXMgcHJlZGljdG9yIHZhcmlhYmxlcy4KCkkgYW0gbW9kZWxpbmcgdGhlIGZvbGxvd2luZyB2YXJpYWJsZXM6CgoqKlJlc3BvbnNlIFZhcmlhYmxlKioKCi0gICAqc3RhdHVzX2FjdCogQWN0dWFsIGNsYWltIHN0YXR1cyBhdCBgciBkZXZ0X3BlcmlvZCArIDEyYCBtb250aHMuCgoqKlByZWRpY3RvciBWYXJpYWJsZXMqKgoKLSAgICpzdGF0dXMqIENsYWltIHN0YXR1cyBhdCBgciBkZXZ0X3BlcmlvZGAgbW9udGhzICgiQyIgZm9yIENsb3NlZCBhbmQKICAgICJPIiBmb3Igb3BlbikuCi0gICAqdG90X3J4KiBUb3RhbCBjYXNlIHJlc2VydmUgZG9sbGFyIHZhbHVlIGF0IGByIGRldnRfcGVyaW9kYC4KLSAgICp0b3RfcGRfaW5jciogVG90YWwgaW5jcmVtZW50YWwgcGFpZCBsb3NzIGRvbGxhciB2YWx1ZSBiZXR3ZWVuCiAgICBgciBkZXZ0X3BlcmlvZCAtIDEyYCBtb250aHMgYW5kIGByIGRldnRfcGVyaW9kYCBtb250aHMuCgojIyMgRGF0YSBQcmVwYXJhdGlvbgoKYGBge3IgY21fZGF0YV9wcmVwfQojIHJlbW92ZSBkYXRhIHRoZSBzYW1lIHZhbHVhdGlvbiBvciBuZXdlciB0aGFuIHRoZSBwcmVkaWN0aW9uIGV2YWwKIyBPbmx5IGNsYWltcyBmcm9tIHZhbHVhdGlvbnMgYmVmb3JlIHRoZSB2YWx1YXRpb24gSSBhbSBwcmVkaWN0aW5nIHdpbGwgYmUgdXNlZAojIHRvIGZpdCB0aGUgbW9kZWwKbW9kZWxfZGF0YSA8LSBkcGx5cjo6ZmlsdGVyKGNsYWltcywgZXZhbCA8IHByZWRpY3RfZXZhbCkKYGBgCgojIyMgTW9kZWwgRml0CgpUaGUgbW9kZWwgZml0IHVzZXMgKioxMC1mb2xkIGNyb3NzIHZhbGlkYXRpb24qKiB0byBvcHRpbWl6ZSBjb2VmZmljaWVudAplc3RpbWF0aW9uIGFuZCBhICpzdGVwd2lzZSBBa2Fpa2kgSW5mb3JtYXRpb24gQ3JpdGVyZW9uIChBSUMpKiBhbGdvcml0aG0KZm9yIGZlYXR1cmUgc2VsZWN0aW9uOgoKYGBge3IgY21fbW9kZWxfZml0LCBtZXNzYWdlPUZBTFNFLCB3YXJuaW5nPUZBTFNFfQpjbV9tb2RlbCA8LSBjYXJldDo6dHJhaW4oc3RhdHVzX2FjdCB+IHN0YXR1cyArIHRvdF9yeCArIHRvdF9wZF9pbmNyLCAKICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBtb2RlbF9kYXRhLAogICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kID0gImdsbVN0ZXBBSUMiLAogICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2UgPSBGQUxTRSwKICAgICAgICAgICAgICAgICAgICAgICAgIHByZVByb2Nlc3MgPSBjKCJjZW50ZXIiLCAic2NhbGUiLCAiWWVvSm9obnNvbiIpLAogICAgICAgICAgICAgICAgICAgICAgICAgdHJDb250cm9sID0gdHJhaW5Db250cm9sKG1ldGhvZCA9ICJyZXBlYXRlZGN2IiwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0cyA9IDIpKQpgYGAKCmBgYHtyIGNtX3N1bW1hcnksIHJlc3VsdHMgPSAiYXNpcyJ9CmNtX3N1bW1hcnkgPC0gY21fbW9kZWwkcmVzdWx0c1ssIC0xXQoKa2FibGUoY21fc3VtbWFyeSwKICAgICAgZGlnaXRzID0gNSwKICAgICAgcm93Lm5hbWVzID0gRkFMU0UpCmBgYAoKRm9yIGEgbW9yZSBkZXRhaWxlZCBzdGF0aXN0aWNhbCBzdW1tYXJ5IG9mIHRoZSBjbGFpbSBjbG9zdXJlIG1vZGVsIGZpdHMKc2VlIEFwcGVuZGl4IGBjbV9zdW1tYXJ5YAoKYGBge3IgY21fcHJvYiwgd2FybmluZz1GQUxTRSwgbWVzc2FnZT1GQUxTRX0KY21fcHJvYnMgPC0gY2JpbmQobW9kZWxfZGF0YSwgcHJlZGljdChjbV9tb2RlbCwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3ZGF0YSA9IG1vZGVsX2RhdGEsIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgPSAicHJvYiIpKQojIGZpbmQgdGhlIGxvZ2l0IHZhbHVlCmNtX3Byb2JzJGxvZ2l0cyA8LSBsb2coY21fcHJvYnMkTyAvIGNtX3Byb2JzJEMpCmBgYAoKSW4gdGhlIHBsb3RzIGJlbG93IHRoZSBibHVlIGxpbmUgaW5kaWNhdGVzIHRoZSBmaXR0ZWQgcHJvYmFiaWxpdHkgb2YgdGhlCmNsYWltIGF0IGFnZSBgciBkZXZ0X3BlcmlvZGAgbW9udGhzIGJlaW5nIG9wZW4gYXQgYWdlCmByIGRldnRfcGVyaW9kICsgMTJgIG1vbnRocy4KClRoZSByZWQgZG90cyBhdCB0aGUgdG9wIGFuZCBib3R0b20gYXJlIHRoZSBhY3R1YWwgc3RhdHVzIGZvciB0aGUKdHJhaW5pbmcgZGF0YSBhdCBgciBkZXZ0X3BlcmlvZCArIDEyYCBtb250aHMgKGkuZS4gbW9kZWwgZml0cyB0aGUgYmx1ZQpsaW5lIHRvIHRoZSByZWQgZG90cykuCgpgYGB7ciBjbV9sb2dpdF9wbG90LCBmaWcuaGVpZ2h0PTMsIHdhcm5pbmc9RkFMU0V9CmNtX3Byb2JzJHN0YXR1c19hY3QgPC0gaWZlbHNlKGNtX3Byb2JzJHN0YXR1c19hY3QgPT0gIkMiLCAwLCAxKQogIApnZ3Bsb3QoY21fcHJvYnMsIGFlcyh4ID0gbG9naXRzLCB5ID0gc3RhdHVzX2FjdCkpICsKICAgICAgIGdlb21fcG9pbnQoY29sb3VyID0gInJlZCIsIAogICAgICAgICAgICAgICAgICBwb3NpdGlvbiA9IHBvc2l0aW9uX2ppdHRlcihoZWlnaHQgPSAwLjEsIHdpZHRoID0gMC4xKSwKICAgICAgICAgICAgICAgICAgc2l6ZSA9IDAuNSwKICAgICAgICAgICAgICAgICAgYWxwaGEgPSAwLjIpICsgCiAgICAgICBnZW9tX3Ntb290aChtZXRob2QgPSAiZ2xtIiwgbWV0aG9kLmFyZ3MgPSBsaXN0KGZhbWlseSA9ICJiaW5vbWlhbCIpLCAKICAgICAgICAgICAgICAgICAgIHNpemUgPSAxKSArIAogICAgICAgeWxhYigiUHJvYmFiaWxpdHkgT3BlbiIpICsKICAgICAgIHhsYWIoIkxvZ2l0IE9kZHMiKSArCiAgICAgICBnZ3RpdGxlKHBhc3RlMCgiQWdlICIsIGRldnRfcGVyaW9kLCAiIHRvICIsIGRldnRfcGVyaW9kICsgMTIsICIgTW9udGhzIENsYWltIE9wZW4gUHJvYmFiaWxpdGllcyIpKQpgYGAKCiMjIFplcm8gUGF5bWVudCBNb2RlbAoKIyMjIEFzc3VtcHRpb25zCgpUaGUgemVybyBwYXltZW50IG1vZGVsIGlzIHNpbWlsYXIgdG8gdGhlIGNsYWltIGNsb3N1cmUgbW9kZWwgaW4gdGhhdCBJCmFtIGxvb2tpbmcgYXQgYSAqYmlub21pYWwgcmVzcG9uc2UgdmFyaWFibGUqLiBJIGFtIG1vZGVsaW5nIHdoZXRoZXIgdGhlCmNsYWltIGhhcyB6ZXJvIG9yIG5vbnplcm8gaW5jcmVtZW50YWwgcGF5bWVudHMuCgpJIHJlbW92ZSBhbGwgY2xhaW1zIHRoYXQgaGF2ZSBhIHN0YXR1cyBhdCBgciBkZXZ0X3BlcmlvZGAgbW9udGhzIG9mCmNsb3NlZCBhbmQgYSBzdGF0dXMgb2YgY2xvc2VkIGF0IGByIGRldnRfcGVyaW9kICsgMTJgIChJIHJlZmVyIHRvIHRoZXNlCmNsYWltcyBhcyBgY2xvc2VkLWNsb3NlZGAgY2xhaW1zKS4gCgpBZGRpdGlvbmFsbHksIEkgYXNzdW1lIHRoYXQgYWxsIG9mIHRoZXNlIGNsYWltcyB3aWxsIHVsdGltYXRlbHkgaGF2ZSB6ZXJvIGluY3JlbWVudGFsIHBheW1lbnRzIGluIHRoZSBmaW5hbCBwYXltZW50IG1vZGVsLgoKKipSZXBvbnNlIFZhcmlhYmxlKioKCi0gICAqemVybyogRmFjdG9yIGluZGljYXRpbmcgd2hldGhlciB0aGUgY2xhaW0gaGFkIHplcm8gb3Igbm9uemVybwogICAgaW5jcmVtZW50YWwgcGF5bWVudHMgYmV0d2VlbiBhZ2UgYHIgZGV2dF9wZXJpb2RgIG1vbnRocyBhbmQKICAgIGByIGRldnRfcGVyaW9kICsgMTJgIG1vbnRocy4KCioqUHJlZGljdG9yIFZhcmlhYmxlcyoqCgotICAgKnN0YXR1c19hY3QqIEFjdHVhbCBjbGFpbSBzdGF0dXMgYXQgYHIgZGV2dF9wZXJpb2QgKyAxMmAgbW9udGhzCiAgICAoIkMiIiBmb3IgQ2xvc2VkIGFuZCAiTyIiIGZvciBvcGVuKS4KLSAgICpzdGF0dXMqIENsYWltIHN0YXR1cyBhdCBgciBkZXZ0X3BlcmlvZGAgbW9udGhzCi0gICAqdG90X3J4KiBUb3RhbCBjYXNlIHJlc2VydmUgZG9sbGFyIHZhbHVlIGF0IGByIGRldnRfcGVyaW9kYCBtb250aHMuCi0gICAqdG90X3BkX2luY3IqIFRvdGFsIGluY3JlbWVudGFsIHBhaWQgbG9zcyBkb2xsYXIgdmFsdWUgYmV0d2VlbgogICAgYHIgZGV2dF9wZXJpb2QgLSAxMmAgbW9udGhzIGFuZCBgciBkZXZ0X3BlcmlvZGAgbW9udGhzLgoKTm90ZTogSSBjb3VsZCB1c2UgYHN0YXR1c19hY3RgIGFzIGEgcHJlZGljdG9yIHZhcmlhYmxlIGhlcmUgYmVjYXVzZSBmb3IKdGhlIHRlc3QgZGF0YSBJIHdpbGwgc2ltdWxhdGUgdGhlIHN0YXR1cyBhdCBgciBkZXZ0X3BlcmlvZCArIDEyYCBmaXJzdAphbmQgdGhlbiB1c2UgdGhhdCBzaW11bGF0ZWQgc3RhdHVzIGFzIGEgcHJlZGljdG9yIHZhcmlhYmxlIGluIHRoZSB6ZXJvCnBheW1lbnQgbW9kZWwuCgojIyMgRGF0YSBQcmVwCgpgYGB7ciB6bV9kYXRhX3ByZXB9CiMgcmVtb3ZlIGFsbCBjbGFpbXMgdGhhdCBoYXZlIGEgY2xvc2VkIGNsb3NlZCBzdGF0dXMgZnJvbSB0aGUgZGF0YQojIHRoZXNlIHdpbGwgYmUgc2V0IHRvIGluY3JlbWVudGFsIHBheW1lbnRzIG9mIDAKem1fbW9kZWxfZGF0YSA8LSBmaWx0ZXIobW9kZWxfZGF0YSwgc3RhdHVzID09ICJPIiB8ICBzdGF0dXNfYWN0ID09ICJPIikKCiMgQWRkIGluIHJlc3BvbnNlIHZhcmlhYmxlIGZvciB6ZXJvIHBheW1lbnQ6CnptX21vZGVsX2RhdGEkemVybyA8LSBmYWN0b3IoaWZlbHNlKHptX21vZGVsX2RhdGEkdG90X3BkX2luY3JfYWN0ID09IDAsIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiWmVybyIsICJOb25aZXJvIikpCmBgYAoKIyMjIEZpdAoKSSB1c2UgdGhlIHNhbWUgZGF0YSBwcmVwYXJlZCBmb3IgdGhlIGNsYWltIGNsb3N1cmUgbW9kZWwgdG8gZml0IHRoZSB6ZXJvCnBheW1lbnQgbW9kZWwuCgpgYGB7ciB6bV9tb2RlbF9maXQsIGNhY2hlPVRSVUUsIG1lc3NhZ2UgPSBGQUxTRSwgd2FybmluZyA9IEZBTFNFfQp6bV9tb2RlbCA8LSBjYXJldDo6dHJhaW4oemVybyB+IHN0YXR1cyArIHN0YXR1c19hY3QgKyB0b3RfcnggKyB0b3RfcGRfaW5jciwgCiAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhID0gem1fbW9kZWxfZGF0YSwKICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZCA9ICJnbG1TdGVwQUlDIiwKICAgICAgICAgICAgICAgICAgICAgICAgIHRyYWNlID0gRkFMU0UsCiAgICAgICAgICAgICAgICAgICAgICAgICBwcmVQcm9jZXNzID0gYygiY2VudGVyIiwgInNjYWxlIiwgIlllb0pvaG5zb24iKSwKICAgICAgICAgICAgICAgICAgICAgICAgIHRyQ29udHJvbCA9IHRyYWluQ29udHJvbChtZXRob2QgPSAicmVwZWF0ZWRjdiIsIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdHMgPSAyKSkKYGBgCgpgYGB7ciB6bV9zdW1tYXJ5LCByZXN1bHRzID0gImFzaXMifQp6bV9zdW1tYXJ5IDwtIHptX21vZGVsJHJlc3VsdHNbLCAtMV0KCmthYmxlKHptX3N1bW1hcnksCiAgICAgIHJvdy5uYW1lcyA9IEZBTFNFKQpgYGAKCmBgYHtyIHptX3Byb2IsIHdhcm5pbmc9RkFMU0UsIG1lc3NhZ2U9RkFMU0V9CnptX3Byb2JzIDwtIGNiaW5kKHptX21vZGVsX2RhdGEsIHByZWRpY3Qoem1fbW9kZWwsIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ld2RhdGEgPSB6bV9tb2RlbF9kYXRhLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlID0gInByb2IiKSkKCnptX3Byb2JzJGxvZ2l0cyA8LSBsb2coem1fcHJvYnMkTm9uWmVybyAvIHptX3Byb2JzJFplcm8pCmBgYAoKSW4gdGhlIHBsb3RzIGJlbG93LCB0aGUgYmx1ZSBsaW5lIGluZGljYXRlcyB0aGUgZml0dGVkIHByb2JhYmlsaXR5IG9mCnRoZSBjbGFpbSBoYXZpbmcgYSBwYXltZW50cyBiZXR3ZWVuIGFnZSBgciBkZXZ0X3BlcmlvZGAgYW5kCmByIGRldnRfcGVyaW9kICsgMTJgIG1vbnRocy4gVGhlIHJlZCBkb3RzIGF0IHRoZSB0b3AgYXJlIHRoZSBhY3R1YWwKY2xhaW1zIHdpdGggcGF5bWVudHMgYmV0d2VlbiBhZ2UgYHIgZGV2dF9wZXJpb2RgIGFuZApgciBkZXZ0X3BlcmlvZCArIDEyYCBtb250aHMsIGFuZCB0aGUgZG90cyBhdCB0aGUgYm90dG9tIGFyZSB0aGUgY2xhaW1zCndpdGggemVybyBwYXltZW50cyBkdXJpbmcgdGhpcyB0aW1lIHBlcmlvZC4gKGkuZS4gWmVybyBQYXltZW50IG1vZGVsCmZpdHMgdGhlIGJsdWUgbGluZSB0byB0aGUgcmVkIGRvdHMpCgpgYGB7ciB6bV9wbG90cywgZmlnLmhlaWdodD0zLCB3YXJuaW5nPUZBTFNFfQp6bV9wcm9icyR6ZXJvIDwtIGlmZWxzZSh6bV9wcm9icyR6ZXJvID09ICJaZXJvIiwgMCwgMSkKICAKZ2dwbG90KHptX3Byb2JzLCBhZXMoeCA9IGxvZ2l0cywgeSA9IHplcm8pKSArCiAgICAgICBnZW9tX3BvaW50KGNvbG91ciA9ICJyZWQiLCAKICAgICAgICAgICAgICAgICAgcG9zaXRpb24gPSBwb3NpdGlvbl9qaXR0ZXIoaGVpZ2h0ID0gMC4xLCB3aWR0aCA9IDAuMSksCiAgICAgICAgICAgICAgICAgIHNpemUgPSAwLjUsCiAgICAgICAgICAgICAgICAgIGFscGhhID0gMC4yKSArIAogICAgICAgZ2VvbV9zbW9vdGgobWV0aG9kID0gImdsbSIsIG1ldGhvZC5hcmdzID0gbGlzdChmYW1pbHkgPSAiYmlub21pYWwiKSwgCiAgICAgICAgICAgICAgICAgICBzaXplID0gMSkgKyAKICAgICAgIHlsYWIoIlBheW1lbnQgUHJvYmFiaWxpdHkiKSArCiAgICAgICB4bGFiKCJMb2dpdCBPZGRzIikgKwogICAgICAgZ2d0aXRsZShwYXN0ZTAoIkFnZSAiLCBkZXZ0X3BlcmlvZCwgIiB0byAiLCBkZXZ0X3BlcmlvZCArIDEyLCAKICAgICAgICAgICAgICAgICAgICAgICIgTm9uLVplcm8gSW5jcmVtZW50YWwgUGF5bWVudCIpKQpgYGAKCiMjIEluY3JlbWVudGFsIFBheW1lbnQgTW9kZWwKCiMjIyBBc3N1bXB0aW9ucwoKVGhlIGluY3JlbWVudGFsIHBheW1lbnQgbW9kZWwgbW9kZWxzIGluY3JlbWVudGFsIHBheW1lbnRzIGJldHdlZW4KYHIgZGV2dF9wZXJpb2RgIGFuZCBgciBkZXZ0X3BlcmlvZCArIDEyYC4gVGhlIGluY3JlbWVudGFsIHBheW1lbnQgbW9kZWwKdXNlcyBhIGdlbmVyYWxpemVkIGFkZGl0aXZlIG1vZGVsIChHQU0pIHdpdGggYW4gaW50ZWdyYXRlZCBzbW9vdGhuZXNzCmVzdGltYXRpb24gYW5kIGEgKipxdWFzaS1wb2lzc29uIGxvZyBsaW5rIGZ1bmN0aW9uKiogOykuCgoqKlJlc3BvbnNlIFZhcmlhYmxlKioKCi0gICAqdG90X3BkX2luY3JfYWN0KiBUb3RhbCBpbmNyZW1lbnRhbCBwYXltZW50IGJldHdlZW4gYHIgZGV2dF9wZXJpb2RgCiAgICBhbmQgYHIgZGV2dF9wZXJpb2QgKyAxMmAgbW9udGhzLgoKKipQcmVkaWN0b3IgVmFyaWFibGVzKioKCi0gICAqc3RhdHVzX2FjdCogVGhlIGFjdHVhbCBzdGF0dXMgYXQgYHIgZGV2dF9wZXJpb2QgKyAxMmAgbW9udGhzLgotICAgKnRvdF9yeCogVG90YWwgY2FzZSByZXNlcnZlIGRvbGxhciB2YWx1ZSBhdCBgciBkZXZ0X3BlcmlvZGAgbW9udGhzLgotICAgKnRvdF9wZF9pbmNyKiBJbmNyZW1lbnRhbCBwYXltZW50cyBiZXR3ZWVuIGByIGRldnRfcGVyaW9kIC0gMTJgIGFuZAogICAgYHIgZGV2dF9wZXJpb2RgIG1vbnRocy4KCiMjIyBEYXRhIFByZXAKCmBgYHtyIHBheW1lbnRfZGF0YV9wcmVwfQojVGFrZSBvdXQgemVybyBwbW50czoKbnptX21vZGVsX2RhdGEgPC0gem1fbW9kZWxfZGF0YVt6bV9tb2RlbF9kYXRhJHRvdF9wZF9pbmNyX2FjdCA+IDAsIF0KYGBgCgojIyMgRml0CgpgYGB7ciBuem1fbW9kZWxfZml0fQojIGZpdCBpbmNyZW1lbnRhbCBwYXltZW50IG1vZGVsCm56bV9tb2RlbCA8LSBtZ2N2OjpnYW0odG90X3BkX2luY3JfYWN0IH4gc3RhdHVzX2FjdCArIHModG90X3J4KSArIHModG90X3BkX2luY3IpLAogICAgICAgICAgICAgICAgICAgICAgIGRhdGEgPSBuem1fbW9kZWxfZGF0YSwKICAgICAgICAgICAgICAgICAgICAgICBmYW1pbHkgPSBxdWFzaXBvaXNzb24obGluayA9ICJsb2ciKSkKYGBgCgpgYGB7ciBuem1fcHJlZGljdF90cmFpbmluZywgd2FybmluZz1GQUxTRSwgbWVzc2FnZT1GQUxTRX0KbnptX2ZpdCA8LSBjYmluZChuem1fbW9kZWxfZGF0YSwgCiAgICAgICAgICAgICAgICAgdG90X3BkX2luY3Jfc2ltID0gZXhwKHByZWRpY3QobnptX21vZGVsLCBuZXdkYXRhID0gbnptX21vZGVsX2RhdGEpKSkKYGBgCgpgYGB7ciBuem1fcGxvdHMsIGZpZy5oZWlnaHQ9Mywgd2FybmluZz1GQUxTRX0KIyBwbG90cyB0byBiZSBkZXRlcm1pbmVkCmBgYAoKIyBTaW11bGF0aW9uCgojIyBDbG9zdXJlIFN0YXR1cwoKYGBge3IgY21fcHJlZGljdCwgY2FjaGUgPSBUUlVFfQpzZXQuc2VlZCgxMjM0KQpuX3NpbXMgPC0gMjAwMAoKY21fcHJlZF9kYXRhIDwtIGRwbHlyOjpmaWx0ZXIoY2xhaW1zLCBldmFsID09IHByZWRpY3RfZXZhbCkKCmNtX3Byb2JzIDwtIGNiaW5kKGNtX3ByZWRfZGF0YSwgCiAgICAgICAgICAgICAgICAgIHByZWRpY3QoY21fbW9kZWwsIG5ld2RhdGEgPSBjbV9wcmVkX2RhdGEsIHR5cGUgPSAicHJvYiIpKQogIApjbV9wcmVkIDwtIGxhcHBseShjbV9wcm9icyRPLCByYmlub20sIG4gPSBuX3NpbXMsIHNpemUgPSAxKQpjbV9wcmVkIDwtIG1hdHJpeCh1bmxpc3QoY21fcHJlZCksIG5jb2wgPSBuX3NpbXMsIGJ5cm93ID0gVFJVRSkKY21fcHJlZCA8LSBpZmVsc2UoY21fcHJlZCA9PSAxLCAiTyIsICJDIikKY21fcHJlZCA8LSBhcy5kYXRhLmZyYW1lKGNtX3ByZWQpCmBgYAoKSSB1c2UgdGhlIHByb2JhYmlsaXRpZXMgcmV0dXJuZWQgZnJvbSB0aGUgY2xvc3VyZSBtb2RlbCB0byBzaW11bGF0ZSB0aGUKc3RhdHVzIG9mIGFsbCBvZiB0aGUgY2xhaW1zLgoKSSBzaW11bGF0ZSBlYWNoIGNsYWltIGByIG5fc2ltc2AgdGltZXMuCgpUaGUgdGFibGUgYmVsb3cgc2hvd3Mgc2VsZWN0ZWQgYWdlIGByIGRldnRfcGVyaW9kYCBjbGFpbXMgYWZ0ZXIgdGhleSBoYWQKdGhlaXIgY2xvc3VyZSBwcm9iYWJpbGl0eSBwcmVkaWN0ZWQgYnkgdGhlIGNsb3N1cmUgbW9kZWwgYW5kIHRoZWlyCnN0YXR1cyBzaW11bGF0ZWQgdXNpbmcgYSBzaW11bGF0ZWQgYmlub21pYWwgcmFuZG9tIHZhcmlhYmxlLgoKYGBge3IgY21fcHJlZGljdF90YWJsZSwgcmVzdWx0cyA9ICJhc2lzIn0KY21fb3V0IDwtIGNtX3Byb2JzCgpjbV9vdXQgPC0gZHBseXI6OnNlbGVjdChjbV9vdXQsIGNsYWltX251bWJlciwgc3RhdHVzLCB0b3RfcngsIHRvdF9wZF9pbmNyLCBPKQoKY21fb3V0JHN0YXR1c19zaW0gPC0gY21fcHJlZFssIDFdCmNtX291dCA8LSBjbV9vdXRbYygxLCA2LCAyNCwgMiwgMTApLCBdCm5hbWVzKGNtX291dCkgPC0gYygiQ2xhaW0gTnVtYmVyIiwgIlN0YXR1cyIsICJDYXNlIiwgIlBhaWQgSW5jcmUiLCAKICAgICAgICAgICAgICAgICAgICJQcm9iIE9wZW4iLCAiU2ltIFN0YXR1cyIpCmthYmxlKGNtX291dCwKICAgICAgcm93Lm5hbWVzID0gRkFMU0UpCmBgYAoKVGhlIGBQcm9iIE9wZW5gIGNvbHVtbiBpcyB0aGUgcHJvYmFiaWxpdHkgdGhhdCB0aGUgYWdlIGByIGRldnRfcGVyaW9kYApjbGFpbSB3aWxsIGJlIG9wZW4gYXQgYWdlIGByIGRldnRfcGVyaW9kICsgMTJgIGFzIG1vZGVsZWQgaW4gdGhlIGNsb3N1cmUKbW9kZWwuIFRoZSBgU2ltIFN0YXR1c2AgY29sdW1uIGlzIHRoZSByZXN1bHQgb2YgYSAqQmVybm91bGxpIHNpbXVsYXRpb24qCm9uIGVhY2ggb2YgdGhvc2UgcHJvYmFiaWxpdGllcy4KCkkgYW0gcnVubmluZyB0aGlzIHNpbXVsYXRpb24gYHIgbl9zaW1zYCB0aW1lcyB0byBzaW11bGF0ZSBgciBuX3NpbXNgCmNsb3N1cmUgc2NlbmFyaW9zLgoKVGhlIHNpbXVsYXRpb25zIGFsbG93IG1lIHRvIGRldGVybWluZSB0aGUgY29ycmVzcG9uZGluZyBkaXN0cmlidXRpb24ncwpjb25maWRlbmNlIGludGVydmFscy4KCiMjIFplcm8gUGF5bWVudCBNb2RlbAoKTmV4dCB0aGUgc2ltdWxhdGVkIGNsYWltcyB3aXRoIHRoZWlyIHNpbXVsYXRlZCBzdGF0dXNlcyBoYXZlIHRoZWlyCnByb2JhYmlsaXR5IG9mIGhhdmluZyBhIG5vbiB6ZXJvIGluY3JlbWVudGFsIHBheW1lbnQgc2ltdWxhdGVkIGJ5IHRoZQp6ZXJvIHBheW1lbnQgbW9kZWwuIFRoaXMgcHJvYmFiaWxpdHkgaXMgdGhlbiBzaW11bGF0ZWQgdXNpbmcgdGhlIHNhbWUKcmFuZG9tIGJpbm9taWFsIHNpbXVsYXRpb24gYXBwcm9hY2ggYXMgdXNlZCB3aGVuIHNpbXVsYXRpbmcgY2xvc3VyZQpzdGF0dXMuCgpgYGB7ciB6bV9wcmVkaWN0X2RhdGFfcHJlcH0KIyBwdXQgY2xvc3VyZSBtb2RlbCBwcmVkaWN0aW9ucyB0b2dldGhlcgpjbV9wcmVkIDwtIGNiaW5kKGNtX3Byb2JzWywgYygiY2xhaW1fbnVtYmVyIiksIGRyb3AgPSBGQUxTRV0sIGNtX3ByZWQpCgojIGdhdGhlciBgY21fcHJlZGAgaW50byBhIGxvbmcgZGF0YSBmcmFtZQpjbV9wcmVkIDwtIHRpZHlyOjpnYXRoZXIoY21fcHJlZCwga2V5ID0gInNpbV9udW0iLCAKICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gInN0YXR1c19zaW0iLCAKICAgICAgICAgICAgICAgICAgICAgICAgIC1jbGFpbV9udW1iZXIpCgojIGpvaW4gYHptX3ByZWRfZGF0YWAgdG8gcHJlZGljdGlvbnMgZnJvbSBjbG9zdXJlIG1vZGVsCiMgcmVtb3ZlIHN0YXR1c19hY3QgYW5kIHJlbmFtZSB0aGUgc2ltdWxhdGVkIHN0YXRlcyBhcyBzdGF0dXNfYWN0CnptX3ByZWRfZGF0YSA8LSBsZWZ0X2pvaW4oY21fcHJlZCwgY21fcHJvYnMsIGJ5ID0gImNsYWltX251bWJlciIpICU+JQogICAgICAgICAgICAgICAgICBkcGx5cjo6c2VsZWN0KC1zdGF0dXNfYWN0KSAlPiUKICAgICAgICAgICAgICAgICAgZHBseXI6OnJlbmFtZShzdGF0dXNfYWN0ID0gc3RhdHVzX3NpbSkKCiMgcmVtb3ZlIGFsbCBjbGFpbXMgdGhhdCBoYXZlIGEgY2xvc2VkIGNsb3NlZCBzdGF0dXMgZnJvbSB0aGUgZGF0YQojIHRoZXNlIHdpbGwgYmUgc2V0IHRvIGluY3JlbWVudGFsIHBheW1lbnRzIG9mIDAgCmNsb3NlZF9jbG9zZWRfZGF0YSA8LSBkcGx5cjo6ZmlsdGVyKHptX3ByZWRfZGF0YSwgc3RhdHVzID09ICJDIiAmICBzdGF0dXNfYWN0ID09ICJDIikKCnptX3ByZWRfZGF0YSA8LSBmaWx0ZXIoem1fcHJlZF9kYXRhLCBzdGF0dXMgPT0gIk8iIHwgIHN0YXR1c19hY3QgPT0gIk8iKQpgYGAKCmBgYHtyIHptX3ByZWRpY3QsIGNhY2hlID0gVFJVRX0Kem1fcHJlZCA8LSBjYmluZCh6bV9wcmVkX2RhdGEsIAogICAgICAgICAgICAgICAgICBwcmVkaWN0KHptX21vZGVsLCBuZXdkYXRhID0gem1fcHJlZF9kYXRhLCB0eXBlID0gInByb2IiKSkKICAKem1fcHJlZCR6ZXJvX3NpbSA8LSBzYXBwbHkoem1fcHJlZCROb25aZXJvLCByYmlub20sIG4gPSAxLCBzaXplID0gMSkKem1fcHJlZCR6ZXJvX3NpbSA8LSBpZmVsc2Uoem1fcHJlZCR6ZXJvX3NpbSA9PSAxLCAiTm9uWmVybyIsICJaZXJvIikKYGBgCgpgYGB7ciB6bV9wcmVkaWN0X3RhYmxlLCByZXN1bHRzID0gImFzaXMifQp6bV9vdXQgPC0gem1fcHJlZAoKem1fb3V0IDwtIGRwbHlyOjpzZWxlY3Qoem1fb3V0LCBjbGFpbV9udW1iZXIsIHN0YXR1cywgdG90X3J4LCB0b3RfcGRfaW5jciwgCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c19hY3QsIE5vblplcm8sIHplcm9fc2ltKQoKem1fb3V0IDwtIGhlYWQoem1fb3V0LCA4KQpuYW1lcyh6bV9vdXQpIDwtIGMoIkNsYWltIE51bWJlciIsICJTdGF0dXMiLCAiQ2FzZSIsICJQYWlkIEluY3JlIiwgCiAgICAgICAgICAgICAgICAgICAiU2ltIFN0YXR1cyIsICJQcm9iIE5vbiBaZXJvIiwgIlplcm8gU2ltIikKa2FibGUoem1fb3V0LAogICAgICByb3cubmFtZXMgPSBGQUxTRSkKYGBgCgojIyBJbmNyZW1lbnRhbCBQYXltZW50IFNpbXVsYXRpb24KClNpbmNlIEkgYW0gb25seSBpbnRlcmVzdGVkIGluIHByZWRpY3RpbmcgaW5jcmVtZW50YWwgcGF5bWVudHMgZm9yIGNsYWltcwp0aGF0IHdlcmUgc2ltdWxhdGVkIHRvIGhhdmUgYSBub24temVybyBpbmNyZW1lbnRhbCBwYXltZW50LCBhbGwgY2xhaW1zCnRoYXQgd2VyZSBjbG9zZWQgYXQgYWdlIGByIGRldnRfcGVyaW9kYCBhbmQgd2VyZSBzaW11bGF0ZWQgdG8gYmUgY2xvc2VkCmF0IGByIGRldnRfcGVyaW9kICsgMTJgIHdpbGwgYmUgZ2l2ZW4gYW4gaW5jcmVtZW50YWwgcGF5bWVudCBvZiB6ZXJvLgoKQWRkaXRpb25hbGx5LCBhbGwgY2xhaW1zIHRoYXQgd2VyZSBzaW11bGF0ZWQgYnkgdGhlIFplcm8gUGF5bWVudCBNb2RlbAp0byBoYXZlIGEgWmVybyBwYXltZW50IHdpbGwgYmUgZ2l2ZW4gYW4gaW5jcmVtZW50YWwgcGF5bWVudCBvZiB6ZXJvLgoKYGBge3IgbnptX3ByZWRpY3RfZGF0YV9wcmVwfQojIHNlcGFyYXRlIHplcm9zIGZyb20gbm9uIHplcm9zCnplcm9fY2xhaW1zIDwtIGZpbHRlcih6bV9wcmVkLCB6ZXJvX3NpbSA9PSAiWmVybyIpCgpuem1fcHJlZCA8LSBmaWx0ZXIoem1fcHJlZCwgemVyb19zaW0gPT0gIk5vblplcm8iKQpgYGAKCk5vdyBmb3IgdGhlIGZpbmFsIHNpbXVsYXRpb25zIEkgc2ltdWxhdGUgYWxsIHRoZSBjbGFpbXMgdGhhdCB3ZXJlCnByZWRpY3RlZCB0byBoYXZlIGEgbm9uLXplcm8gaW5jcmVtZW50YWwgcGF5bWVudC4KCmBgYHtyIG56bV9wcmVkaWN0LCBjYWNoZSA9IFRSVUV9CiMjIyBRdWFzaSBQb2lzc29uIFNpbXVsYXRpb24KbnptX3ByZWQkdG90X3BkX2luY3JfZml0IDwtIGV4cChwcmVkaWN0KG56bV9tb2RlbCwgbmV3ZGF0YSA9IG56bV9wcmVkKSkKCiMgdXNlIG5lZ2F0aXZlIGJpbm9taWFsIHRvIHJhbmRvbWx5IGRpc3BlcnNlIGNsYWltcyBmcm9tIHByZWRpY3RlZCBmaXQKbnptX3ByZWQkdG90X3BkX2luY3Jfc2ltIDwtIHNhcHBseShuem1fcHJlZCR0b3RfcGRfaW5jcl9maXQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBybmJpbm9tKG4gPSAxLCBzaXplID0geCBeICgxLzUpLCBwcm9iID0gMSAvICgxICsgeCBeICg0LzUpKSkgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCmBgYAoKYGBge3IgY29tYmluZV9wcmVkaWN0aW9uc30KY2xvc2VkX2Nsb3NlZF9kYXRhJHRvdF9wZF9pbmNyX3NpbSA8LSAwCnplcm9fY2xhaW1zJHRvdF9wZF9pbmNyX3NpbSA8LSAwCgpjbG9zZWRfY2xvc2VkX2RhdGEkc2ltX3R5cGUgPC0gIkNsb3NlX0Nsb3NlIgp6ZXJvX2NsYWltcyRzaW1fdHlwZSA8LSAiWmVybyIKbnptX3ByZWQkc2ltX3R5cGUgPC0gIk5vbl9aZXJvIgoKCmNvbHMgPC0gYygic2ltX251bSIsICJjbGFpbV9udW1iZXIiLCAic3RhdHVzX2FjdCIsICJ0b3RfcGRfaW5jcl9zaW0iLCAic2ltX3R5cGUiKQoKc2ltXzEgPC0gY2xvc2VkX2Nsb3NlZF9kYXRhWywgY29sc10Kc2ltXzIgPC0gemVyb19jbGFpbXNbLCBjb2xzXQpzaW1fMyA8LSBuem1fcHJlZFssIGNvbHNdCgoKZnVsbF9zaW0gPC0gcmJpbmQoc2ltXzEsIHNpbV8yLCBzaW1fMykKCmthYmxlKAogIGZ1bGxfc2ltW3NhbXBsZSgxOm5yb3coZnVsbF9zaW0pLCAyMCksIF0sIAogIHJvdy5uYW1lcyA9IEZBTFNFLAogIGNvbC5uYW1lcyA9IGMoIlNpbSBOdW0iLCAiQ2xhaW0gTnVtIiwgIlNpbSBTdGF0dXMiLCAiU2ltIFBheW1lbnQiLCAiU2ltIFR5cGUiKSkKYGBgCgojIyBSZXN1bHRzCgojIyMgQWxsIENsYWltcyBBZ2dyZWdhdGVkIGJ5IFNpbXVsYXRpb24KCmBgYHtyIGFnZ30KIyBmaW5kIGFjdHVhbCBudW1iZXIgb2Ygb3BlbiBjbGFpbXMgYW5kIGluY3JlbWVudGFsIHBheW1lbnQgZG9sbGFycwpwcmVkX2RhdGFfYWN0dWFscyA8LSBtdXRhdGUoY21fcHJlZF9kYXRhLCBzdGF0dXNfYWN0ID0gaWZlbHNlKHN0YXR1c19hY3QgPT0gIkMiLCAwLCAxKSkKCm9wZW5fYWN0dWFsIDwtIHN1bShwcmVkX2RhdGFfYWN0dWFscyRzdGF0dXNfYWN0KQpwYXltZW50c19hY3R1YWwgPC0gc3VtKHByZWRfZGF0YV9hY3R1YWxzJHRvdF9wZF9pbmNyX2FjdCkKYGBgCgpUaGUgYmx1ZSBkYXNoZWQgdmVydGljYWwgbGluZSBtYXJrcyB0aGUgYWN0dWFsIG51bWJlciBvZiBvcGVuIGNsYWltcyBpbgp0aGUgdGVzdCBkYXRhIGF0IGByIGRldnRfcGVyaW9kICsgMTJgIG1vbnRocyBkZXZlbG9wbWVudC4gVGhlIHdoaXRlCmhpc3RvZ3JhbSBzaG93cyB0aGUgc2ltdWxhdGVkIGRpc3RyaWJ1dGlvbiBvZiBvcGVuIGNsYWltcyBhdApgciBkZXZ0X3BlcmlvZCArIDEyYCBhcyBkZXRlcm1pbmVkIGZyb20gdGhlIHNpbXVsYXRpb24gYmFzZWQgb24gdGhlCmNsYWltIGNsb3N1cmUgbW9kZWwuCgpgYGB7ciBzaW1fdl9hY3R1YWwsIGZpZy5oZWlnaHQgPSAzLCB3YXJuaW5nPUZBTFNFLCBtZXNzYWdlPUZBTFNFfQpmdWxsX3NpbV9hZ2cgPC0gbXV0YXRlKGZ1bGxfc2ltLCBvcGVuID0gaWZlbHNlKHN0YXR1c19hY3QgPT0gIkMiLCAwLCAxKSkgJT4lCiAgICAgICAgICAgICAgICAgIGdyb3VwX2J5KHNpbV9udW0pICU+JQogICAgICAgICAgICAgICAgICBzdW1tYXJpc2UobiA9IG4oKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5fY2xhaW1zID0gc3VtKG9wZW4pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5jcmVtZW50YWxfcGFpZCA9IHN1bSh0b3RfcGRfaW5jcl9zaW0pKQoKCmdncGxvdChmdWxsX3NpbV9hZ2csIGFlcyh4ID0gb3Blbl9jbGFpbXMpKSArCiAgZ2VvbV9oaXN0b2dyYW0oZmlsbCA9ICJ3aGl0ZSIsIGNvbG91ciA9ICJibGFjayIpICsKICBnZ3RpdGxlKCJIaXN0b2dyYW0gb2YgU2ltdWxhdGVkIE9wZW4gQ2xhaW0gQ291bnRzIikgKwogIHlsYWIoIk51bWJlciBvZiBPYnNlcnZhdGlvbnMiKSArCiAgeGxhYigiT3BlbiBDbGFpbSBDb3VudHMiKSArCiAgZ2VvbV92bGluZSh4aW50ZXJjZXB0ID0gb3Blbl9hY3R1YWwsIHNpemUgPSAxLCAKICAgICAgICAgICAgIGNvbG91ciA9ICJibHVlIiwgbGluZXR5cGUgPSAibG9uZ2Rhc2giKQpgYGAKClRoZSBibHVlIGRhc2hlZCB2ZXJ0aWNhbCBsaW5lIG1hcmtzIHRoZSBhY3R1YWwgaW5jcmVtZW50YWwgcGF5bWVudHMgaW4KdGhlIHRlc3QgZGF0YSBiZXR3ZWVuIGFnZSBgciBkZXZ0X3BlcmlvZGAgYW5kIGByIGRldnRfcGVyaW9kICsgMTJgLiBUaGUKd2hpdGUgaGlzdG9ncmFtIHNob3dzIHRoZSBzaW11bGF0ZWQgZGlzdHJpYnV0aW9uIG9mIGluY3JlbWVudGFsIHBheW1lbnRzCmJldHdlZW4gYWdlIGByIGRldnRfcGVyaW9kYCBhbmQgYHIgZGV2dF9wZXJpb2QgKyAxMmAgbW9udGhzIGZvciBhbGwKY2xhaW1zIGluIHRoZSB0ZXN0IGRhdGEuIFRoZSBzaW11bGF0aW9uIGlzIGJhc2VkIG9uIHRoZSBpbmNyZW1lbnRhbApwYXltZW50IG1vZGVsLgoKYGBge3IgcGxvdH0KZ2dwbG90KGZ1bGxfc2ltX2FnZywgYWVzKHggPSBpbmNyZW1lbnRhbF9wYWlkKSkgKwogIGdlb21faGlzdG9ncmFtKGZpbGwgPSAid2hpdGUiLCBjb2xvdXIgPSAiYmxhY2siKSArCiAgZ2d0aXRsZSgiSGlzdG9ncmFtIG9mIFNpbXVsYXRlZCBJbmNyZW1lbnRhbCBQYXltZW50cyIpICsKICB5bGFiKCJOdW1iZXIgb2YgT2JzZXJ2YXRpb25zIikgKwogIHhsYWIoIkluY3JlbWVudGFsIFBheW1lbnRzIikgKwogIGdlb21fdmxpbmUoeGludGVyY2VwdCA9IHBheW1lbnRzX2FjdHVhbCwgc2l6ZSA9IDEsIAogICAgICAgICAgICAgY29sb3VyID0gImJsdWUiLCBsaW5ldHlwZSA9ICJsb25nZGFzaCIpICsKICBzY2FsZV94X2NvbnRpbnVvdXMobGFiZWxzID0gZG9sbGFyKQpgYGAKCiMjIyBJbmRpdmlkdWFsIENsYWltCgpUaGUgYmx1ZSBkYXNoZWQgdmVydGljYWwgbGluZSBtYXJrcyB0aGUgYWN0dWFsIGluY3JlbWVudGFsIHBheW1lbnRzIGluCnRoZSB0ZXN0IGRhdGEgZm9yIHRoZSBjbGFpbSBpbiB0aGUgYFNlbGVjdCBDbGFpbSBOdW1iZXJgIGlucHV0IGJveApiZXR3ZWVuIGFnZSBgciBkZXZ0X3BlcmlvZGAgYW5kIGByIGRldnRfcGVyaW9kICsgMTJgLgoKYGBge3Igc2hpbnksIG1lc3NhZ2U9RkFMU0UsIHdhcm5pbmc9RkFMU0UsIGNhY2hlPUZBTFNFfQpzZWxlY3RJbnB1dCgKICAic2VsX2NsYWltIiwKICAiU2VsZWN0IENsYWltIG51bWJlciIsCiAgY2hvaWNlcyA9IHVuaXF1ZShjbGFpbXMkY2xhaW1fbnVtYmVyKVsxOjUwXSwKICBzZWxlY3RlZCA9IDIwMDgxNDYxODQKKQoKcGxvdF9kYXRhIDwtIHJlYWN0aXZlKHsKICBpbmRpdiA8LSBmdWxsX3NpbVtmdWxsX3NpbSRjbGFpbV9udW1iZXIgPT0gaW5wdXQkc2VsX2NsYWltLCBdCiAgaW5kaXZfYWN0IDwtIGNsYWltc1tjbGFpbXMkY2xhaW1fbnVtYmVyID09IGlucHV0JHNlbF9jbGFpbSwgInRvdF9wZF9pbmNyX2FjdCJdCiAgCiAgbGlzdCgKICAgIGluZGl2LAogICAgaW5kaXZfYWN0CiAgKQp9KQoKcmVuZGVyUGxvdCh7CiAgZ2dwbG90KHBsb3RfZGF0YSgpW1sxXV0sIGFlcyh4ID0gdG90X3BkX2luY3Jfc2ltKSkgKwogICAgZ2VvbV9oaXN0b2dyYW0oZmlsbCA9ICJ3aGl0ZSIsIGNvbG91ciA9ICJibGFjayIpICsKICAgIGdndGl0bGUocGFzdGUwKCJIaXN0b2dyYW0gb2YgU2ltdWxhdGVkIEluY3JlbWVudGFsIFBheW1lbnRzIGZvciBjbGFpbSAiLCBpbnB1dCRzZWxfY2xhaW0pKSArCiAgICB5bGFiKCJOdW1iZXIgb2YgT2JzZXJ2YXRpb25zIikgKwogICAgeGxhYigiSW5jcmVtZW50YWwgUGF5bWVudHMiKSArCiAgICBnZW9tX3ZsaW5lKHhpbnRlcmNlcHQgPSBwbG90X2RhdGEoKVtbMl1dLCBzaXplID0gMSwgCiAgICAgICAgICAgICAgIGNvbG91ciA9ICJibHVlIiwgbGluZXR5cGUgPSAibG9uZ2Rhc2giKSArCiAgICBzY2FsZV94X2NvbnRpbnVvdXMobGFiZWxzID0gZG9sbGFyKQp9KQoKYGBgCgpgYGB7ciB0YWJsZSwgY2FjaGU9RkFMU0V9CmNsYWltX3N0YXRzIDwtIHJlYWN0aXZlKHsKICBvdXQgPC0gY2xhaW1zW2NsYWltcyRjbGFpbV9udW1iZXIgPT0gaW5wdXQkc2VsX2NsYWltLCAzOjhdCiAgCiAgbmFtZXMob3V0KSA8LSBjKCJDbGFpbSBOdW0iLCAiU3RhdHVzIiwgIkNhc2UiLCAiSW5jZW1lbnRhbCBQYXltZW50IiwgIkFjdHVhbCBTdGF0dXMiLCAiQWN0dWFsIFBheW1lbnQiKQogIAogIG91dAp9KSAKCnJlbmRlclRhYmxlKHsKICBjbGFpbV9zdGF0cygpCiAgfSwKICBpbmNsdWRlLnJvd25hbWVzID0gRkFMU0UKKQpgYGAKCiMgQ29uY2x1c2lvbgoKKipXSVAqKgoKIyBBcHBlbmRpY2VzCgojIyBBLiBTb2Z0d2FyZQoKSSB1c2VkIGBSYCwgdGhlIGZyZWUgYW5kIG9wZW4gc291cmNlIHN0YXRpc3RpY2FsIHByb2dyYW1taW5nCmVudmlyb25tZW50LCBmb3IgYWxsIHRoZSBkYXRhIGFuYWx5c2lzLCBtb2RlbCBmaXR0aW5nLCBzaW11bGF0aW9ucywKZ3JhcGhpY3MsIGFuZCBkYXRhIG91dHB1dC4gCgpUaGUgYGNhcmV0YCBwYWNrYWdlIHdhcyB1c2VkIGV4dGVuc2l2ZWx5IGZvciB0aGUgaGVhdnkgbGlmdGluZyBwcmVkaWN0aXZlIG1vZGVsaW5nLiAKCkRldGFpbCBvZiB0aGUgYFJgIGVudmlyb25tZW50IGF0IHRoZSB0aW1lIHRoaXMgcmVwb3J0IGlzIGF2YWlsYWJsZSBiZWxvdzoKCmBgYHtyIHNlc3Npb25fY29kZX0Kc2Vzc2lvbkluZm8oKQpgYGAKCiMjIENsb3N1cmUgTW9kZWwgU3VtbWFyeSBTdGF0aXN0aWNzCgpgYGB7cn0Kc3VtbWFyeShjbV9tb2RlbCkKYGBgCgojIyBaZXJvIFBheW1lbnQgTW9kZWwgU3VtbWFyeSBTdGF0aXN0aWNzfQoKYGBge3IgfQpzdW1tYXJ5KHptX21vZGVsKQpgYGAKCiMjIEluY3JlbWVudGFsIFBheW1lbnQgTW9kZWwgU3VtbWFyeSBTdGF0aXN0aWNzCgpgYGB7ciB9CnN1bW1hcnkobnptX21vZGVsKQpgYGAK</div>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});

$(document).ready(function () {
  $('.knitsql-table').addClass('kable-table');
  var container = $('.kable-table');
  container.each(function() {

    // move the caption out of the table
    var table = $(this).children('table');
    var caption = table.children('caption').detach();
    caption.insertBefore($(this)).css('display', 'inherit');
  });
});

</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("section-TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("index.Rmd");
  window.initializeCodeFolding("hide" === "show");
});
</script>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "mathjax-local/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>


</div>
  </div>


<div aria-live="assertive" role="log" aria-relevant="additions" aria-atomic="true" style="position: absolute; width: 1px; height: 1px; margin-top: -1px; clip: rect(1px, 1px, 1px, 1px); overflow: hidden;"></div><div class="mermaidTooltip" style="opacity: 0;"></div></body></html>
